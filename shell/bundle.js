(()=>{var t=[(t,i,n)=>{n.r(i),n.d(i,{default:()=>r});const s=(t,i)=>{if("hex"==i)return(t=>{const i=e.alloc((t.length+1)/2);t=t.toLowerCase();let n=-1,s=0;for(let e of t){const t="0123456789abcdef".search(e);if(-1==t)return i;n<0?n=t:(i.O[s++]=16*n+t,n=-1)}return i})(t);"base64"==i&&(t=atob(t.replace(/-/g,"+").replace(/_/g,"/")));const n=e.alloc(t.length);return((t,i,n)=>{for(var s=0;s<n;++s)i[s]=t.charCodeAt(s)})(t,n.O,t.length),n};class e{constructor(){return this.O=null,new Proxy(this,{get:(t,i)=>"string"==typeof i&&Number.isInteger(Number(i))?t.O[i]:t[i],set:(t,i,n)=>"string"==typeof i&&Number.isInteger(Number(i))?(t.O[i]=n,!0):t[i]=n})}toString(t){if(!t)return"<Buffer "+(this.O?this.O.join(" "):"")+">";const i=String.fromCharCode(...this.O?this.O:[]);return"binary"==t?i:"base64"==t?btoa(i):void 0}equals(t){return this.O&&t.O&&this.O.length==t.O.length&&this.O.every(((i,n)=>i==t.O[n]))}get length(){return this.O?this.O.byteLength:0}static from(t,i=null){if(i||(i="binary"),null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if("string"==typeof t)return s(t,i);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return(t=>{const i=new e;return i.O=new Uint8Array(t),i})(t);if(t instanceof e)return t;throw"Cannot construct Buffer from "+t+" with encoiding: "+i}static alloc(t){const i=new e;return i.O=new Uint8Array(t),i}}const r=e},t=>{var i,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(t,i,n){return Function.prototype.apply.call(t,i,n)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var e=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise((function(n,s){function e(n){t.removeListener(i,r),s(n)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",e),n([].slice.call(arguments))}b(t,i,r,{once:!0}),"error"!==i&&function(t,i,n){"function"==typeof t.on&&b(t,"error",i,n)}(t,e,{once:!0})}))},r.EventEmitter=r,r.prototype._=void 0,r.prototype.M=0,r.prototype.S=void 0;var h=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t.S?r.defaultMaxListeners:t.S}function c(t,i,n,s){var e,r,h;if(o(n),void 0===(r=t._)?(r=t._=Object.create(null),t.M=0):(void 0!==r.newListener&&(t.emit("newListener",i,n.listener?n.listener:n),r=t._),h=r[i]),void 0===h)h=r[i]=n,++t.M;else if("function"==typeof h?h=r[i]=s?[n,h]:[h,n]:s?h.unshift(n):h.push(n),(e=u(t))>0&&h.length>e&&!h.warned){h.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=h.length,console&&console.warn}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(t,i,n){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:n},e=f.bind(s);return e.listener=n,s.wrapFn=e,e}function l(t,i,n){var s=t._;if(void 0===s)return[];var e=s[i];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var i=new Array(t.length),n=0;n<i.length;++n)i[n]=t[n].listener||t[n];return i}(e):d(e,e.length)}function v(t){var i=this._;if(void 0!==i){var n=i[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,i){for(var n=new Array(i),s=0;s<i;++s)n[s]=t[s];return n}function b(t,i,n,s){if("function"==typeof t.on)s.once?t.once(i,n):t.on(i,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function e(r){s.once&&t.removeEventListener(i,e),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||e(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),r.init=function(){void 0!==this._&&this._!==Object.getPrototypeOf(this)._||(this._=Object.create(null),this.M=0),this.S=this.S||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||e(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.S=t,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(t){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var e="error"===t,r=this._;if(void 0!==r)e=e&&void 0===r.error;else if(!e)return!1;if(e){var h;if(i.length>0&&(h=i[0]),h instanceof Error)throw h;var o=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var u=r[t];if(void 0===u)return!1;if("function"==typeof u)s(u,this,i);else{var c=u.length,f=d(u,c);for(n=0;n<c;++n)s(f[n],this,i)}return!0},r.prototype.addListener=function(t,i){return c(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return c(this,t,i,!0)},r.prototype.once=function(t,i){return o(i),this.on(t,a(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return o(i),this.prependListener(t,a(this,t,i)),this},r.prototype.removeListener=function(t,i){var n,s,e,r,h;if(o(i),void 0===(s=this._))return this;if(void 0===(n=s[t]))return this;if(n===i||n.listener===i)0==--this.M?this._=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||i));else if("function"!=typeof n){for(e=-1,r=n.length-1;r>=0;r--)if(n[r]===i||n[r].listener===i){h=n[r].listener,e=r;break}if(e<0)return this;0===e?n.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(n,e),1===n.length&&(s[t]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",t,h||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,n,s;if(void 0===(n=this._))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._=Object.create(null),this.M=0):void 0!==n[t]&&(0==--this.M?this._=Object.create(null):delete n[t]),this;if(0===arguments.length){var e,r=Object.keys(n);for(s=0;s<r.length;++s)"removeListener"!==(e=r[s])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._=Object.create(null),this.M=0,this}if("function"==typeof(i=n[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return l(this,t,!0)},r.prototype.rawListeners=function(t){return l(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):v.call(t,i)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return this.M>0?i(this._):[]}},t=>{var i,n;self,t.exports=(i={4567:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.AccessibilityManager=void 0;var r=n(9042),h=n(6114),o=n(6193),u=n(3656),c=n(844),f=n(5596),a=n(9631),l=function(t){function i(i,n){var s=t.call(this)||this;s.U=i,s.P=n,s.N=0,s.D=[],s.L="",s.W=document.createElement("div"),s.W.classList.add("xterm-accessibility"),s.F=document.createElement("div"),s.F.setAttribute("role","list"),s.F.classList.add("xterm-accessibility-tree"),s.G=[];for(var e=0;e<s.U.rows;e++)s.G[e]=s.$(),s.F.appendChild(s.G[e]);if(s.J=function(t){return s.V(t,0)},s.X=function(t){return s.V(t,1)},s.G[0].addEventListener("focus",s.J),s.G[s.G.length-1].addEventListener("focus",s.X),s.tt(),s.W.appendChild(s.F),s.it=new o.RenderDebouncer(s.nt.bind(s)),s.st(),s.et=document.createElement("div"),s.et.classList.add("live-region"),s.et.setAttribute("aria-live","assertive"),s.W.appendChild(s.et),!s.U.element)throw new Error("Cannot enable accessibility before Terminal.open");return s.U.element.insertAdjacentElement("afterbegin",s.W),s.register(s.it),s.register(s.U.onResize((function(t){return s.rt(t.rows)}))),s.register(s.U.onRender((function(t){return s.st(t.start,t.end)}))),s.register(s.U.onScroll((function(){return s.st()}))),s.register(s.U.onA11yChar((function(t){return s.ht(t)}))),s.register(s.U.onLineFeed((function(){return s.ht("\n")}))),s.register(s.U.onA11yTab((function(t){return s.ot(t)}))),s.register(s.U.onKey((function(t){return s.ut(t.key)}))),s.register(s.U.onBlur((function(){return s.ct()}))),s.register(s.P.onDimensionsChange((function(){return s.tt()}))),s.ft=new f.ScreenDprMonitor,s.register(s.ft),s.ft.setListener((function(){return s.tt()})),s.register(u.addDisposableDomListener(window,"resize",(function(){return s.tt()}))),s}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),a.removeElementFromParent(this.W),this.G.length=0},i.prototype.V=function(t,i){var n=t.target,s=this.G[0===i?1:this.G.length-2];if(n.getAttribute("aria-posinset")!==(0===i?"1":""+this.U.buffer.lines.length)&&t.relatedTarget===s){var e,r;if(0===i?(e=n,r=this.G.pop(),this.F.removeChild(r)):(e=this.G.shift(),r=n,this.F.removeChild(e)),e.removeEventListener("focus",this.J),r.removeEventListener("focus",this.X),0===i){var h=this.$();this.G.unshift(h),this.F.insertAdjacentElement("afterbegin",h)}else h=this.$(),this.G.push(h),this.F.appendChild(h);this.G[0].addEventListener("focus",this.J),this.G[this.G.length-1].addEventListener("focus",this.X),this.U.scrollLines(0===i?-1:1),this.G[0===i?1:this.G.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},i.prototype.rt=function(t){this.G[this.G.length-1].removeEventListener("focus",this.X);for(var i=this.F.children.length;i<this.U.rows;i++)this.G[i]=this.$(),this.F.appendChild(this.G[i]);for(;this.G.length>t;)this.F.removeChild(this.G.pop());this.G[this.G.length-1].addEventListener("focus",this.X),this.tt()},i.prototype.$=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this.at(t),t},i.prototype.ot=function(t){for(var i=0;i<t;i++)this.ht(" ")},i.prototype.ht=function(t){var i=this;this.N<21&&(this.D.length>0?this.D.shift()!==t&&(this.L+=t):this.L+=t,"\n"===t&&(this.N++,21===this.N&&(this.et.textContent+=r.tooMuchOutput)),h.isMac&&this.et.textContent&&this.et.textContent.length>0&&!this.et.parentNode&&setTimeout((function(){i.W.appendChild(i.et)}),0))},i.prototype.ct=function(){this.et.textContent="",this.N=0,h.isMac&&a.removeElementFromParent(this.et)},i.prototype.ut=function(t){this.ct(),this.D.push(t)},i.prototype.st=function(t,i){this.it.refresh(t,i,this.U.rows)},i.prototype.nt=function(t,i){for(var n=this.U.buffer,s=n.lines.length.toString(),e=t;e<=i;e++){var r=n.translateBufferLineToString(n.ydisp+e,!0),h=(n.ydisp+e+1).toString(),o=this.G[e];o&&(0===r.length?o.innerText="Â ":o.textContent=r,o.setAttribute("aria-posinset",h),o.setAttribute("aria-setsize",s))}this.lt()},i.prototype.tt=function(){if(this.P.dimensions.actualCellHeight){this.G.length!==this.U.rows&&this.rt(this.U.rows);for(var t=0;t<this.U.rows;t++)this.at(this.G[t])}},i.prototype.at=function(t){t.style.height=this.P.dimensions.actualCellHeight+"px"},i.prototype.lt=function(){0!==this.L.length&&(this.et.textContent+=this.L,this.L="")},i}(c.Disposable);i.AccessibilityManager=l},3614:(t,i)=>{function n(t){return t.replace(/\r?\n/g,"\r")}function s(t,i){return i?"[200~"+t+"[201~":t}function e(t,i,e){t=s(t=n(t),e.decPrivateModes.bracketedPasteMode),e.triggerDataEvent(t,!0),i.value=""}function r(t,i,n){var s=n.getBoundingClientRect(),e=t.clientX-s.left-10,r=t.clientY-s.top-10;i.style.width="20px",i.style.height="20px",i.style.left=e+"px",i.style.top=r+"px",i.style.zIndex="1000",i.focus()}Object.defineProperty(i,"I",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=s,i.copyHandler=function(t,i){t.clipboardData&&t.clipboardData.setData("text/plain",i.selectionText),t.preventDefault()},i.handlePasteEvent=function(t,i,n){t.stopPropagation(),t.clipboardData&&e(t.clipboardData.getData("text/plain"),i,n)},i.paste=e,i.moveTextAreaUnderMouseCursor=r,i.rightClickHandler=function(t,i,n,s,e){r(t,i,n),e&&s.rightClickSelect(t),i.value=s.selectionText,i.select()}},4774:(t,i)=>{var n,s,e,r;function h(t){var i=t.toString(16);return i.length<2?"0"+i:i}function o(t,i){return t<i?(i+.05)/(t+.05):(t+.05)/(i+.05)}Object.defineProperty(i,"I",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=void 0,function(t){t.toCss=function(t,i,n,s){return void 0!==s?"#"+h(t)+h(i)+h(n)+h(s):"#"+h(t)+h(i)+h(n)},t.toRgba=function(t,i,n,s){return void 0===s&&(s=255),(t<<24|i<<16|n<<8|s)>>>0}}(n=i.channels||(i.channels={})),(s=i.color||(i.color={})).blend=function(t,i){var s=(255&i.rgba)/255;if(1===s)return{css:i.css,rgba:i.rgba};var e=i.rgba>>24&255,r=i.rgba>>16&255,h=i.rgba>>8&255,o=t.rgba>>24&255,u=t.rgba>>16&255,c=t.rgba>>8&255,f=o+Math.round((e-o)*s),a=u+Math.round((r-u)*s),l=c+Math.round((h-c)*s);return{css:n.toCss(f,a,l),rgba:n.toRgba(f,a,l)}},s.isOpaque=function(t){return 255==(255&t.rgba)},s.ensureContrastRatio=function(t,i,n){var s=r.ensureContrastRatio(t.rgba,i.rgba,n);if(s)return r.toColor(s>>24&255,s>>16&255,s>>8&255)},s.opaque=function(t){var i=(255|t.rgba)>>>0,s=r.toChannels(i),e=s[0],h=s[1],o=s[2];return{css:n.toCss(e,h,o),rgba:i}},s.opacity=function(t,i){var s=Math.round(255*i),e=r.toChannels(t.rgba),h=e[0],o=e[1],u=e[2];return{css:n.toCss(h,o,u,s),rgba:n.toRgba(h,o,u,s)}},(i.css||(i.css={})).toColor=function(t){switch(t.length){case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(t){function i(t,i,n){var s=t/255,e=i/255,r=n/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}t.relativeLuminance=function(t){return i(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=i}(e=i.rgb||(i.rgb={})),function(t){function i(t,i,n){for(var s=t>>24&255,r=t>>16&255,h=t>>8&255,u=i>>24&255,c=i>>16&255,f=i>>8&255,a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));a<n&&(u>0||c>0||f>0);)u-=Math.max(0,Math.ceil(.1*u)),c-=Math.max(0,Math.ceil(.1*c)),f-=Math.max(0,Math.ceil(.1*f)),a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));return(u<<24|c<<16|f<<8|255)>>>0}function s(t,i,n){for(var s=t>>24&255,r=t>>16&255,h=t>>8&255,u=i>>24&255,c=i>>16&255,f=i>>8&255,a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));a<n&&(u<255||c<255||f<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),c=Math.min(255,c+Math.ceil(.1*(255-c))),f=Math.min(255,f+Math.ceil(.1*(255-f))),a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));return(u<<24|c<<16|f<<8|255)>>>0}t.ensureContrastRatio=function(t,n,r){var h=e.relativeLuminance(t>>8),u=e.relativeLuminance(n>>8);if(o(h,u)<r)return u<h?i(t,n,r):s(t,n,r)},t.reduceLuminance=i,t.increaseLuminance=s,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,i,s){return{css:n.toCss(t,i,s),rgba:n.toRgba(t,i,s)}}}(r=i.rgba||(i.rgba={})),i.toPaddedHex=h,i.contrastRatio=o},7239:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.ColorContrastCache=void 0;var n=function(){function t(){this.vt={},this.dt={}}return t.prototype.clear=function(){this.vt={},this.dt={}},t.prototype.setCss=function(t,i,n){this.dt[t]||(this.dt[t]={}),this.dt[t][i]=n},t.prototype.getCss=function(t,i){return this.dt[t]?this.dt[t][i]:void 0},t.prototype.setColor=function(t,i,n){this.vt[t]||(this.vt[t]={}),this.vt[t][i]=n},t.prototype.getColor=function(t,i){return this.vt[t]?this.vt[t][i]:void 0},t}();i.ColorContrastCache=n},5680:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.ColorManager=i.DEFAULT_ANSI_COLORS=void 0;var s=n(4774),e=n(7239),r=s.css.toColor("#ffffff"),h=s.css.toColor("#000000"),o=s.css.toColor("#ffffff"),u=s.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var t=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],n=0;n<216;n++){var e=i[n/36%6|0],r=i[n/6%6|0],h=i[n%6];t.push({css:s.channels.toCss(e,r,h),rgba:s.channels.toRgba(e,r,h)})}for(n=0;n<24;n++){var o=8+10*n;t.push({css:s.channels.toCss(o,o,o),rgba:s.channels.toRgba(o,o,o)})}return t}());var f=function(){function t(t,n){this.allowTransparency=n;var f=t.createElement("canvas");f.width=1,f.height=1;var a=f.getContext("2d");if(!a)throw new Error("Could not get rendering context");this.bt=a,this.bt.globalCompositeOperation="copy",this.wt=this.bt.createLinearGradient(0,0,1,1),this.gt=new e.ColorContrastCache,this.colors={foreground:r,background:h,cursor:o,cursorAccent:u,selectionTransparent:c,selectionOpaque:s.color.blend(h,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this.gt}}return t.prototype.onOptionsChange=function(t){"minimumContrastRatio"===t&&this.gt.clear()},t.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this.Ot(t.foreground,r),this.colors.background=this.Ot(t.background,h),this.colors.cursor=this.Ot(t.cursor,o,!0),this.colors.cursorAccent=this.Ot(t.cursorAccent,u,!0),this.colors.selectionTransparent=this.Ot(t.selection,c,!0),this.colors.selectionOpaque=s.color.blend(this.colors.background,this.colors.selectionTransparent),s.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=s.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this.Ot(t.black,i.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this.Ot(t.red,i.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this.Ot(t.green,i.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this.Ot(t.yellow,i.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this.Ot(t.blue,i.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this.Ot(t.magenta,i.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this.Ot(t.cyan,i.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this.Ot(t.white,i.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this.Ot(t.brightBlack,i.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this.Ot(t.brightRed,i.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this.Ot(t.brightGreen,i.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this.Ot(t.brightYellow,i.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this.Ot(t.brightBlue,i.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this.Ot(t.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this.Ot(t.brightCyan,i.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this.Ot(t.brightWhite,i.DEFAULT_ANSI_COLORS[15]),this.gt.clear()},t.prototype.Ot=function(t,i,n){if(void 0===n&&(n=this.allowTransparency),void 0===t)return i;if(this.bt.fillStyle=this.wt,this.bt.fillStyle=t,"string"!=typeof this.bt.fillStyle)return i;this.bt.fillRect(0,0,1,1);var e=this.bt.getImageData(0,0,1,1).data;if(255!==e[3]){if(!n)return i;var r=this.bt.fillStyle.substring(5,this.bt.fillStyle.length-1).split(",").map((function(t){return Number(t)})),h=r[0],o=r[1],u=r[2],c=r[3],f=Math.round(255*c);return{rgba:s.channels.toRgba(h,o,u,f),css:t}}return{css:this.bt.fillStyle,rgba:s.channels.toRgba(e[0],e[1],e[2],e[3])}},t}();i.ColorManager=f},9631:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var s=0,e=i;s<e.length;s++){var r=e[s];null===(t=null==r?void 0:r.parentElement)||void 0===t||t.removeChild(r)}}},3656:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(t,i,n,s){t.addEventListener(i,n,s);var e=!1;return{dispose:function(){e||(e=!0,t.removeEventListener(i,n,s))}}}},3551:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.MouseZone=i.Linkifier=void 0;var r=n(8460),h=n(2585),o=function(){function t(t,i,n){this._t=t,this.kt=i,this.Mt=n,this.qt=[],this.xt=0,this.At=new r.EventEmitter,this.St=new r.EventEmitter,this.Rt=new r.EventEmitter,this.Ct={start:void 0,end:void 0}}return Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this.At.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this.St.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLinkTooltip",{get:function(){return this.Rt.event},enumerable:!1,configurable:!0}),t.prototype.attachToDom=function(t,i){this.Et=t,this.Tt=i},t.prototype.linkifyRows=function(i,n){var s=this;this.Tt&&(void 0===this.Ct.start||void 0===this.Ct.end?(this.Ct.start=i,this.Ct.end=n):(this.Ct.start=Math.min(this.Ct.start,i),this.Ct.end=Math.max(this.Ct.end,n)),this.Tt.clearAll(i,n),this.It&&clearTimeout(this.It),this.It=setTimeout((function(){return s.Ut()}),t.Bt))},t.prototype.Ut=function(){this.It=void 0;var t=this._t.buffer;if(void 0!==this.Ct.start&&void 0!==this.Ct.end){var i=t.ydisp+this.Ct.start;if(!(i>=t.lines.length)){for(var n=t.ydisp+Math.min(this.Ct.end,this._t.rows)+1,s=Math.ceil(2e3/this._t.cols),e=this._t.buffer.iterator(!1,i,n,s,s);e.hasNext();)for(var r=e.next(),h=0;h<this.qt.length;h++)this.Pt(r.range.first,r.content,this.qt[h]);this.Ct.start=void 0,this.Ct.end=void 0}}else this.kt.debug("_rowToLinkify was unset before _linkifyRows was called")},t.prototype.registerLinkMatcher=function(t,i,n){if(void 0===n&&(n={}),!i)throw new Error("handler must be defined");var s={id:this.xt++,regex:t,handler:i,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this.Nt(s),s.id},t.prototype.Nt=function(t){if(0!==this.qt.length){for(var i=this.qt.length-1;i>=0;i--)if(t.priority<=this.qt[i].priority)return void this.qt.splice(i+1,0,t);this.qt.splice(0,0,t)}else this.qt.push(t)},t.prototype.deregisterLinkMatcher=function(t){for(var i=0;i<this.qt.length;i++)if(this.qt[i].id===t)return this.qt.splice(i,1),!0;return!1},t.prototype.Pt=function(t,i,n){for(var s,e=this,r=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),h=-1,o=function(){var o=s["number"!=typeof n.matchIndex?0:n.matchIndex];if(!o)return u.kt.debug("match found without corresponding matchIndex",s,n),"break";if(h=i.indexOf(o,h+1),r.lastIndex=h+o.length,h<0)return"break";var c=u._t.buffer.stringIndexToBufferIndex(t,h);if(c[0]<0)return"break";var f=u._t.buffer.lines.get(c[0]);if(!f)return"break";var a=f.getFg(c[1]),l=a?a>>9&511:void 0;n.validationCallback?n.validationCallback(o,(function(t){e.It||t&&e.Dt(c[1],c[0]-e._t.buffer.ydisp,o,n,l)})):u.Dt(c[1],c[0]-u._t.buffer.ydisp,o,n,l)},u=this;null!==(s=r.exec(i))&&"break"!==o(););},t.prototype.Dt=function(t,i,n,s,e){var r=this;if(this.Tt&&this.Et){var h=this.Mt.getStringCellWidth(n),o=t%this._t.cols,c=i+Math.floor(t/this._t.cols),f=(o+h)%this._t.cols,a=c+Math.floor((o+h)/this._t.cols);0===f&&(f=this._t.cols,a--),this.Tt.add(new u(o+1,c+1,f+1,a+1,(function(t){if(s.handler)return s.handler(t,n);var i=window.open();i&&(i.opener=null,i.location.href=n)}),(function(){r.At.fire(r.Lt(o,c,f,a,e)),r.Et.classList.add("xterm-cursor-pointer")}),(function(t){r.Rt.fire(r.Lt(o,c,f,a,e)),s.hoverTooltipCallback&&s.hoverTooltipCallback(t,n,{start:{x:o,y:c},end:{x:f,y:a}})}),(function(){r.St.fire(r.Lt(o,c,f,a,e)),r.Et.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()}),(function(t){return!s.willLinkActivate||s.willLinkActivate(t,n)})))}},t.prototype.Lt=function(t,i,n,s,e){return{x1:t,y1:i,x2:n,y2:s,cols:this._t.cols,fg:e}},t.Bt=200,t=s([e(0,h.IBufferService),e(1,h.ILogService),e(2,h.IUnicodeService)],t)}();i.Linkifier=o;var u=function(t,i,n,s,e,r,h,o,u){this.x1=t,this.y1=i,this.x2=n,this.y2=s,this.clickCallback=e,this.hoverCallback=r,this.tooltipCallback=h,this.leaveCallback=o,this.willLinkActivate=u};i.MouseZone=u},6465:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.Linkifier2=void 0;var o=n(2585),u=n(8460),c=n(844),f=n(3656),a=function(t){function i(i){var n=t.call(this)||this;return n._t=i,n.Wt=[],n.Ft=[],n.Kt=!0,n.Ht=-1,n.At=n.register(new u.EventEmitter),n.St=n.register(new u.EventEmitter),n.register(c.getDisposeArrayDisposable(n.Ft)),n}return e(i,t),Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this.At.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this.St.event},enumerable:!1,configurable:!0}),i.prototype.registerLinkProvider=function(t){var i=this;return this.Wt.push(t),{dispose:function(){var n=i.Wt.indexOf(t);-1!==n&&i.Wt.splice(n,1)}}},i.prototype.attachToDom=function(t,i,n){var s=this;this.Et=t,this.zt=i,this.P=n,this.register(f.addDisposableDomListener(this.Et,"mouseleave",(function(){s.Kt=!0,s.Gt()}))),this.register(f.addDisposableDomListener(this.Et,"mousemove",this.$t.bind(this))),this.register(f.addDisposableDomListener(this.Et,"click",this.Jt.bind(this)))},i.prototype.$t=function(t){if(this.Vt=t,this.Et&&this.zt){var i=this.Yt(t,this.Et,this.zt);if(i){this.Kt=!1;for(var n=t.composedPath(),s=0;s<n.length;s++){var e=n[s];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this.Qt&&i.x===this.Qt.x&&i.y===this.Qt.y||(this.Xt(i),this.Qt=i)}}},i.prototype.Xt=function(t){if(this.Ht!==t.y)return this.Gt(),void this.Zt(t,!1);this.ti&&this.ii(this.ti.link,t)||(this.Gt(),this.Zt(t,!0))},i.prototype.Zt=function(t,i){var n,s=this;this.ni&&i||(null===(n=this.ni)||void 0===n||n.forEach((function(t){null==t||t.forEach((function(t){t.link.dispose&&t.link.dispose()}))})),this.ni=new Map,this.Ht=t.y);var e=!1;this.Wt.forEach((function(n,r){var h;i?(null===(h=s.ni)||void 0===h?void 0:h.get(r))&&(e=s.si(r,t,e)):n.provideLinks(t.y,(function(i){var n,h;if(!s.Kt){var o=null==i?void 0:i.map((function(t){return{link:t}}));null===(n=s.ni)||void 0===n||n.set(r,o),e=s.si(r,t,e),(null===(h=s.ni)||void 0===h?void 0:h.size)===s.Wt.length&&s.ei(t.y,s.ni)}}))}))},i.prototype.ei=function(t,i){for(var n=new Set,s=0;s<i.size;s++){var e=i.get(s);if(e)for(var r=0;r<e.length;r++)for(var h=e[r],o=h.link.range.start.y<t?0:h.link.range.start.x,u=h.link.range.end.y>t?this._t.cols:h.link.range.end.x,c=o;c<=u;c++){if(n.has(c)){e.splice(r--,1);break}n.add(c)}}},i.prototype.si=function(t,i,n){var s,e=this;if(!this.ni)return n;for(var r=this.ni.get(t),h=!1,o=0;o<t;o++)this.ni.has(o)&&!this.ni.get(o)||(h=!0);if(!h&&r){var u=r.find((function(t){return e.ii(t.link,i)}));u&&(n=!0,this.ri(u))}if(this.ni.size===this.Wt.length&&!n)for(o=0;o<this.ni.size;o++){var c=null===(s=this.ni.get(o))||void 0===s?void 0:s.find((function(t){return e.ii(t.link,i)}));if(c){n=!0,this.ri(c);break}}return n},i.prototype.Jt=function(t){if(this.Et&&this.zt&&this.ti){var i=this.Yt(t,this.Et,this.zt);i&&this.ii(this.ti.link,i)&&this.ti.link.activate(t,this.ti.link.text)}},i.prototype.Gt=function(t,i){this.Et&&this.ti&&this.Vt&&(!t||!i||this.ti.link.range.start.y>=t&&this.ti.link.range.end.y<=i)&&(this.hi(this.Et,this.ti.link,this.Vt),this.ti=void 0,c.disposeArray(this.Ft))},i.prototype.ri=function(t){var i=this;if(this.Et&&this.Vt&&this.zt){var n=this.Yt(this.Vt,this.Et,this.zt);n&&this.ii(t.link,n)&&(this.ti=t,this.ti.state={decorations:{underline:void 0===t.link.decorations||t.link.decorations.underline,pointerCursor:void 0===t.link.decorations||t.link.decorations.pointerCursor},isHovered:!0},this.oi(this.Et,t.link,this.Vt),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var t,n;return null===(n=null===(t=i.ti)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.pointerCursor},set:function(t){var n,s;(null===(n=i.ti)||void 0===n?void 0:n.state)&&i.ti.state.decorations.pointerCursor!==t&&(i.ti.state.decorations.pointerCursor=t,i.ti.state.isHovered&&(null===(s=i.Et)||void 0===s||s.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:function(){var t,n;return null===(n=null===(t=i.ti)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.underline},set:function(n){var s,e,r;(null===(s=i.ti)||void 0===s?void 0:s.state)&&(null===(r=null===(e=i.ti)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.underline)!==n&&(i.ti.state.decorations.underline=n,i.ti.state.isHovered&&i.ui(t.link,n))}}}),this.P&&this.Ft.push(this.P.onRenderedBufferChange((function(t){var n=0===t.start?0:t.start+1+i._t.buffer.ydisp;i.Gt(n,t.end+1+i._t.buffer.ydisp)}))))}},i.prototype.oi=function(t,i,n){var s;(null===(s=this.ti)||void 0===s?void 0:s.state)&&(this.ti.state.isHovered=!0,this.ti.state.decorations.underline&&this.ui(i,!0),this.ti.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)},i.prototype.ui=function(t,i){var n=t.range,s=this._t.buffer.ydisp,e=this.ci(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(i?this.At:this.St).fire(e)},i.prototype.hi=function(t,i,n){var s;(null===(s=this.ti)||void 0===s?void 0:s.state)&&(this.ti.state.isHovered=!1,this.ti.state.decorations.underline&&this.ui(i,!1),this.ti.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)},i.prototype.ii=function(t,i){var n=t.range.start.y===t.range.end.y,s=t.range.start.y<i.y,e=t.range.end.y>i.y;return(n&&t.range.start.x<=i.x&&t.range.end.x>=i.x||s&&t.range.end.x>=i.x||e&&t.range.start.x<=i.x||s&&e)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},i.prototype.Yt=function(t,i,n){var s=n.getCoords(t,i,this._t.cols,this._t.rows);if(s)return{x:s[0],y:s[1]+this._t.buffer.ydisp}},i.prototype.ci=function(t,i,n,s,e){return{x1:t,y1:i,x2:n,y2:s,cols:this._t.cols,fg:e}},r([h(0,o.IBufferService)],i)}(c.Disposable);i.Linkifier2=a},9042:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.MouseZoneManager=void 0;var o=n(844),u=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,s,e,r,h){var o=t.call(this)||this;return o.Et=i,o.fi=n,o._t=s,o.zt=e,o.ai=r,o.li=h,o.vi=[],o.di=!1,o.bi=[void 0,void 0],o.wi=0,o.register(u.addDisposableDomListener(o.Et,"mousedown",(function(t){return o.gi(t)}))),o.mi=function(t){return o.$t(t)},o.pi=function(t){return o.Oi(t)},o.ji=function(t){return o.Jt(t)},o}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),this.yi()},i.prototype.add=function(t){this.vi.push(t),1===this.vi.length&&this._i()},i.prototype.clearAll=function(t,i){if(0!==this.vi.length){t&&i||(t=0,i=this._t.rows-1);for(var n=0;n<this.vi.length;n++){var s=this.vi[n];(s.y1>t&&s.y1<=i+1||s.y2>t&&s.y2<=i+1||s.y1<t&&s.y2>i+1)&&(this.ki&&this.ki===s&&(this.ki.leaveCallback(),this.ki=void 0),this.vi.splice(n--,1))}0===this.vi.length&&this.yi()}},i.prototype._i=function(){this.di||(this.di=!0,this.Et.addEventListener("mousemove",this.mi),this.Et.addEventListener("mouseleave",this.pi),this.Et.addEventListener("click",this.ji))},i.prototype.yi=function(){this.di&&(this.di=!1,this.Et.removeEventListener("mousemove",this.mi),this.Et.removeEventListener("mouseleave",this.pi),this.Et.removeEventListener("click",this.ji))},i.prototype.$t=function(t){this.bi[0]===t.pageX&&this.bi[1]===t.pageY||(this.Xt(t),this.bi=[t.pageX,t.pageY])},i.prototype.Xt=function(t){var i=this,n=this.Mi(t);n!==this.ki&&(this.ki&&(this.ki.leaveCallback(),this.ki=void 0,this.qi&&clearTimeout(this.qi)),n&&(this.ki=n,n.hoverCallback&&n.hoverCallback(t),this.qi=window.setTimeout((function(){return i.xi(t)}),this.li.options.linkTooltipHoverDuration)))},i.prototype.xi=function(t){this.qi=void 0;var i=this.Mi(t);i&&i.tooltipCallback&&i.tooltipCallback(t)},i.prototype.gi=function(t){if(this.wi=this.Ai(),this.di){var i=this.Mi(t);(null==i?void 0:i.willLinkActivate(t))&&(t.preventDefault(),t.stopImmediatePropagation())}},i.prototype.Oi=function(t){this.ki&&(this.ki.leaveCallback(),this.ki=void 0,this.qi&&clearTimeout(this.qi))},i.prototype.Jt=function(t){var i=this.Mi(t),n=this.Ai();i&&n===this.wi&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},i.prototype.Ai=function(){var t=this.ai.selectionText;return t?t.length:0},i.prototype.Mi=function(t){var i=this.zt.getCoords(t,this.fi,this._t.cols,this._t.rows);if(i)for(var n=i[0],s=i[1],e=0;e<this.vi.length;e++){var r=this.vi[e];if(r.y1===r.y2){if(s===r.y1&&n>=r.x1&&n<r.x2)return r}else if(s===r.y1&&n>=r.x1||s===r.y2&&n<r.x2||s>r.y1&&s<r.y2)return r}},r([h(2,f.IBufferService),h(3,c.IMouseService),h(4,c.ISelectionService),h(5,f.IOptionsService)],i)}(o.Disposable);i.MouseZoneManager=a},6193:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.RenderDebouncer=void 0;var n=function(){function t(t){this.Si=t}return t.prototype.dispose=function(){this.Ri&&(window.cancelAnimationFrame(this.Ri),this.Ri=void 0)},t.prototype.refresh=function(t,i,n){var s=this;this.Ci=n,t=void 0!==t?t:0,i=void 0!==i?i:this.Ci-1,this.Ei=void 0!==this.Ei?Math.min(this.Ei,t):t,this.Ti=void 0!==this.Ti?Math.max(this.Ti,i):i,this.Ri||(this.Ri=window.requestAnimationFrame((function(){return s.Ii()})))},t.prototype.Ii=function(){if(void 0!==this.Ei&&void 0!==this.Ti&&void 0!==this.Ci){var t=Math.max(this.Ei,0),i=Math.min(this.Ti,this.Ci-1);this.Ei=void 0,this.Ti=void 0,this.Ri=void 0,this.Si(t,i)}},t}();i.RenderDebouncer=n},5596:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.ScreenDprMonitor=void 0;var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Ui=window.devicePixelRatio,i}return e(i,t),i.prototype.setListener=function(t){var i=this;this.Bi&&this.clearListener(),this.Bi=t,this.Pi=function(){i.Bi&&(i.Bi(window.devicePixelRatio,i.Ui),i.Ni())},this.Ni()},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearListener()},i.prototype.Ni=function(){var t;this.Pi&&(null===(t=this.Di)||void 0===t||t.removeListener(this.Pi),this.Ui=window.devicePixelRatio,this.Di=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this.Di.addListener(this.Pi))},i.prototype.clearListener=function(){this.Di&&this.Bi&&this.Pi&&(this.Di.removeListener(this.Pi),this.Di=void 0,this.Bi=void 0,this.Pi=void 0)},i}(n(844).Disposable);i.ScreenDprMonitor=r},3236:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.Terminal=void 0;var r=n(2950),h=n(1680),o=n(3614),u=n(2584),c=n(5435),f=n(3525),a=n(3551),l=n(9312),v=n(6114),d=n(3656),b=n(9042),w=n(357),g=n(6954),m=n(4567),p=n(1296),O=n(7399),j=n(8460),y=n(8437),_=n(5680),k=n(3230),M=n(4725),q=n(428),x=n(8934),A=n(6465),S=n(5114),R=n(8969),C=n(4774),E="undefined"!=typeof window?window.document:null,T=function(t){function i(i){void 0===i&&(i={});var n=t.call(this,i)||this;return n.browser=v,n.Li=!1,n.Wi=new j.EventEmitter,n.ut=new j.EventEmitter,n.Fi=new j.EventEmitter,n.Ki=new j.EventEmitter,n.Hi=new j.EventEmitter,n.zi=new j.EventEmitter,n.Gi=new j.EventEmitter,n.$i=new j.EventEmitter,n.Ji=new j.EventEmitter,n.Vi(),n.linkifier=n.Yi.createInstance(a.Linkifier),n.linkifier2=n.register(n.Yi.createInstance(A.Linkifier2)),n.register(n.Qi.onRequestBell((function(){return n.bell()}))),n.register(n.Qi.onRequestRefreshRows((function(t,i){return n.refresh(t,i)}))),n.register(n.Qi.onRequestReset((function(){return n.reset()}))),n.register(n.Qi.onRequestScroll((function(t,i){return n.scroll(t,i||void 0)}))),n.register(n.Qi.onRequestWindowsOptionsReport((function(t){return n.Xi(t)}))),n.register(n.Qi.onAnsiColorChange((function(t){return n.Zi(t)}))),n.register(j.forwardEvent(n.Qi.onCursorMove,n.Wi)),n.register(j.forwardEvent(n.Qi.onTitleChange,n.Hi)),n.register(j.forwardEvent(n.Qi.onA11yChar,n.$i)),n.register(j.forwardEvent(n.Qi.onA11yTab,n.Ji)),n.register(n._t.onResize((function(t){return n.tn(t.cols,t.rows)}))),n}return e(i,t),Object.defineProperty(i.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this.Wi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this.ut.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this.Fi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this.Ki.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this.Hi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onFocus",{get:function(){return this.zi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBlur",{get:function(){return this.Gi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this.$i.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this.Ji.event},enumerable:!1,configurable:!0}),i.prototype.Zi=function(t){var i,n,s=this;this.nn&&(t.colors.forEach((function(t){var i=C.rgba.toColor(t.red,t.green,t.blue);s.nn.colors.ansi[t.colorIndex]=i})),null===(i=this.P)||void 0===i||i.setColors(this.nn.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this.nn.colors))},i.prototype.dispose=function(){var i,n,s;this.sn||(t.prototype.dispose.call(this),null===(i=this.P)||void 0===i||i.dispose(),this.en=void 0,this.write=function(){},null===(s=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===s||s.removeChild(this.element))},i.prototype.Vi=function(){t.prototype.Vi.call(this),this.en=void 0},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},i.prototype.rn=function(i){var n,s,e,r;switch(t.prototype.rn.call(this,i),i){case"fontFamily":case"fontSize":null===(n=this.P)||void 0===n||n.clear(),null===(s=this.hn)||void 0===s||s.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this.P&&(this.P.clear(),this.P.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this.P&&(this.P.setRenderer(this.un()),this.P.onResize(this.cols,this.rows));break;case"scrollback":null===(e=this.viewport)||void 0===e||e.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this.cn&&this.P&&(this.cn=new m.AccessibilityManager(this,this.P)):(null===(r=this.cn)||void 0===r||r.dispose(),this.cn=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this.fn(this.optionsService.options.theme)}},i.prototype.an=function(t){this.ln.decPrivateModes.sendFocus&&this.ln.triggerDataEvent(u.C0.ESC+"[I"),this.updateCursorStyle(t),this.element.classList.add("focus"),this.vn(),this.zi.fire()},i.prototype.blur=function(){var t;return null===(t=this.textarea)||void 0===t?void 0:t.blur()},i.prototype.dn=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.ln.decPrivateModes.sendFocus&&this.ln.triggerDataEvent(u.C0.ESC+"[O"),this.element.classList.remove("focus"),this.Gi.fire()},i.prototype.bn=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this.wn.isComposing){var t=Math.ceil(this.hn.height*this.optionsService.options.lineHeight),i=this._t.buffer.y*t,n=this._t.buffer.x*this.hn.width;this.textarea.style.left=n+"px",this.textarea.style.top=i+"px",this.textarea.style.width=this.hn.width+"px",this.textarea.style.height=t+"px",this.textarea.style.lineHeight=t+"px",this.textarea.style.zIndex="-5"}},i.prototype.gn=function(){var t=this;this.mn(),this.register(d.addDisposableDomListener(this.element,"copy",(function(i){t.hasSelection()&&o.copyHandler(i,t.ai)})));var i=function(i){return o.handlePasteEvent(i,t.textarea,t.ln)};this.register(d.addDisposableDomListener(this.textarea,"paste",i)),this.register(d.addDisposableDomListener(this.element,"paste",i)),v.isFirefox?this.register(d.addDisposableDomListener(this.element,"mousedown",(function(i){2===i.button&&o.rightClickHandler(i,t.textarea,t.screenElement,t.ai,t.options.rightClickSelectsWord)}))):this.register(d.addDisposableDomListener(this.element,"contextmenu",(function(i){o.rightClickHandler(i,t.textarea,t.screenElement,t.ai,t.options.rightClickSelectsWord)}))),v.isLinux&&this.register(d.addDisposableDomListener(this.element,"auxclick",(function(i){1===i.button&&o.moveTextAreaUnderMouseCursor(i,t.textarea,t.screenElement)})))},i.prototype.mn=function(){var t=this;this.register(d.addDisposableDomListener(this.textarea,"keyup",(function(i){return t.pn(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keydown",(function(i){return t.On(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keypress",(function(i){return t.jn(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"compositionstart",(function(){return t.wn.compositionstart()}))),this.register(d.addDisposableDomListener(this.textarea,"compositionupdate",(function(i){return t.wn.compositionupdate(i)}))),this.register(d.addDisposableDomListener(this.textarea,"compositionend",(function(){return t.wn.compositionend()}))),this.register(this.onRender((function(){return t.wn.updateCompositionElements()}))),this.register(this.onRender((function(i){return t.yn(i.start,i.end)})))},i.prototype.open=function(t){var i=this;if(!t)throw new Error("Terminal requires a parent element.");E.body.contains(t)||this.kt.debug("Terminal.open was called on an element that was not attached to the DOM"),this._n=t.ownerDocument,this.element=this._n.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","document"),t.appendChild(this.element);var n=E.createDocumentFragment();this.kn=E.createElement("div"),this.kn.classList.add("xterm-viewport"),n.appendChild(this.kn),this.Mn=E.createElement("div"),this.Mn.classList.add("xterm-scroll-area"),this.kn.appendChild(this.Mn),this.screenElement=E.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.qn=E.createElement("div"),this.qn.classList.add("xterm-helpers"),this.screenElement.appendChild(this.qn),n.appendChild(this.screenElement),this.textarea=E.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",b.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(d.addDisposableDomListener(this.textarea,"focus",(function(t){return i.an(t)}))),this.register(d.addDisposableDomListener(this.textarea,"blur",(function(){return i.dn()}))),this.qn.appendChild(this.textarea);var s=this.Yi.createInstance(S.CoreBrowserService,this.textarea);this.Yi.setService(M.ICoreBrowserService,s),this.hn=this.Yi.createInstance(q.CharSizeService,this._n,this.qn),this.Yi.setService(M.ICharSizeService,this.hn),this.xn=E.createElement("div"),this.xn.classList.add("composition-view"),this.wn=this.Yi.createInstance(r.CompositionHelper,this.textarea,this.xn),this.qn.appendChild(this.xn),this.element.appendChild(n),this.An=this.options.theme||this.An,this.nn=new _.ColorManager(E,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(t){return i.nn.onOptionsChange(t)}))),this.nn.setTheme(this.An);var e=this.un();this.P=this.register(this.Yi.createInstance(k.RenderService,e,this.rows,this.screenElement)),this.Yi.setService(M.IRenderService,this.P),this.register(this.P.onRenderedBufferChange((function(t){return i.Fi.fire(t)}))),this.onResize((function(t){return i.P.resize(t.cols,t.rows)})),this.Sn=this.Yi.createInstance(w.SoundService),this.Yi.setService(M.ISoundService,this.Sn),this.zt=this.Yi.createInstance(x.MouseService),this.Yi.setService(M.IMouseService,this.zt),this.viewport=this.Yi.createInstance(h.Viewport,(function(t,n){return i.scrollLines(t,n)}),this.kn,this.Mn),this.viewport.onThemeChange(this.nn.colors),this.register(this.Qi.onRequestSyncScrollBar((function(){return i.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){i.P.onCursorMove(),i.bn()}))),this.register(this.onResize((function(){return i.P.onResize(i.cols,i.rows)}))),this.register(this.onBlur((function(){return i.P.onBlur()}))),this.register(this.onFocus((function(){return i.P.onFocus()}))),this.register(this.P.onDimensionsChange((function(){return i.viewport.syncScrollArea()}))),this.ai=this.register(this.Yi.createInstance(l.SelectionService,this.element,this.screenElement)),this.Yi.setService(M.ISelectionService,this.ai),this.register(this.ai.onRequestScrollLines((function(t){return i.scrollLines(t.amount,t.suppressScrollEvent)}))),this.register(this.ai.onSelectionChange((function(){return i.Ki.fire()}))),this.register(this.ai.onRequestRedraw((function(t){return i.P.onSelectionChanged(t.start,t.end,t.columnSelectMode)}))),this.register(this.ai.onLinuxMouseSelection((function(t){i.textarea.value=t,i.textarea.focus(),i.textarea.select()}))),this.register(this.onScroll((function(){i.viewport.syncScrollArea(),i.ai.refresh()}))),this.register(d.addDisposableDomListener(this.kn,"scroll",(function(){return i.ai.refresh()}))),this.Tt=this.Yi.createInstance(g.MouseZoneManager,this.element,this.screenElement),this.register(this.Tt),this.register(this.onScroll((function(){return i.Tt.clearAll()}))),this.linkifier.attachToDom(this.element,this.Tt),this.linkifier2.attachToDom(this.element,this.zt,this.P),this.register(d.addDisposableDomListener(this.element,"mousedown",(function(t){return i.ai.onMouseDown(t)}))),this.Rn.areMouseEventsActive?(this.ai.disable(),this.element.classList.add("enable-mouse-events")):this.ai.enable(),this.options.screenReaderMode&&(this.cn=new m.AccessibilityManager(this,this.P)),this.hn.measure(),this.refresh(0,this.rows-1),this.gn(),this.bindMouse()},i.prototype.un=function(){switch(this.options.rendererType){case"canvas":return this.Yi.createInstance(f.Renderer,this.nn.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this.Yi.createInstance(p.DomRenderer,this.nn.colors,this.element,this.screenElement,this.kn,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},i.prototype.fn=function(t){var i,n,s;this.An=t,null===(i=this.nn)||void 0===i||i.setTheme(t),null===(n=this.P)||void 0===n||n.setColors(this.nn.colors),null===(s=this.viewport)||void 0===s||s.onThemeChange(this.nn.colors)},i.prototype.bindMouse=function(){var t=this,i=this,n=this.element;function s(t){var n,s,e=i.zt.getRawByteCoords(t,i.screenElement,i.cols,i.rows);if(!e)return!1;switch(t.overrideType||t.type){case"mousemove":s=32,void 0===t.buttons?(n=3,void 0!==t.button&&(n=t.button<3?t.button:3)):n=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":s=0,n=t.button<3?t.button:3;break;case"mousedown":s=1,n=t.button<3?t.button:3;break;case"wheel":0!==t.deltaY&&(s=t.deltaY<0?0:1),n=4;break;default:return!1}return!(void 0===s||void 0===n||n>4)&&i.Rn.triggerMouseEvent({col:e.x-33,row:e.y-33,button:n,action:s,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}var e={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r=function(i){return s(i),i.buttons||(t._n.removeEventListener("mouseup",e.mouseup),e.mousedrag&&t._n.removeEventListener("mousemove",e.mousedrag)),t.cancel(i)},h=function(i){return s(i),i.preventDefault(),t.cancel(i)},o=function(t){t.buttons&&s(t)},c=function(t){t.buttons||s(t)};this.register(this.Rn.onProtocolChange((function(i){i?("debug"===t.optionsService.options.logLevel&&t.kt.debug("Binding to mouse events:",t.Rn.explainEvents(i)),t.element.classList.add("enable-mouse-events"),t.ai.disable()):(t.kt.debug("Unbinding from mouse events."),t.element.classList.remove("enable-mouse-events"),t.ai.enable()),8&i?e.mousemove||(n.addEventListener("mousemove",c),e.mousemove=c):(n.removeEventListener("mousemove",e.mousemove),e.mousemove=null),16&i?e.wheel||(n.addEventListener("wheel",h,{passive:!1}),e.wheel=h):(n.removeEventListener("wheel",e.wheel),e.wheel=null),2&i?e.mouseup||(e.mouseup=r):(t._n.removeEventListener("mouseup",e.mouseup),e.mouseup=null),4&i?e.mousedrag||(e.mousedrag=o):(t._n.removeEventListener("mousemove",e.mousedrag),e.mousedrag=null)}))),this.Rn.activeProtocol=this.Rn.activeProtocol,this.register(d.addDisposableDomListener(n,"mousedown",(function(i){if(i.preventDefault(),t.focus(),t.Rn.areMouseEventsActive&&!t.ai.shouldForceSelection(i))return s(i),e.mouseup&&t._n.addEventListener("mouseup",e.mouseup),e.mousedrag&&t._n.addEventListener("mousemove",e.mousedrag),t.cancel(i)}))),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(e.wheel);else if(!t.buffer.hasScrollback){var n=t.viewport.getLinesScrolled(i);if(0===n)return;for(var s=u.C0.ESC+(t.ln.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B"),r="",h=0;h<Math.abs(n);h++)r+=s;t.ln.triggerDataEvent(r,!0)}}),{passive:!0})),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(!e.wheel)return t.viewport.onWheel(i)?void 0:t.cancel(i)}),{passive:!1})),this.register(d.addDisposableDomListener(n,"touchstart",(function(i){if(!t.Rn.areMouseEventsActive)return t.viewport.onTouchStart(i),t.cancel(i)}),{passive:!0})),this.register(d.addDisposableDomListener(n,"touchmove",(function(i){if(!t.Rn.areMouseEventsActive)return t.viewport.onTouchMove(i)?void 0:t.cancel(i)}),{passive:!1}))},i.prototype.refresh=function(t,i){var n;null===(n=this.P)||void 0===n||n.refreshRows(t,i)},i.prototype.yn=function(t,i){var n;null===(n=this.linkifier)||void 0===n||n.linkifyRows(t,i)},i.prototype.updateCursorStyle=function(t){this.ai&&this.ai.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},i.prototype.vn=function(){this.ln.isCursorInitialized||(this.ln.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},i.prototype.scrollLines=function(i,n){t.prototype.scrollLines.call(this,i,n),this.refresh(0,this.rows-1)},i.prototype.paste=function(t){o.paste(t,this.textarea,this.ln)},i.prototype.attachCustomKeyEventHandler=function(t){this.en=t},i.prototype.registerLinkMatcher=function(t,i,n){var s=this.linkifier.registerLinkMatcher(t,i,n);return this.refresh(0,this.rows-1),s},i.prototype.deregisterLinkMatcher=function(t){this.linkifier.deregisterLinkMatcher(t)&&this.refresh(0,this.rows-1)},i.prototype.registerLinkProvider=function(t){return this.linkifier2.registerLinkProvider(t)},i.prototype.registerCharacterJoiner=function(t){var i=this.P.registerCharacterJoiner(t);return this.refresh(0,this.rows-1),i},i.prototype.deregisterCharacterJoiner=function(t){this.P.deregisterCharacterJoiner(t)&&this.refresh(0,this.rows-1)},Object.defineProperty(i.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),i.prototype.addMarker=function(t){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)},i.prototype.hasSelection=function(){return!!this.ai&&this.ai.hasSelection},i.prototype.select=function(t,i,n){this.ai.setSelection(t,i,n)},i.prototype.getSelection=function(){return this.ai?this.ai.selectionText:""},i.prototype.getSelectionPosition=function(){if(this.ai&&this.ai.hasSelection)return{startColumn:this.ai.selectionStart[0],startRow:this.ai.selectionStart[1],endColumn:this.ai.selectionEnd[0],endRow:this.ai.selectionEnd[1]}},i.prototype.clearSelection=function(){var t;null===(t=this.ai)||void 0===t||t.clearSelection()},i.prototype.selectAll=function(){var t;null===(t=this.ai)||void 0===t||t.selectAll()},i.prototype.selectLines=function(t,i){var n;null===(n=this.ai)||void 0===n||n.selectLines(t,i)},i.prototype.On=function(t){if(this.Li=!1,this.en&&!1===this.en(t))return!1;if(!this.wn.keydown(t))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var i=O.evaluateKeyboardEvent(t,this.ln.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),3===i.type||2===i.type){var n=this.rows-1;return this.scrollLines(2===i.type?-n:n),this.cancel(t,!0)}return 1===i.type&&this.selectAll(),!!this.Cn(this.browser,t)||(i.cancel&&this.cancel(t,!0),!i.key||(i.key!==u.C0.ETX&&i.key!==u.C0.CR||(this.textarea.value=""),this.ut.fire({key:i.key,domEvent:t}),this.vn(),this.ln.triggerDataEvent(i.key,!0),this.optionsService.options.screenReaderMode?void(this.Li=!0):this.cancel(t,!0)))},i.prototype.Cn=function(t,i){var n=t.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||t.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey;return"keypress"===i.type?n:n&&(!i.keyCode||i.keyCode>47)},i.prototype.pn=function(t){this.en&&!1===this.en(t)||(function(t){return 16===t.keyCode||17===t.keyCode||18===t.keyCode}(t)||this.focus(),this.updateCursorStyle(t))},i.prototype.jn=function(t){var i;if(this.Li)return!1;if(this.en&&!1===this.en(t))return!1;if(this.cancel(t),t.charCode)i=t.charCode;else if(null===t.which||void 0===t.which)i=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;i=t.which}return!(!i||(t.altKey||t.ctrlKey||t.metaKey)&&!this.Cn(this.browser,t)||(i=String.fromCharCode(i),this.ut.fire({key:i,domEvent:t}),this.vn(),this.ln.triggerDataEvent(i,!0),0))},i.prototype.bell=function(){this.En()&&this.Sn.playBellSound()},i.prototype.resize=function(i,n){i!==this.cols||n!==this.rows?t.prototype.resize.call(this,i,n):this.hn&&!this.hn.hasValidSize&&this.hn.measure()},i.prototype.tn=function(t,i){var n,s;null===(n=this.hn)||void 0===n||n.measure(),null===(s=this.viewport)||void 0===s||s.syncScrollArea(!0)},i.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(y.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this.Tn.fire(this.buffer.ydisp)}},i.prototype.reset=function(){var i,n;this.options.rows=this.rows,this.options.cols=this.cols;var s=this.en;this.Vi(),t.prototype.reset.call(this),null===(i=this.ai)||void 0===i||i.reset(),this.en=s,this.refresh(0,this.rows-1),null===(n=this.viewport)||void 0===n||n.syncScrollArea()},i.prototype.Xi=function(t){if(this.P)switch(t){case c.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var i=this.P.dimensions.scaledCanvasWidth.toFixed(0),n=this.P.dimensions.scaledCanvasHeight.toFixed(0);this.ln.triggerDataEvent(u.C0.ESC+"[4;"+n+";"+i+"t");break;case c.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var s=this.P.dimensions.scaledCellWidth.toFixed(0),e=this.P.dimensions.scaledCellHeight.toFixed(0);this.ln.triggerDataEvent(u.C0.ESC+"[6;"+e+";"+s+"t")}},i.prototype.cancel=function(t,i){if(this.options.cancelEvents||i)return t.preventDefault(),t.stopPropagation(),!1},i.prototype.In=function(){return!1},i.prototype.En=function(){return"sound"===this.options.bellStyle},i}(R.CoreTerminal);i.Terminal=T},1680:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.Viewport=void 0;var o=n(844),u=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,s,e,r,h,o){var c=t.call(this)||this;return c.Un=i,c.kn=n,c.Bn=s,c._t=e,c.li=r,c.hn=h,c.P=o,c.scrollBarWidth=0,c.Pn=0,c.Nn=0,c.Dn=0,c.Ln=0,c.Wn=0,c.Fn=0,c.Kn=0,c.Hn=null,c.zn=!1,c.scrollBarWidth=c.kn.offsetWidth-c.Bn.offsetWidth||15,c.register(u.addDisposableDomListener(c.kn,"scroll",c.Tn.bind(c))),setTimeout((function(){return c.syncScrollArea()}),0),c}return e(i,t),i.prototype.onThemeChange=function(t){this.kn.style.backgroundColor=t.background.css},i.prototype.Gn=function(t){var i=this;if(t)return this.Ii(),void(null!==this.Hn&&cancelAnimationFrame(this.Hn));null===this.Hn&&(this.Hn=requestAnimationFrame((function(){return i.Ii()})))},i.prototype.Ii=function(){if(this.hn.height>0){this.Pn=this.P.dimensions.scaledCellHeight/window.devicePixelRatio,this.Dn=this.kn.offsetHeight;var t=Math.round(this.Pn*this.Nn)+(this.Dn-this.P.dimensions.canvasHeight);this.Ln!==t&&(this.Ln=t,this.Bn.style.height=this.Ln+"px")}var i=this._t.buffer.ydisp*this.Pn;this.kn.scrollTop!==i&&(this.zn=!0,this.kn.scrollTop=i),this.Hn=null},i.prototype.syncScrollArea=function(t){if(void 0===t&&(t=!1),this.Nn!==this._t.buffer.lines.length)return this.Nn=this._t.buffer.lines.length,void this.Gn(t);if(this.Dn===this.P.dimensions.canvasHeight){var i=this._t.buffer.ydisp*this.Pn;this.Fn===i&&this.Fn===this.kn.scrollTop&&this.P.dimensions.scaledCellHeight/window.devicePixelRatio===this.Pn||this.Gn(t)}else this.Gn(t)},i.prototype.Tn=function(t){if(this.Fn=this.kn.scrollTop,this.kn.offsetParent)if(this.zn)this.zn=!1;else{var i=Math.round(this.Fn/this.Pn)-this._t.buffer.ydisp;this.Un(i,!0)}},i.prototype.$n=function(t,i){var n=this.kn.scrollTop+this.Dn;return!(i<0&&0!==this.kn.scrollTop||i>0&&n<this.Ln)||(t.cancelable&&t.preventDefault(),!1)},i.prototype.onWheel=function(t){var i=this.Jn(t);return 0!==i&&(this.kn.scrollTop+=i,this.$n(t,i))},i.prototype.Jn=function(t){if(0===t.deltaY)return 0;var i=this.Vn(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this.Pn:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this.Pn*this._t.rows),i},i.prototype.getLinesScrolled=function(t){if(0===t.deltaY)return 0;var i=this.Vn(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this.Pn+0,this.Kn+=i,i=Math.floor(Math.abs(this.Kn))*(this.Kn>0?1:-1),this.Kn%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._t.rows),i},i.prototype.Vn=function(t,i){var n=this.li.options.fastScrollModifier;return"alt"===n&&i.altKey||"ctrl"===n&&i.ctrlKey||"shift"===n&&i.shiftKey?t*this.li.options.fastScrollSensitivity*this.li.options.scrollSensitivity:t*this.li.options.scrollSensitivity},i.prototype.onTouchStart=function(t){this.Wn=t.touches[0].pageY},i.prototype.onTouchMove=function(t){var i=this.Wn-t.touches[0].pageY;return this.Wn=t.touches[0].pageY,0!==i&&(this.kn.scrollTop+=i,this.$n(t,i))},r([h(3,f.IBufferService),h(4,f.IOptionsService),h(5,c.ICharSizeService),h(6,c.IRenderService)],i)}(o.Disposable);i.Viewport=a},2950:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.CompositionHelper=void 0;var r=n(4725),h=n(2585),o=function(){function t(t,i,n,s,e,r){this.Yn=t,this.xn=i,this._t=n,this.li=s,this.hn=e,this.ln=r,this.Qn=!1,this.Xn=!1,this.Zn={start:0,end:0},this.ts=""}return Object.defineProperty(t.prototype,"isComposing",{get:function(){return this.Qn},enumerable:!1,configurable:!0}),t.prototype.compositionstart=function(){this.Qn=!0,this.Zn.start=this.Yn.value.length,this.xn.textContent="",this.ts="",this.xn.classList.add("active")},t.prototype.compositionupdate=function(t){var i=this;this.xn.textContent=t.data,this.updateCompositionElements(),setTimeout((function(){i.Zn.end=i.Yn.value.length}),0)},t.prototype.compositionend=function(){this.ns(!0)},t.prototype.keydown=function(t){if(this.Qn||this.Xn){if(229===t.keyCode)return!1;if(16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this.ns(!1)}return 229!==t.keyCode||(this.ss(),!1)},t.prototype.ns=function(t){var i=this;if(this.xn.classList.remove("active"),this.Qn=!1,t){var n={start:this.Zn.start,end:this.Zn.end};this.Xn=!0,setTimeout((function(){var t;i.Xn&&(i.Xn=!1,n.start+=i.ts.length,(t=i.Qn?i.Yn.value.substring(n.start,n.end):i.Yn.value.substring(n.start)).length>0&&i.ln.triggerDataEvent(t,!0))}),0)}else{this.Xn=!1;var s=this.Yn.value.substring(this.Zn.start,this.Zn.end);this.ln.triggerDataEvent(s,!0)}},t.prototype.ss=function(){var t=this,i=this.Yn.value;setTimeout((function(){if(!t.Qn){var n=t.Yn.value.replace(i,"");n.length>0&&(t.ts=n,t.ln.triggerDataEvent(n,!0))}}),0)},t.prototype.updateCompositionElements=function(t){var i=this;if(this.Qn){if(this._t.buffer.isCursorInViewport){var n=Math.ceil(this.hn.height*this.li.options.lineHeight),s=this._t.buffer.y*n,e=this._t.buffer.x*this.hn.width;this.xn.style.left=e+"px",this.xn.style.top=s+"px",this.xn.style.height=n+"px",this.xn.style.lineHeight=n+"px",this.xn.style.fontFamily=this.li.options.fontFamily,this.xn.style.fontSize=this.li.options.fontSize+"px";var r=this.xn.getBoundingClientRect();this.Yn.style.left=e+"px",this.Yn.style.top=s+"px",this.Yn.style.width=r.width+"px",this.Yn.style.height=r.height+"px",this.Yn.style.lineHeight=r.height+"px"}t||setTimeout((function(){return i.updateCompositionElements(!0)}),0)}},s([e(2,h.IBufferService),e(3,h.IOptionsService),e(4,r.ICharSizeService),e(5,h.ICoreService)],t)}();i.CompositionHelper=o},9806:(t,i)=>{function n(t,i){var n=i.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]}Object.defineProperty(i,"I",{value:!0}),i.getRawByteCoords=i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(t,i,s,e,r,h,o,u){if(r){var c=n(t,i);if(c)return c[0]=Math.ceil((c[0]+(u?h/2:0))/h),c[1]=Math.ceil(c[1]/o),c[0]=Math.min(Math.max(c[0],1),s+(u?1:0)),c[1]=Math.min(Math.max(c[1],1),e),c}},i.getRawByteCoords=function(t){if(t)return{x:t[0]+32,y:t[1]+32}}},9504:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.moveToCellSequence=void 0;var s=n(2584);function e(t,i,n,s){var e=t-r(n,t),o=i-r(n,i);return c(Math.abs(e-o)-function(t,i,n){for(var s=0,e=t-r(n,t),o=i-r(n,i),u=0;u<Math.abs(e-o);u++){var c="A"===h(t,i)?-1:1,f=n.buffer.lines.get(e+c*u);f&&f.isWrapped&&s++}return s}(t,i,n),u(h(t,i),s))}function r(t,i){for(var n=0,s=t.buffer.lines.get(i),e=s&&s.isWrapped;e&&i>=0&&i<t.rows;)n++,e=(s=t.buffer.lines.get(--i))&&s.isWrapped;return n}function h(t,i){return t>i?"A":"B"}function o(t,i,n,s,e,r){for(var h=t,o=i,u="";h!==n||o!==s;)h+=e?1:-1,e&&h>r.cols-1?(u+=r.buffer.translateBufferLineToString(o,!1,t,h),h=0,t=0,o++):!e&&h<0&&(u+=r.buffer.translateBufferLineToString(o,!1,0,t+1),t=h=r.cols-1,o--);return u+r.buffer.translateBufferLineToString(o,!1,t,h)}function u(t,i){var n=i?"O":"[";return s.C0.ESC+n+t}function c(t,i){t=Math.floor(t);for(var n="",s=0;s<t;s++)n+=i;return n}i.moveToCellSequence=function(t,i,n,s){var h,f=n.buffer.x,a=n.buffer.y;if(!n.buffer.hasScrollback)return function(t,i,n,s,h,f){return 0===e(i,s,h,f).length?"":c(o(t,i,t,i-r(h,i),!1,h).length,u("D",f))}(f,a,0,i,n,s)+e(a,i,n,s)+function(t,i,n,s,h,f){var a;a=e(i,s,h,f).length>0?s-r(h,s):i;var l=s,v=function(t,i,n,s,h,o){var u;return u=e(n,s,h,o).length>0?s-r(h,s):i,t<n&&u<=s||t>=n&&u<s?"C":"D"}(t,i,n,s,h,f);return c(o(t,a,n,l,"C"===v,h).length,u(v,f))}(f,a,t,i,n,s);if(a===i)return h=f>t?"D":"C",c(Math.abs(f-t),u(h,s));h=a>i?"D":"C";var l=Math.abs(a-i);return c(function(t,i){return i.cols-t}(a>i?t:f,n)+(l-1)*n.cols+1+((a>i?f:t)-1),u(h,s))}},244:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.AddonManager=void 0;var n=function(){function t(){this.es=[]}return t.prototype.dispose=function(){for(var t=this.es.length-1;t>=0;t--)this.es[t].instance.dispose()},t.prototype.loadAddon=function(t,i){var n=this,s={instance:i,dispose:i.dispose,isDisposed:!1};this.es.push(s),i.dispose=function(){return n.rs(s)},i.activate(t)},t.prototype.rs=function(t){if(!t.isDisposed){for(var i=-1,n=0;n<this.es.length;n++)if(this.es[n]===t){i=n;break}if(-1===i)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this.es.splice(i,1)}},t}();i.AddonManager=n},4389:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.Terminal=void 0;var s=n(511),e=n(3236),r=n(9042),h=n(8460),o=n(244),u=function(){function t(t){this.hs=new e.Terminal(t),this.os=new o.AddonManager}return t.prototype.us=function(){if(!this.hs.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this.hs.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this.hs.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this.hs.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this.hs.onData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this.hs.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this.hs.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this.hs.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this.hs.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this.hs.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this.hs.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.hs.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this.us(),this.cs||(this.cs=new l(this.hs)),this.cs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unicode",{get:function(){return this.us(),new v(this.hs)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textarea",{get:function(){return this.hs.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.hs.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.hs.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.us(),this.fs||(this.fs=new f(this.hs)),this.fs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markers",{get:function(){return this.us(),this.hs.markers},enumerable:!1,configurable:!0}),t.prototype.blur=function(){this.hs.blur()},t.prototype.focus=function(){this.hs.focus()},t.prototype.resize=function(t,i){this.ls(t,i),this.hs.resize(t,i)},t.prototype.open=function(t){this.hs.open(t)},t.prototype.attachCustomKeyEventHandler=function(t){this.hs.attachCustomKeyEventHandler(t)},t.prototype.registerLinkMatcher=function(t,i,n){return this.us(),this.hs.registerLinkMatcher(t,i,n)},t.prototype.deregisterLinkMatcher=function(t){this.us(),this.hs.deregisterLinkMatcher(t)},t.prototype.registerLinkProvider=function(t){return this.us(),this.hs.registerLinkProvider(t)},t.prototype.registerCharacterJoiner=function(t){return this.us(),this.hs.registerCharacterJoiner(t)},t.prototype.deregisterCharacterJoiner=function(t){this.us(),this.hs.deregisterCharacterJoiner(t)},t.prototype.registerMarker=function(t){return this.us(),this.ls(t),this.hs.addMarker(t)},t.prototype.addMarker=function(t){return this.registerMarker(t)},t.prototype.hasSelection=function(){return this.hs.hasSelection()},t.prototype.select=function(t,i,n){this.ls(t,i,n),this.hs.select(t,i,n)},t.prototype.getSelection=function(){return this.hs.getSelection()},t.prototype.getSelectionPosition=function(){return this.hs.getSelectionPosition()},t.prototype.clearSelection=function(){this.hs.clearSelection()},t.prototype.selectAll=function(){this.hs.selectAll()},t.prototype.selectLines=function(t,i){this.ls(t,i),this.hs.selectLines(t,i)},t.prototype.dispose=function(){this.os.dispose(),this.hs.dispose()},t.prototype.scrollLines=function(t){this.ls(t),this.hs.scrollLines(t)},t.prototype.scrollPages=function(t){this.ls(t),this.hs.scrollPages(t)},t.prototype.scrollToTop=function(){this.hs.scrollToTop()},t.prototype.scrollToBottom=function(){this.hs.scrollToBottom()},t.prototype.scrollToLine=function(t){this.ls(t),this.hs.scrollToLine(t)},t.prototype.clear=function(){this.hs.clear()},t.prototype.write=function(t,i){this.hs.write(t,i)},t.prototype.writeUtf8=function(t,i){this.hs.write(t,i)},t.prototype.writeln=function(t,i){this.hs.write(t),this.hs.write("\r\n",i)},t.prototype.paste=function(t){this.hs.paste(t)},t.prototype.getOption=function(t){return this.hs.optionsService.getOption(t)},t.prototype.setOption=function(t,i){this.hs.optionsService.setOption(t,i)},t.prototype.refresh=function(t,i){this.ls(t,i),this.hs.refresh(t,i)},t.prototype.reset=function(){this.hs.reset()},t.prototype.loadAddon=function(t){return this.os.loadAddon(this,t)},Object.defineProperty(t,"strings",{get:function(){return r},enumerable:!1,configurable:!0}),t.prototype.ls=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=0,s=t;n<s.length;n++){var e=s[n];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},t}();i.Terminal=u;var c=function(){function t(t,i){this.fs=t,this.type=i}return t.prototype.init=function(t){return this.fs=t,this},Object.defineProperty(t.prototype,"cursorY",{get:function(){return this.fs.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorX",{get:function(){return this.fs.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.fs.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseY",{get:function(){return this.fs.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.fs.lines.length},enumerable:!1,configurable:!0}),t.prototype.getLine=function(t){var i=this.fs.lines.get(t);if(i)return new a(i)},t.prototype.getNullCell=function(){return new s.CellData},t}(),f=function(){function t(t){var i=this;this.hs=t,this.vs=new h.EventEmitter,this.ds=new c(this.hs.buffers.normal,"normal"),this.bs=new c(this.hs.buffers.alt,"alternate"),this.hs.buffers.onBufferActivate((function(){return i.vs.fire(i.active)}))}return Object.defineProperty(t.prototype,"onBufferChange",{get:function(){return this.vs.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){if(this.hs.buffers.active===this.hs.buffers.normal)return this.normal;if(this.hs.buffers.active===this.hs.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this.ds.init(this.hs.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alternate",{get:function(){return this.bs.init(this.hs.buffers.alt)},enumerable:!1,configurable:!0}),t}(),a=function(){function t(t){this.ws=t}return Object.defineProperty(t.prototype,"isWrapped",{get:function(){return this.ws.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.ws.length},enumerable:!1,configurable:!0}),t.prototype.getCell=function(t,i){if(!(t<0||t>=this.ws.length))return i?(this.ws.loadCell(t,i),i):this.ws.loadCell(t,new s.CellData)},t.prototype.translateToString=function(t,i,n){return this.ws.translateToString(t,i,n)},t}(),l=function(){function t(t){this.hs=t}return t.prototype.registerCsiHandler=function(t,i){return this.hs.addCsiHandler(t,(function(t){return i(t.toArray())}))},t.prototype.addCsiHandler=function(t,i){return this.registerCsiHandler(t,i)},t.prototype.registerDcsHandler=function(t,i){return this.hs.addDcsHandler(t,(function(t,n){return i(t,n.toArray())}))},t.prototype.addDcsHandler=function(t,i){return this.registerDcsHandler(t,i)},t.prototype.registerEscHandler=function(t,i){return this.hs.addEscHandler(t,i)},t.prototype.addEscHandler=function(t,i){return this.registerEscHandler(t,i)},t.prototype.registerOscHandler=function(t,i){return this.hs.addOscHandler(t,i)},t.prototype.addOscHandler=function(t,i){return this.registerOscHandler(t,i)},t}(),v=function(){function t(t){this.hs=t}return t.prototype.register=function(t){this.hs.unicodeService.register(t)},Object.defineProperty(t.prototype,"versions",{get:function(){return this.hs.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this.hs.unicodeService.activeVersion},set:function(t){this.hs.unicodeService.activeVersion=t},enumerable:!1,configurable:!0}),t}()},1546:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.BaseRenderLayer=void 0;var s=n(643),e=n(8803),r=n(1420),h=n(3734),o=n(1752),u=n(4774),c=n(9631),f=function(){function t(t,i,n,s,e,r,h,o){this.gs=t,this.ps=s,this.Os=e,this.js=r,this._t=h,this.li=o,this.ys=0,this._s=0,this.ks=0,this.Ms=0,this.qs=0,this.xs=0,this.As={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this.Ss=document.createElement("canvas"),this.Ss.classList.add("xterm-"+i+"-layer"),this.Ss.style.zIndex=n.toString(),this.Rs(),this.gs.appendChild(this.Ss)}return t.prototype.dispose=function(){var t;c.removeElementFromParent(this.Ss),null===(t=this.Cs)||void 0===t||t.dispose()},t.prototype.Rs=function(){this.bt=o.throwIfFalsy(this.Ss.getContext("2d",{alpha:this.ps})),this.ps||this.Es()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(t,i){},t.prototype.onSelectionChanged=function(t,i,n){void 0===n&&(n=!1)},t.prototype.setColors=function(t){this.Ts(t)},t.prototype.Is=function(t){if(t!==this.ps){var i=this.Ss;this.ps=t,this.Ss=this.Ss.cloneNode(),this.Rs(),this.gs.replaceChild(this.Ss,i),this.Ts(this.Os),this.onGridChanged(0,this._t.rows-1)}},t.prototype.Ts=function(t){this.ys<=0&&this._s<=0||(this.Cs=r.acquireCharAtlas(this.li.options,this.js,t,this.ys,this._s),this.Cs.warmUp())},t.prototype.resize=function(t){this.ks=t.scaledCellWidth,this.Ms=t.scaledCellHeight,this.ys=t.scaledCharWidth,this._s=t.scaledCharHeight,this.qs=t.scaledCharLeft,this.xs=t.scaledCharTop,this.Ss.width=t.scaledCanvasWidth,this.Ss.height=t.scaledCanvasHeight,this.Ss.style.width=t.canvasWidth+"px",this.Ss.style.height=t.canvasHeight+"px",this.ps||this.Es(),this.Ts(this.Os)},t.prototype.Us=function(t,i,n,s){this.bt.fillRect(t*this.ks,i*this.Ms,n*this.ks,s*this.Ms)},t.prototype.Bs=function(t,i,n){void 0===n&&(n=1),this.bt.fillRect(t*this.ks,(i+1)*this.Ms-window.devicePixelRatio-1,n*this.ks,window.devicePixelRatio)},t.prototype.Ps=function(t,i,n){this.bt.fillRect(t*this.ks,i*this.Ms,window.devicePixelRatio*n,this.Ms)},t.prototype.Ns=function(t,i,n,s){this.bt.lineWidth=window.devicePixelRatio,this.bt.strokeRect(t*this.ks+window.devicePixelRatio/2,i*this.Ms+window.devicePixelRatio/2,n*this.ks-window.devicePixelRatio,s*this.Ms-window.devicePixelRatio)},t.prototype.Es=function(){this.ps?this.bt.clearRect(0,0,this.Ss.width,this.Ss.height):(this.bt.fillStyle=this.Os.background.css,this.bt.fillRect(0,0,this.Ss.width,this.Ss.height))},t.prototype.Ds=function(t,i,n,s){this.ps?this.bt.clearRect(t*this.ks,i*this.Ms,n*this.ks,s*this.Ms):(this.bt.fillStyle=this.Os.background.css,this.bt.fillRect(t*this.ks,i*this.Ms,n*this.ks,s*this.Ms))},t.prototype.Ls=function(t,i,n){this.bt.font=this.Ws(!1,!1),this.bt.textBaseline="middle",this.Fs(n),this.bt.fillText(t.getChars(),i*this.ks+this.qs,n*this.Ms+this.xs+this._s/2)},t.prototype.Ks=function(t,i,n){var r,h,o=this.Hs(t);o||t.isFgRGB()||t.isBgRGB()?this.zs(t,i,n,o):(t.isInverse()?(r=t.isBgDefault()?e.INVERTED_DEFAULT_COLOR:t.getBgColor(),h=t.isFgDefault()?e.INVERTED_DEFAULT_COLOR:t.getFgColor()):(h=t.isBgDefault()?s.DEFAULT_COLOR:t.getBgColor(),r=t.isFgDefault()?s.DEFAULT_COLOR:t.getFgColor()),r+=this.li.options.drawBoldTextInBrightColors&&t.isBold()&&r<8?8:0,this.As.chars=t.getChars()||s.WHITESPACE_CELL_CHAR,this.As.code=t.getCode()||s.WHITESPACE_CELL_CODE,this.As.bg=h,this.As.fg=r,this.As.bold=!!t.isBold(),this.As.dim=!!t.isDim(),this.As.italic=!!t.isItalic(),this.Cs&&this.Cs.draw(this.bt,this.As,i*this.ks+this.qs,n*this.Ms+this.xs)||this.zs(t,i,n))},t.prototype.zs=function(t,i,n,s){if(this.bt.save(),this.bt.font=this.Ws(!!t.isBold(),!!t.isItalic()),this.bt.textBaseline="middle",t.isInverse())if(s)this.bt.fillStyle=s.css;else if(t.isBgDefault())this.bt.fillStyle=u.color.opaque(this.Os.background).css;else if(t.isBgRGB())this.bt.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var r=t.getBgColor();this.li.options.drawBoldTextInBrightColors&&t.isBold()&&r<8&&(r+=8),this.bt.fillStyle=this.Os.ansi[r].css}else if(s)this.bt.fillStyle=s.css;else if(t.isFgDefault())this.bt.fillStyle=this.Os.foreground.css;else if(t.isFgRGB())this.bt.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var o=t.getFgColor();this.li.options.drawBoldTextInBrightColors&&t.isBold()&&o<8&&(o+=8),this.bt.fillStyle=this.Os.ansi[o].css}this.Fs(n),t.isDim()&&(this.bt.globalAlpha=e.DIM_OPACITY),this.bt.fillText(t.getChars(),i*this.ks+this.qs,n*this.Ms+this.xs+this._s/2),this.bt.restore()},t.prototype.Fs=function(t){this.bt.beginPath(),this.bt.rect(0,t*this.Ms,this._t.cols*this.ks,this.Ms),this.bt.clip()},t.prototype.Ws=function(t,i){return(i?"italic":"")+" "+(t?this.li.options.fontWeightBold:this.li.options.fontWeight)+" "+this.li.options.fontSize*window.devicePixelRatio+"px "+this.li.options.fontFamily},t.prototype.Hs=function(t){if(1!==this.li.options.minimumContrastRatio){var i=this.Os.contrastCache.getColor(t.bg,t.fg);if(void 0!==i)return i||void 0;var n=t.getFgColor(),s=t.getFgColorMode(),e=t.getBgColor(),r=t.getBgColorMode(),h=!!t.isInverse(),o=!!t.isInverse();if(h){var c=n;n=e,e=c;var f=s;s=r,r=f}var a=this.Gs(r,e,h),l=this.$s(s,n,h,o),v=u.rgba.ensureContrastRatio(a,l,this.li.options.minimumContrastRatio);if(v){var d={css:u.channels.toCss(v>>24&255,v>>16&255,v>>8&255),rgba:v};return this.Os.contrastCache.setColor(t.bg,t.fg,d),d}this.Os.contrastCache.setColor(t.bg,t.fg,null)}},t.prototype.Gs=function(t,i,n){switch(t){case 16777216:case 33554432:return this.Os.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this.Os.foreground.rgba:this.Os.background.rgba}},t.prototype.$s=function(t,i,n,s){switch(t){case 16777216:case 33554432:return this.li.options.drawBoldTextInBrightColors&&s&&i<8&&(i+=8),this.Os.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this.Os.background.rgba:this.Os.foreground.rgba}},t}();i.BaseRenderLayer=f},5879:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.CharacterJoinerRegistry=i.JoinedCellData=void 0;var r=n(3734),h=n(643),o=n(511),u=function(t){function i(i,n,s){var e=t.call(this)||this;return e.content=0,e.combinedData="",e.fg=i.fg,e.bg=i.bg,e.combinedData=n,e.Js=s,e}return e(i,t),i.prototype.isCombined=function(){return 2097152},i.prototype.getWidth=function(){return this.Js},i.prototype.getChars=function(){return this.combinedData},i.prototype.getCode=function(){return 2097151},i.prototype.setFromCharData=function(t){throw new Error("not implemented")},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(r.AttributeData);i.JoinedCellData=u;var c=function(){function t(t){this._t=t,this.Vs=[],this.Ys=0,this.Qs=new o.CellData}return t.prototype.registerCharacterJoiner=function(t){var i={id:this.Ys++,handler:t};return this.Vs.push(i),i.id},t.prototype.deregisterCharacterJoiner=function(t){for(var i=0;i<this.Vs.length;i++)if(this.Vs[i].id===t)return this.Vs.splice(i,1),!0;return!1},t.prototype.getJoinedCharacters=function(t){if(0===this.Vs.length)return[];var i=this._t.buffer.lines.get(t);if(!i||0===i.length)return[];for(var n=[],s=i.translateToString(!0),e=0,r=0,o=0,u=i.getFg(0),c=i.getBg(0),f=0;f<i.getTrimmedLength();f++)if(i.loadCell(f,this.Qs),0!==this.Qs.getWidth()){if(this.Qs.fg!==u||this.Qs.bg!==c){if(f-e>1)for(var a=this.Xs(s,o,r,i,e),l=0;l<a.length;l++)n.push(a[l]);e=f,o=r,u=this.Qs.fg,c=this.Qs.bg}r+=this.Qs.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._t.cols-e>1)for(a=this.Xs(s,o,r,i,e),l=0;l<a.length;l++)n.push(a[l]);return n},t.prototype.Xs=function(i,n,s,e,r){for(var h=i.substring(n,s),o=this.Vs[0].handler(h),u=1;u<this.Vs.length;u++)for(var c=this.Vs[u].handler(h),f=0;f<c.length;f++)t.Zs(o,c[f]);return this.te(o,e,r),o},t.prototype.te=function(t,i,n){var s=0,e=!1,r=0,o=t[s];if(o){for(var u=n;u<this._t.cols;u++){var c=i.getWidth(u),f=i.getString(u).length||h.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!e&&o[0]<=r&&(o[0]=u,e=!0),o[1]<=r){if(o[1]=u,!(o=t[++s]))break;o[0]<=r?(o[0]=u,e=!0):e=!1}r+=f}}o&&(o[1]=this._t.cols)}},t.Zs=function(t,i){for(var n=!1,s=0;s<t.length;s++){var e=t[s];if(n){if(i[1]<=e[0])return t[s-1][1]=i[1],t;if(i[1]<=e[1])return t[s-1][1]=Math.max(i[1],e[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(i[1]<=e[0])return t.splice(s,0,i),t;if(i[1]<=e[1])return e[0]=Math.min(i[0],e[0]),t;i[0]<e[1]&&(e[0]=Math.min(i[0],e[0]),n=!0)}}return n?t[t.length-1][1]=i[1]:t.push(i),t},t}();i.CharacterJoinerRegistry=c},2512:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.CursorRenderLayer=void 0;var r=n(1546),h=n(511),o=600,u=function(t){function i(i,n,s,e,r,o,u,c,f){var a=t.call(this,i,"cursor",n,!0,s,e,o,u)||this;return a.ie=r,a.ln=c,a.ne=f,a.se=new h.CellData,a.ee={x:0,y:0,isFocused:!1,style:"",width:0},a.re={bar:a.he.bind(a),block:a.oe.bind(a),underline:a.ue.bind(a)},a}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this.ee={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this.ce(),this.fe&&(this.fe.dispose(),this.fe=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this.fe&&this.fe.pause(),this.ie.fire({start:this._t.buffer.y,end:this._t.buffer.y})},i.prototype.onFocus=function(){this.fe?this.fe.resume():this.ie.fire({start:this._t.buffer.y,end:this._t.buffer.y})},i.prototype.onOptionsChanged=function(){var t,i=this;this.li.options.cursorBlink?this.fe||(this.fe=new c(this.ne.isFocused,(function(){i.ae(!0)}))):(null===(t=this.fe)||void 0===t||t.dispose(),this.fe=void 0),this.ie.fire({start:this._t.buffer.y,end:this._t.buffer.y})},i.prototype.onCursorMove=function(){this.fe&&this.fe.restartBlinkAnimation()},i.prototype.onGridChanged=function(t,i){!this.fe||this.fe.isPaused?this.ae(!1):this.fe.restartBlinkAnimation()},i.prototype.ae=function(t){if(this.ln.isCursorInitialized&&!this.ln.isCursorHidden){var i=this._t.buffer.ybase+this._t.buffer.y,n=i-this._t.buffer.ydisp;if(n<0||n>=this._t.rows)this.ce();else{var s=Math.min(this._t.buffer.x,this._t.cols-1);if(this._t.buffer.lines.get(i).loadCell(s,this.se),void 0!==this.se.content){if(!this.ne.isFocused){this.ce(),this.bt.save(),this.bt.fillStyle=this.Os.cursor.css;var e=this.li.options.cursorStyle;return e&&"block"!==e?this.re[e](s,n,this.se):this.le(s,n,this.se),this.bt.restore(),this.ee.x=s,this.ee.y=n,this.ee.isFocused=!1,this.ee.style=e,void(this.ee.width=this.se.getWidth())}if(!this.fe||this.fe.isCursorVisible){if(this.ee){if(this.ee.x===s&&this.ee.y===n&&this.ee.isFocused===this.ne.isFocused&&this.ee.style===this.li.options.cursorStyle&&this.ee.width===this.se.getWidth())return;this.ce()}this.bt.save(),this.re[this.li.options.cursorStyle||"block"](s,n,this.se),this.bt.restore(),this.ee.x=s,this.ee.y=n,this.ee.isFocused=!1,this.ee.style=this.li.options.cursorStyle,this.ee.width=this.se.getWidth()}else this.ce()}}}else this.ce()},i.prototype.ce=function(){this.ee&&(this.Ds(this.ee.x,this.ee.y,this.ee.width,1),this.ee={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype.he=function(t,i,n){this.bt.save(),this.bt.fillStyle=this.Os.cursor.css,this.Ps(t,i,this.li.options.cursorWidth),this.bt.restore()},i.prototype.oe=function(t,i,n){this.bt.save(),this.bt.fillStyle=this.Os.cursor.css,this.Us(t,i,n.getWidth(),1),this.bt.fillStyle=this.Os.cursorAccent.css,this.Ls(n,t,i),this.bt.restore()},i.prototype.ue=function(t,i,n){this.bt.save(),this.bt.fillStyle=this.Os.cursor.css,this.Bs(t,i),this.bt.restore()},i.prototype.le=function(t,i,n){this.bt.save(),this.bt.strokeStyle=this.Os.cursor.css,this.Ns(t,i,n.getWidth(),1),this.bt.restore()},i}(r.BaseRenderLayer);i.CursorRenderLayer=u;var c=function(){function t(t,i){this.Si=i,this.isCursorVisible=!0,t&&this.ve()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this.de||this.be)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.be&&(window.clearInterval(this.be),this.be=void 0),this.de&&(window.clearTimeout(this.de),this.de=void 0),this.Ri&&(window.cancelAnimationFrame(this.Ri),this.Ri=void 0)},t.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this.we=Date.now(),this.isCursorVisible=!0,this.Ri||(this.Ri=window.requestAnimationFrame((function(){t.Si(),t.Ri=void 0}))))},t.prototype.ve=function(t){var i=this;void 0===t&&(t=o),this.be&&window.clearInterval(this.be),this.de=window.setTimeout((function(){if(i.we){var t=o-(Date.now()-i.we);if(i.we=void 0,t>0)return void i.ve(t)}i.isCursorVisible=!1,i.Ri=window.requestAnimationFrame((function(){i.Si(),i.Ri=void 0})),i.be=window.setInterval((function(){if(i.we){var t=o-(Date.now()-i.we);return i.we=void 0,void i.ve(t)}i.isCursorVisible=!i.isCursorVisible,i.Ri=window.requestAnimationFrame((function(){i.Si(),i.Ri=void 0}))}),o)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this.be&&(window.clearInterval(this.be),this.be=void 0),this.de&&(window.clearTimeout(this.de),this.de=void 0),this.Ri&&(window.cancelAnimationFrame(this.Ri),this.Ri=void 0)},t.prototype.resume=function(){this.pause(),this.we=void 0,this.ve(),this.restartBlinkAnimation()},t}()},3700:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.GridCache=void 0;var n=function(){function t(){this.cache=[]}return t.prototype.resize=function(t,i){for(var n=0;n<t;n++){this.cache.length<=n&&this.cache.push([]);for(var s=this.cache[n].length;s<i;s++)this.cache[n].push(void 0);this.cache[n].length=i}this.cache.length=t},t.prototype.clear=function(){for(var t=0;t<this.cache.length;t++)for(var i=0;i<this.cache[t].length;i++)this.cache[t][i]=void 0},t}();i.GridCache=n},5098:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.LinkRenderLayer=void 0;var r=n(1546),h=n(8803),o=n(2040),u=function(t){function i(i,n,s,e,r,h,o,u){var c=t.call(this,i,"link",n,!0,s,e,o,u)||this;return r.onShowLinkUnderline((function(t){return c.At(t)})),r.onHideLinkUnderline((function(t){return c.St(t)})),h.onShowLinkUnderline((function(t){return c.At(t)})),h.onHideLinkUnderline((function(t){return c.St(t)})),c}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this.ee=void 0},i.prototype.reset=function(){this.Gt()},i.prototype.Gt=function(){if(this.ee){this.Ds(this.ee.x1,this.ee.y1,this.ee.cols-this.ee.x1,1);var t=this.ee.y2-this.ee.y1-1;t>0&&this.Ds(0,this.ee.y1+1,this.ee.cols,t),this.Ds(0,this.ee.y2,this.ee.x2,1),this.ee=void 0}},i.prototype.At=function(t){if(t.fg===h.INVERTED_DEFAULT_COLOR?this.bt.fillStyle=this.Os.background.css:t.fg&&o.is256Color(t.fg)?this.bt.fillStyle=this.Os.ansi[t.fg].css:this.bt.fillStyle=this.Os.foreground.css,t.y1===t.y2)this.Bs(t.x1,t.y1,t.x2-t.x1);else{this.Bs(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this.Bs(0,i,t.cols);this.Bs(0,t.y2,t.x2)}this.ee=t},i.prototype.St=function(t){this.Gt()},i}(r.BaseRenderLayer);i.LinkRenderLayer=u},3525:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.Renderer=void 0;var o=n(9596),u=n(4149),c=n(2512),f=n(5098),a=n(5879),l=n(844),v=n(4725),d=n(2585),b=n(1420),w=n(8460),g=1,m=function(t){function i(i,n,s,e,r,h,l,v,d){var b=t.call(this)||this;b.Os=i,b.fi=n,b._t=r,b.hn=h,b.li=l,b.ge=g++,b.ie=new w.EventEmitter;var m=b.li.options.allowTransparency;return b.me=new a.CharacterJoinerRegistry(b._t),b.pe=[new o.TextRenderLayer(b.fi,0,b.Os,b.me,m,b.ge,b._t,l),new u.SelectionRenderLayer(b.fi,1,b.Os,b.ge,b._t,l),new f.LinkRenderLayer(b.fi,2,b.Os,b.ge,s,e,b._t,l),new c.CursorRenderLayer(b.fi,3,b.Os,b.ge,b.ie,b._t,l,v,d)],b.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},b.Oe=window.devicePixelRatio,b.je(),b.onOptionsChanged(),b}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this.ie.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){for(var i=0,n=this.pe;i<n.length;i++)n[i].dispose();t.prototype.dispose.call(this),b.removeTerminalFromCache(this.ge)},i.prototype.onDevicePixelRatioChange=function(){this.Oe!==window.devicePixelRatio&&(this.Oe=window.devicePixelRatio,this.onResize(this._t.cols,this._t.rows))},i.prototype.setColors=function(t){this.Os=t;for(var i=0,n=this.pe;i<n.length;i++){var s=n[i];s.setColors(this.Os),s.reset()}},i.prototype.onResize=function(t,i){this.je();for(var n=0,s=this.pe;n<s.length;n++)s[n].resize(this.dimensions);this.fi.style.width=this.dimensions.canvasWidth+"px",this.fi.style.height=this.dimensions.canvasHeight+"px"},i.prototype.onCharSizeChanged=function(){this.onResize(this._t.cols,this._t.rows)},i.prototype.onBlur=function(){this.ye((function(t){return t.onBlur()}))},i.prototype.onFocus=function(){this.ye((function(t){return t.onFocus()}))},i.prototype.onSelectionChanged=function(t,i,n){void 0===n&&(n=!1),this.ye((function(s){return s.onSelectionChanged(t,i,n)}))},i.prototype.onCursorMove=function(){this.ye((function(t){return t.onCursorMove()}))},i.prototype.onOptionsChanged=function(){this.ye((function(t){return t.onOptionsChanged()}))},i.prototype.clear=function(){this.ye((function(t){return t.reset()}))},i.prototype.ye=function(t){for(var i=0,n=this.pe;i<n.length;i++)t(n[i])},i.prototype.renderRows=function(t,i){for(var n=0,s=this.pe;n<s.length;n++)s[n].onGridChanged(t,i)},i.prototype.je=function(){this.hn.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this.hn.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this.hn.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this.li.options.lineHeight),this.dimensions.scaledCharTop=1===this.li.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this.li.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this.li.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._t.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._t.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._t.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._t.cols)},i.prototype.registerCharacterJoiner=function(t){return this.me.registerCharacterJoiner(t)},i.prototype.deregisterCharacterJoiner=function(t){return this.me.deregisterCharacterJoiner(t)},r([h(4,d.IBufferService),h(5,v.ICharSizeService),h(6,d.IOptionsService),h(7,d.ICoreService),h(8,v.ICoreBrowserService)],i)}(l.Disposable);i.Renderer=m},1752:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.throwIfFalsy=void 0,i.throwIfFalsy=function(t){if(!t)throw new Error("value must not be falsy");return t}},4149:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.SelectionRenderLayer=void 0;var r=function(t){function i(i,n,s,e,r,h){var o=t.call(this,i,"selection",n,!0,s,e,r,h)||this;return o._e(),o}return e(i,t),i.prototype._e=function(){this.ee={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},i.prototype.resize=function(i){t.prototype.resize.call(this,i),this._e()},i.prototype.reset=function(){this.ee.start&&this.ee.end&&(this._e(),this.Es())},i.prototype.onSelectionChanged=function(t,i,n){if(this.ke(t,i,n,this._t.buffer.ydisp))if(this.Es(),t&&i){var s=t[1]-this._t.buffer.ydisp,e=i[1]-this._t.buffer.ydisp,r=Math.max(s,0),h=Math.min(e,this._t.rows-1);if(r>=this._t.rows||h<0)this.ee.ydisp=this._t.buffer.ydisp;else{if(this.bt.fillStyle=this.Os.selectionTransparent.css,n){var o=t[0],u=i[0]-o,c=h-r+1;this.Us(o,r,u,c)}else{o=s===r?t[0]:0;var f=r===e?i[0]:this._t.cols;this.Us(o,r,f-o,1);var a=Math.max(h-r-1,0);if(this.Us(0,r+1,this._t.cols,a),r!==h){var l=e===h?i[0]:this._t.cols;this.Us(0,h,l,1)}}this.ee.start=[t[0],t[1]],this.ee.end=[i[0],i[1]],this.ee.columnSelectMode=n,this.ee.ydisp=this._t.buffer.ydisp}}else this._e()},i.prototype.ke=function(t,i,n,s){return!this.Me(t,this.ee.start)||!this.Me(i,this.ee.end)||n!==this.ee.columnSelectMode||s!==this.ee.ydisp},i.prototype.Me=function(t,i){return!(!t||!i)&&t[0]===i[0]&&t[1]===i[1]},i}(n(1546).BaseRenderLayer);i.SelectionRenderLayer=r},9596:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.TextRenderLayer=void 0;var r=n(3700),h=n(1546),o=n(3734),u=n(643),c=n(5879),f=n(511),a=function(t){function i(i,n,s,e,h,o,u,c){var a=t.call(this,i,"text",n,h,s,o,u,c)||this;return a.qe=0,a.xe="",a.Ae={},a.Qs=new f.CellData,a.ee=new r.GridCache,a.me=e,a}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i);var n=this.Ws(!1,!1);this.qe===i.scaledCharWidth&&this.xe===n||(this.qe=i.scaledCharWidth,this.xe=n,this.Ae={}),this.ee.clear(),this.ee.resize(this._t.cols,this._t.rows)},i.prototype.reset=function(){this.ee.clear(),this.Es()},i.prototype.Se=function(t,i,n,s){for(var e=t;e<=i;e++)for(var r=e+this._t.buffer.ydisp,h=this._t.buffer.lines.get(r),o=n?n.getJoinedCharacters(r):[],f=0;f<this._t.cols;f++){h.loadCell(f,this.Qs);var a=this.Qs,l=!1,v=f;if(0!==a.getWidth()){if(o.length>0&&f===o[0][0]){l=!0;var d=o.shift();a=new c.JoinedCellData(this.Qs,h.translateToString(!0,d[0],d[1]),d[1]-d[0]),v=d[1]-1}!l&&this.Re(a)&&v<h.length-1&&h.getCodePoint(v+1)===u.NULL_CELL_CODE&&(a.content&=-12582913,a.content|=2<<22),s(a,f,e),f=v}}},i.prototype.Ce=function(t,i){var n=this,s=this.bt,e=this._t.cols,r=0,h=0,u=null;s.save(),this.Se(t,i,null,(function(t,i,c){var f=null;t.isInverse()?f=t.isFgDefault()?n.Os.foreground.css:t.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":n.Os.ansi[t.getFgColor()].css:t.isBgRGB()?f="rgb("+o.AttributeData.toColorRGB(t.getBgColor()).join(",")+")":t.isBgPalette()&&(f=n.Os.ansi[t.getBgColor()].css),null===u&&(r=i,h=c),c!==h?(s.fillStyle=u||"",n.Us(r,h,e-r,1),r=i,h=c):u!==f&&(s.fillStyle=u||"",n.Us(r,h,i-r,1),r=i,h=c),u=f})),null!==u&&(s.fillStyle=u,this.Us(r,h,e-r,1)),s.restore()},i.prototype.Ee=function(t,i){var n=this;this.Se(t,i,this.me,(function(t,i,s){if(!t.isInvisible()&&(n.Ks(t,i,s),t.isUnderline())){if(n.bt.save(),t.isInverse())if(t.isBgDefault())n.bt.fillStyle=n.Os.background.css;else if(t.isBgRGB())n.bt.fillStyle="rgb("+o.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var e=t.getBgColor();n.li.options.drawBoldTextInBrightColors&&t.isBold()&&e<8&&(e+=8),n.bt.fillStyle=n.Os.ansi[e].css}else if(t.isFgDefault())n.bt.fillStyle=n.Os.foreground.css;else if(t.isFgRGB())n.bt.fillStyle="rgb("+o.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var r=t.getFgColor();n.li.options.drawBoldTextInBrightColors&&t.isBold()&&r<8&&(r+=8),n.bt.fillStyle=n.Os.ansi[r].css}n.Bs(i,s,t.getWidth()),n.bt.restore()}}))},i.prototype.onGridChanged=function(t,i){0!==this.ee.cache.length&&(this.Cs&&this.Cs.beginFrame(),this.Ds(0,t,this._t.cols,i-t+1),this.Ce(t,i),this.Ee(t,i))},i.prototype.onOptionsChanged=function(){this.Is(this.li.options.allowTransparency)},i.prototype.Re=function(t){if(1!==t.getWidth())return!1;if(t.getCode()<256)return!1;var i=t.getChars();if(this.Ae.hasOwnProperty(i))return this.Ae[i];this.bt.save(),this.bt.font=this.xe;var n=Math.floor(this.bt.measureText(i).width)>this.qe;return this.bt.restore(),this.Ae[i]=n,n},i}(h.BaseRenderLayer);i.TextRenderLayer=a},9616:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.BaseCharAtlas=void 0;var n=function(){function t(){this.Te=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this.Te||(this.Ie(),this.Te=!0)},t.prototype.Ie=function(){},t.prototype.beginFrame=function(){},t}();i.BaseCharAtlas=n},1420:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.removeTerminalFromCache=i.acquireCharAtlas=void 0;var s=n(2040),e=n(1906),r=[];i.acquireCharAtlas=function(t,i,n,h,o){for(var u=s.generateConfig(h,o,t,n),c=0;c<r.length;c++){var f=(a=r[c]).ownedBy.indexOf(i);if(f>=0){if(s.configEquals(a.config,u))return a.atlas;1===a.ownedBy.length?(a.atlas.dispose(),r.splice(c,1)):a.ownedBy.splice(f,1);break}}for(c=0;c<r.length;c++){var a=r[c];if(s.configEquals(a.config,u))return a.ownedBy.push(i),a.atlas}var l={atlas:new e.DynamicCharAtlas(document,u),config:u,ownedBy:[i]};return r.push(l),l.atlas},i.removeTerminalFromCache=function(t){for(var i=0;i<r.length;i++){var n=r[i].ownedBy.indexOf(t);if(-1!==n){1===r[i].ownedBy.length?(r[i].atlas.dispose(),r.splice(i,1)):r[i].ownedBy.splice(n,1);break}}}},2040:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;var s=n(643);i.generateConfig=function(t,i,n,s){var e={foreground:s.foreground,background:s.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:s.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:t,scaledCharHeight:i,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,colors:e}},i.configEquals=function(t,i){for(var n=0;n<t.colors.ansi.length;n++)if(t.colors.ansi[n].rgba!==i.colors.ansi[n].rgba)return!1;return t.devicePixelRatio===i.devicePixelRatio&&t.fontFamily===i.fontFamily&&t.fontSize===i.fontSize&&t.fontWeight===i.fontWeight&&t.fontWeightBold===i.fontWeightBold&&t.allowTransparency===i.allowTransparency&&t.scaledCharWidth===i.scaledCharWidth&&t.scaledCharHeight===i.scaledCharHeight&&t.colors.foreground===i.colors.foreground&&t.colors.background===i.colors.background},i.is256Color=function(t){return t<s.DEFAULT_COLOR}},8803:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.CHAR_ATLAS_CELL_SPACING=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0,i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.CHAR_ATLAS_CELL_SPACING=1},1906:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.NoneCharAtlas=i.DynamicCharAtlas=i.getGlyphCacheKey=void 0;var r=n(8803),h=n(9616),o=n(5680),u=n(7001),c=n(6114),f=n(1752),a=n(4774),l={css:"rgba(0, 0, 0, 0)",rgba:0};function v(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}i.getGlyphCacheKey=v;var d=function(t){function i(i,n){var s=t.call(this)||this;s.Ue=n,s.Be=0,s.Pe=[],s.Ne=null,s.De=null,s.Le=i.createElement("canvas"),s.Le.width=1024,s.Le.height=1024,s.We=f.throwIfFalsy(s.Le.getContext("2d",{alpha:!0}));var e=i.createElement("canvas");e.width=s.Ue.scaledCharWidth,e.height=s.Ue.scaledCharHeight,s.Fe=f.throwIfFalsy(e.getContext("2d",{alpha:s.Ue.allowTransparency})),s.Js=Math.floor(1024/s.Ue.scaledCharWidth),s.Ke=Math.floor(1024/s.Ue.scaledCharHeight);var r=s.Js*s.Ke;return s.He=new u.LRUMap(r),s.He.prealloc(r),s}return e(i,t),i.prototype.dispose=function(){null!==this.Ne&&(window.clearTimeout(this.Ne),this.Ne=null)},i.prototype.beginFrame=function(){this.Be=0},i.prototype.draw=function(t,i,n,s){if(32===i.code)return!0;if(!this.ze(i))return!1;var e=v(i),r=this.He.get(e);if(null!=r)return this.Ge(t,r,n,s),!0;if(this.Be<100){var h;h=this.He.size<this.He.capacity?this.He.size:this.He.peek().index;var o=this.$e(i,h);return this.He.set(e,o),this.Ge(t,o,n,s),!0}return!1},i.prototype.ze=function(t){return t.code<256},i.prototype.Je=function(t){return t%this.Js*this.Ue.scaledCharWidth},i.prototype.Ve=function(t){return Math.floor(t/this.Js)*this.Ue.scaledCharHeight},i.prototype.Ge=function(t,i,n,s){if(!i.isEmpty){var e=this.Je(i.index),r=this.Ve(i.index);t.drawImage(i.inBitmap?this.De:this.Le,e,r,this.Ue.scaledCharWidth,this.Ue.scaledCharHeight,n,s,this.Ue.scaledCharWidth,this.Ue.scaledCharHeight)}},i.prototype.Ye=function(t){return t<this.Ue.colors.ansi.length?this.Ue.colors.ansi[t]:o.DEFAULT_ANSI_COLORS[t]},i.prototype.Qe=function(t){return this.Ue.allowTransparency?l:t.bg===r.INVERTED_DEFAULT_COLOR?this.Ue.colors.foreground:t.bg<256?this.Ye(t.bg):this.Ue.colors.background},i.prototype.Xe=function(t){return t.fg===r.INVERTED_DEFAULT_COLOR?a.color.opaque(this.Ue.colors.background):t.fg<256?this.Ye(t.fg):this.Ue.colors.foreground},i.prototype.$e=function(t,i){this.Be++,this.Fe.save();var n=this.Qe(t);this.Fe.globalCompositeOperation="copy",this.Fe.fillStyle=n.css,this.Fe.fillRect(0,0,this.Ue.scaledCharWidth,this.Ue.scaledCharHeight),this.Fe.globalCompositeOperation="source-over";var s=t.bold?this.Ue.fontWeightBold:this.Ue.fontWeight,e=t.italic?"italic":"";this.Fe.font=e+" "+s+" "+this.Ue.fontSize*this.Ue.devicePixelRatio+"px "+this.Ue.fontFamily,this.Fe.textBaseline="middle",this.Fe.fillStyle=this.Xe(t).css,t.dim&&(this.Fe.globalAlpha=r.DIM_OPACITY),this.Fe.fillText(t.chars,0,this.Ue.scaledCharHeight/2),this.Fe.restore();var h=this.Fe.getImageData(0,0,this.Ue.scaledCharWidth,this.Ue.scaledCharHeight),o=!1;this.Ue.allowTransparency||(o=function(t,i){for(var n=!0,s=i.rgba>>>24,e=i.rgba>>>16&255,r=i.rgba>>>8&255,h=0;h<t.data.length;h+=4)t.data[h]===s&&t.data[h+1]===e&&t.data[h+2]===r?t.data[h+3]=0:n=!1;return n}(h,n));var u=this.Je(i),c=this.Ve(i);this.We.putImageData(h,u,c);var f={index:i,isEmpty:o,inBitmap:!1};return this.Ze(f),f},i.prototype.Ze=function(t){var i=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this.Pe.push(t),null===this.Ne&&(this.Ne=window.setTimeout((function(){return i.tr()}),100)))},i.prototype.tr=function(){var t=this,i=this.Pe;this.Pe=[],window.createImageBitmap(this.Le).then((function(n){t.De=n;for(var s=0;s<i.length;s++)i[s].inBitmap=!0})),this.Ne=null},i}(h.BaseCharAtlas);i.DynamicCharAtlas=d;var b=function(t){function i(i,n){return t.call(this)||this}return e(i,t),i.prototype.draw=function(t,i,n,s){return!1},i}(h.BaseCharAtlas);i.NoneCharAtlas=b},7001:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.LRUMap=void 0;var n=function(){function t(t){this.capacity=t,this.ir={},this.nr=null,this.sr=null,this.er=[],this.size=0}return t.prototype.rr=function(t){var i=t.prev,n=t.next;t===this.nr&&(this.nr=n),t===this.sr&&(this.sr=i),null!==i&&(i.next=n),null!==n&&(n.prev=i)},t.prototype.hr=function(t){var i=this.sr;null!==i&&(i.next=t),t.prev=i,t.next=null,this.sr=t,null===this.nr&&(this.nr=t)},t.prototype.prealloc=function(t){for(var i=this.er,n=0;n<t;n++)i.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(t){var i=this.ir[t];return void 0!==i?(this.rr(i),this.hr(i),i.value):null},t.prototype.peekValue=function(t){var i=this.ir[t];return void 0!==i?i.value:null},t.prototype.peek=function(){var t=this.nr;return null===t?null:t.value},t.prototype.set=function(t,i){var n=this.ir[t];if(void 0!==n)n=this.ir[t],this.rr(n),n.value=i;else if(this.size>=this.capacity)n=this.nr,this.rr(n),delete this.ir[n.key],n.key=t,n.value=i,this.ir[t]=n;else{var s=this.er;s.length>0?((n=s.pop()).key=t,n.value=i):n={prev:null,next:null,key:t,value:i},this.ir[t]=n,this.size++}this.hr(n)},t}();i.LRUMap=n},1296:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.DomRenderer=void 0;var o=n(3787),u=n(8803),c=n(844),f=n(4725),a=n(2585),l=n(8460),v=n(4774),d=n(9631),b="xterm-dom-renderer-owner-",w="xterm-fg-",g="xterm-bg-",m="xterm-focus",p=1,O=function(t){function i(i,n,s,e,r,h,u,c,f){var a=t.call(this)||this;return a.Os=i,a.Et=n,a.fi=s,a.kn=e,a.ur=r,a.cr=h,a.hn=u,a.li=c,a._t=f,a.ar=p++,a.G=[],a.F=document.createElement("div"),a.F.classList.add("xterm-rows"),a.F.style.lineHeight="normal",a.F.setAttribute("aria-hidden","true"),a.lr(a._t.cols,a._t.rows),a.vr=document.createElement("div"),a.vr.classList.add("xterm-selection"),a.vr.setAttribute("aria-hidden","true"),a.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},a.je(),a.dr(),a.br=new o.DomRendererRowFactory(document,a.li,a.Os),a.Et.classList.add(b+a.ar),a.fi.appendChild(a.F),a.fi.appendChild(a.vr),a.ur.onShowLinkUnderline((function(t){return a.wr(t)})),a.ur.onHideLinkUnderline((function(t){return a.gr(t)})),a.cr.onShowLinkUnderline((function(t){return a.wr(t)})),a.cr.onHideLinkUnderline((function(t){return a.gr(t)})),a}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return(new l.EventEmitter).event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.Et.classList.remove(b+this.ar),d.removeElementFromParent(this.F,this.vr,this.mr,this.pr),t.prototype.dispose.call(this)},i.prototype.je=function(){this.dimensions.scaledCharWidth=this.hn.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this.hn.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this.li.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this.li.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._t.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._t.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._t.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._t.rows;for(var t=0,i=this.G;t<i.length;t++){var n=i[t];n.style.width=this.dimensions.canvasWidth+"px",n.style.height=this.dimensions.actualCellHeight+"px",n.style.lineHeight=this.dimensions.actualCellHeight+"px",n.style.overflow="hidden"}this.pr||(this.pr=document.createElement("style"),this.fi.appendChild(this.pr));var s=this.Or+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this.pr.textContent=s,this.vr.style.height=this.kn.style.height,this.fi.style.width=this.dimensions.canvasWidth+"px",this.fi.style.height=this.dimensions.canvasHeight+"px"},i.prototype.setColors=function(t){this.Os=t,this.dr()},i.prototype.dr=function(){var t=this;this.mr||(this.mr=document.createElement("style"),this.fi.appendChild(this.mr));var i=this.Or+" .xterm-rows { color: "+this.Os.foreground.css+"; font-family: "+this.li.options.fontFamily+"; font-size: "+this.li.options.fontSize+"px;}";i+=this.Or+" span:not(."+o.BOLD_CLASS+") { font-weight: "+this.li.options.fontWeight+";}"+this.Or+" span."+o.BOLD_CLASS+" { font-weight: "+this.li.options.fontWeightBold+";}"+this.Or+" span."+o.ITALIC_CLASS+" { font-style: italic;}",i+="@keyframes blink_box_shadow_"+this.ar+" { 50% {  box-shadow: none; }}",i+="@keyframes blink_block_"+this.ar+" { 0% {  background-color: "+this.Os.cursor.css+";  color: "+this.Os.cursorAccent.css+"; } 50% {  background-color: "+this.Os.cursorAccent.css+";  color: "+this.Os.cursor.css+"; }}",i+=this.Or+" .xterm-rows:not(.xterm-focus) ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this.Os.cursor.css+"; outline-offset: -1px;}"+this.Or+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+":not(."+o.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this.ar+" 1s step-end infinite;}"+this.Or+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this.ar+" 1s step-end infinite;}"+this.Or+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this.Os.cursor.css+"; color: "+this.Os.cursorAccent.css+";}"+this.Or+" .xterm-rows ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this.li.options.cursorWidth+"px 0 0 "+this.Os.cursor.css+" inset;}"+this.Or+" .xterm-rows ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this.Os.cursor.css+" inset;}",i+=this.Or+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this.Or+" .xterm-selection div { position: absolute; background-color: "+this.Os.selectionTransparent.css+";}",this.Os.ansi.forEach((function(n,s){i+=t.Or+" ."+w+s+" { color: "+n.css+"; }"+t.Or+" ."+g+s+" { background-color: "+n.css+"; }"})),i+=this.Or+" ."+w+u.INVERTED_DEFAULT_COLOR+" { color: "+v.color.opaque(this.Os.background).css+"; }"+this.Or+" ."+g+u.INVERTED_DEFAULT_COLOR+" { background-color: "+this.Os.foreground.css+"; }",this.mr.textContent=i},i.prototype.onDevicePixelRatioChange=function(){this.je()},i.prototype.lr=function(t,i){for(var n=this.G.length;n<=i;n++){var s=document.createElement("div");this.F.appendChild(s),this.G.push(s)}for(;this.G.length>i;)this.F.removeChild(this.G.pop())},i.prototype.onResize=function(t,i){this.lr(t,i),this.je()},i.prototype.onCharSizeChanged=function(){this.je()},i.prototype.onBlur=function(){this.F.classList.remove(m)},i.prototype.onFocus=function(){this.F.classList.add(m)},i.prototype.onSelectionChanged=function(t,i,n){for(;this.vr.children.length;)this.vr.removeChild(this.vr.children[0]);if(t&&i){var s=t[1]-this._t.buffer.ydisp,e=i[1]-this._t.buffer.ydisp,r=Math.max(s,0),h=Math.min(e,this._t.rows-1);if(!(r>=this._t.rows||h<0)){var o=document.createDocumentFragment();if(n)o.appendChild(this.jr(r,t[0],i[0],h-r+1));else{var u=s===r?t[0]:0,c=r===e?i[0]:this._t.cols;o.appendChild(this.jr(r,u,c));var f=h-r-1;if(o.appendChild(this.jr(r+1,0,this._t.cols,f)),r!==h){var a=e===h?i[0]:this._t.cols;o.appendChild(this.jr(h,0,a))}}this.vr.appendChild(o)}}},i.prototype.jr=function(t,i,n,s){void 0===s&&(s=1);var e=document.createElement("div");return e.style.height=s*this.dimensions.actualCellHeight+"px",e.style.top=t*this.dimensions.actualCellHeight+"px",e.style.left=i*this.dimensions.actualCellWidth+"px",e.style.width=this.dimensions.actualCellWidth*(n-i)+"px",e},i.prototype.onCursorMove=function(){},i.prototype.onOptionsChanged=function(){this.je(),this.dr()},i.prototype.clear=function(){for(var t=0,i=this.G;t<i.length;t++)i[t].innerText=""},i.prototype.renderRows=function(t,i){for(var n=this._t.buffer.ybase+this._t.buffer.y,s=Math.min(this._t.buffer.x,this._t.cols-1),e=this.li.options.cursorBlink,r=t;r<=i;r++){var h=this.G[r];h.innerText="";var o=r+this._t.buffer.ydisp,u=this._t.buffer.lines.get(o),c=this.li.options.cursorStyle;h.appendChild(this.br.createRow(u,o===n,c,s,e,this.dimensions.actualCellWidth,this._t.cols))}},Object.defineProperty(i.prototype,"Or",{get:function(){return"."+b+this.ar},enumerable:!1,configurable:!0}),i.prototype.registerCharacterJoiner=function(t){return-1},i.prototype.deregisterCharacterJoiner=function(t){return!1},i.prototype.wr=function(t){this.yr(t.x1,t.x2,t.y1,t.y2,t.cols,!0)},i.prototype.gr=function(t){this.yr(t.x1,t.x2,t.y1,t.y2,t.cols,!1)},i.prototype.yr=function(t,i,n,s,e,r){for(;t!==i||n!==s;){var h=this.G[n];if(!h)return;var o=h.children[t];o&&(o.style.textDecoration=r?"underline":"none"),++t>=e&&(t=0,n++)}},r([h(6,f.ICharSizeService),h(7,a.IOptionsService),h(8,a.IBufferService)],i)}(c.Disposable);i.DomRenderer=O},3787:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;var s=n(8803),e=n(643),r=n(511),h=n(4774);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function t(t,i,n){this._n=t,this.li=i,this.Os=n,this.Qs=new r.CellData}return t.prototype.setColors=function(t){this.Os=t},t.prototype.createRow=function(t,n,r,o,c,f,a){for(var l=this._n.createDocumentFragment(),v=0,d=Math.min(t.length,a)-1;d>=0;d--)if(t.loadCell(d,this.Qs).getCode()!==e.NULL_CELL_CODE||n&&d===o){v=d+1;break}for(d=0;d<v;d++){t.loadCell(d,this.Qs);var b=this.Qs.getWidth();if(0!==b){var w=this._n.createElement("span");if(b>1&&(w.style.width=f*b+"px"),n&&d===o)switch(w.classList.add(i.CURSOR_CLASS),c&&w.classList.add(i.CURSOR_BLINK_CLASS),r){case"bar":w.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":w.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:w.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}this.Qs.isBold()&&w.classList.add(i.BOLD_CLASS),this.Qs.isItalic()&&w.classList.add(i.ITALIC_CLASS),this.Qs.isDim()&&w.classList.add(i.DIM_CLASS),this.Qs.isUnderline()&&w.classList.add(i.UNDERLINE_CLASS),this.Qs.isInvisible()?w.textContent=e.WHITESPACE_CELL_CHAR:w.textContent=this.Qs.getChars()||e.WHITESPACE_CELL_CHAR;var g=this.Qs.getFgColor(),m=this.Qs.getFgColorMode(),p=this.Qs.getBgColor(),O=this.Qs.getBgColorMode(),j=!!this.Qs.isInverse();if(j){var y=g;g=p,p=y;var _=m;m=O,O=_}switch(m){case 16777216:case 33554432:this.Qs.isBold()&&g<8&&this.li.options.drawBoldTextInBrightColors&&(g+=8),this._r(w,this.Os.background,this.Os.ansi[g])||w.classList.add("xterm-fg-"+g);break;case 50331648:var k=h.rgba.toColor(g>>16&255,g>>8&255,255&g);this._r(w,this.Os.background,k)||this.kr(w,"color:#"+u(g.toString(16),"0",6));break;case 0:default:this._r(w,this.Os.background,this.Os.foreground)||j&&w.classList.add("xterm-fg-"+s.INVERTED_DEFAULT_COLOR)}switch(O){case 16777216:case 33554432:w.classList.add("xterm-bg-"+p);break;case 50331648:this.kr(w,"background-color:#"+u(p.toString(16),"0",6));break;case 0:default:j&&w.classList.add("xterm-bg-"+s.INVERTED_DEFAULT_COLOR)}l.appendChild(w)}}return l},t.prototype._r=function(t,i,n){if(1===this.li.options.minimumContrastRatio)return!1;var s=this.Os.contrastCache.getColor(this.Qs.bg,this.Qs.fg);return void 0===s&&(s=h.color.ensureContrastRatio(i,n,this.li.options.minimumContrastRatio),this.Os.contrastCache.setColor(this.Qs.bg,this.Qs.fg,null!=s?s:null)),!!s&&(this.kr(t,"color:"+s.css),!0)},t.prototype.kr=function(t,i){t.setAttribute("style",""+(t.getAttribute("style")||"")+i+";")},t}();function u(t,i,n){for(;t.length<n;)t=i+t;return t}i.DomRendererRowFactory=o},456:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.SelectionModel=void 0;var n=function(){function t(t){this._t=t,this.isSelectAllActive=!1,this.selectionStartLength=0}return t.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._t.cols,this._t.buffer.ybase+this._t.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var t=this.selectionStart[0]+this.selectionStartLength;return t>this._t.cols?[t%this._t.cols,this.selectionStart[1]+Math.floor(t/this._t.cols)]:[t,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var t=this.selectionStart,i=this.selectionEnd;return!(!t||!i)&&(t[1]>i[1]||t[1]===i[1]&&t[0]>i[0])},t.prototype.onTrim=function(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},t}();i.SelectionModel=n},428:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.CharSizeService=void 0;var r=n(2585),h=n(8460),o=function(){function t(t,i,n){this.li=n,this.width=0,this.height=0,this.Mr=new h.EventEmitter,this.qr=new u(t,i,this.li)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this.Mr.event},enumerable:!1,configurable:!0}),t.prototype.measure=function(){var t=this.qr.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this.Mr.fire())},s([e(2,r.IOptionsService)],t)}();i.CharSizeService=o;var u=function(){function t(t,i,n){this._n=t,this.Ar=i,this.li=n,this.Sr={width:0,height:0},this.Rr=this._n.createElement("span"),this.Rr.classList.add("xterm-char-measure-element"),this.Rr.textContent="W",this.Rr.setAttribute("aria-hidden","true"),this.Ar.appendChild(this.Rr)}return t.prototype.measure=function(){this.Rr.style.fontFamily=this.li.options.fontFamily,this.Rr.style.fontSize=this.li.options.fontSize+"px";var t=this.Rr.getBoundingClientRect();return 0!==t.width&&0!==t.height&&(this.Sr.width=t.width,this.Sr.height=Math.ceil(t.height)),this.Sr},t}()},5114:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.CoreBrowserService=void 0;var n=function(){function t(t){this.Yn=t}return Object.defineProperty(t.prototype,"isFocused",{get:function(){return(this.Yn.getRootNode?this.Yn.getRootNode():document).activeElement===this.Yn&&document.hasFocus()},enumerable:!1,configurable:!0}),t}();i.CoreBrowserService=n},8934:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.MouseService=void 0;var r=n(4725),h=n(9806),o=function(){function t(t,i){this.P=t,this.hn=i}return t.prototype.getCoords=function(t,i,n,s,e){return h.getCoords(t,i,n,s,this.hn.hasValidSize,this.P.dimensions.actualCellWidth,this.P.dimensions.actualCellHeight,e)},t.prototype.getRawByteCoords=function(t,i,n,s){var e=this.getCoords(t,i,n,s);return h.getRawByteCoords(e)},s([e(0,r.IRenderService),e(1,r.ICharSizeService)],t)}();i.MouseService=o},3230:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.RenderService=void 0;var o=n(6193),u=n(8460),c=n(844),f=n(5596),a=n(3656),l=n(2585),v=n(4725),d=function(t){function i(i,n,s,e,r,h){var c=t.call(this)||this;if(c.Cr=i,c.Ci=n,c.hn=r,c.Er=!1,c.Tr=!1,c.Ir=!0,c.Ur=!1,c.Br=0,c.Pr=0,c.Nr={start:void 0,end:void 0,columnSelectMode:!1},c.Dr=new u.EventEmitter,c.Fi=new u.EventEmitter,c.Lr=new u.EventEmitter,c.register({dispose:function(){return c.Cr.dispose()}}),c.Wr=new o.RenderDebouncer((function(t,i){return c.nt(t,i)})),c.register(c.Wr),c.ft=new f.ScreenDprMonitor,c.ft.setListener((function(){return c.onDevicePixelRatioChange()})),c.register(c.ft),c.register(h.onResize((function(t){return c.Fr()}))),c.register(e.onOptionChange((function(){return c.Cr.onOptionsChanged()}))),c.register(c.hn.onCharSizeChange((function(){return c.onCharSizeChanged()}))),c.Cr.onRequestRedraw((function(t){return c.refreshRows(t.start,t.end,!0)})),c.register(a.addDisposableDomListener(window,"resize",(function(){return c.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var l=new IntersectionObserver((function(t){return c.Kr(t[t.length-1])}),{threshold:0});l.observe(s),c.register({dispose:function(){return l.disconnect()}})}return c}return e(i,t),Object.defineProperty(i.prototype,"onDimensionsChange",{get:function(){return this.Dr.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRenderedBufferChange",{get:function(){return this.Fi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRefreshRequest",{get:function(){return this.Lr.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this.Cr.dimensions},enumerable:!1,configurable:!0}),i.prototype.Kr=function(t){this.Er=void 0===t.isIntersecting?0===t.intersectionRatio:!t.isIntersecting,this.Er||this.hn.hasValidSize||this.hn.measure(),!this.Er&&this.Tr&&(this.refreshRows(0,this.Ci-1),this.Tr=!1)},i.prototype.refreshRows=function(t,i,n){void 0===n&&(n=!1),this.Er?this.Tr=!0:(n||(this.Ir=!1),this.Wr.refresh(t,i,this.Ci))},i.prototype.nt=function(t,i){this.Cr.renderRows(t,i),this.Ur&&(this.Cr.onSelectionChanged(this.Nr.start,this.Nr.end,this.Nr.columnSelectMode),this.Ur=!1),this.Ir||this.Fi.fire({start:t,end:i}),this.Ir=!0},i.prototype.resize=function(t,i){this.Ci=i,this.Hr()},i.prototype.changeOptions=function(){this.Cr.onOptionsChanged(),this.refreshRows(0,this.Ci-1),this.Hr()},i.prototype.Hr=function(){this.Cr.dimensions.canvasWidth===this.Br&&this.Cr.dimensions.canvasHeight===this.Pr||this.Dr.fire(this.Cr.dimensions)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.setRenderer=function(t){var i=this;this.Cr.dispose(),this.Cr=t,this.Cr.onRequestRedraw((function(t){return i.refreshRows(t.start,t.end,!0)})),this.Ur=!0,this.Fr()},i.prototype.Fr=function(){this.Er?this.Tr=!0:this.refreshRows(0,this.Ci-1)},i.prototype.setColors=function(t){this.Cr.setColors(t),this.Fr()},i.prototype.onDevicePixelRatioChange=function(){this.Cr.onDevicePixelRatioChange(),this.refreshRows(0,this.Ci-1)},i.prototype.onResize=function(t,i){this.Cr.onResize(t,i),this.Fr()},i.prototype.onCharSizeChanged=function(){this.Cr.onCharSizeChanged()},i.prototype.onBlur=function(){this.Cr.onBlur()},i.prototype.onFocus=function(){this.Cr.onFocus()},i.prototype.onSelectionChanged=function(t,i,n){this.Nr.start=t,this.Nr.end=i,this.Nr.columnSelectMode=n,this.Cr.onSelectionChanged(t,i,n)},i.prototype.onCursorMove=function(){this.Cr.onCursorMove()},i.prototype.clear=function(){this.Cr.clear()},i.prototype.registerCharacterJoiner=function(t){return this.Cr.registerCharacterJoiner(t)},i.prototype.deregisterCharacterJoiner=function(t){return this.Cr.deregisterCharacterJoiner(t)},r([h(3,l.IOptionsService),h(4,v.ICharSizeService),h(5,l.IBufferService)],i)}(c.Disposable);i.RenderService=d},9312:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.SelectionService=void 0;var o=n(6114),u=n(456),c=n(511),f=n(8460),a=n(4725),l=n(2585),v=n(9806),d=n(9504),b=n(844),w=String.fromCharCode(160),g=new RegExp(w,"g"),m=function(t){function i(i,n,s,e,r,h,o){var a=t.call(this)||this;return a.Et=i,a.fi=n,a._t=s,a.ln=e,a.zt=r,a.li=h,a.P=o,a.zr=0,a.Gr=!0,a.Qs=new c.CellData,a.$r=0,a.Jr=!1,a.Vr=void 0,a.Yr=void 0,a.Qr=a.register(new f.EventEmitter),a.Xr=a.register(new f.EventEmitter),a.Ki=a.register(new f.EventEmitter),a.Zr=a.register(new f.EventEmitter),a.mi=function(t){return a.$t(t)},a.th=function(t){return a.ih(t)},a.ln.onUserInput((function(){a.hasSelection&&a.clearSelection()})),a.nh=a._t.buffer.lines.onTrim((function(t){return a.sh(t)})),a.register(a._t.buffers.onBufferActivate((function(t){return a.eh(t)}))),a.enable(),a.rh=new u.SelectionModel(a._t),a.hh=0,a}return e(i,t),Object.defineProperty(i.prototype,"onLinuxMouseSelection",{get:function(){return this.Qr.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this.Xr.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this.Ki.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestScrollLines",{get:function(){return this.Zr.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.oh()},i.prototype.reset=function(){this.clearSelection()},i.prototype.disable=function(){this.clearSelection(),this.Gr=!1},i.prototype.enable=function(){this.Gr=!0},Object.defineProperty(i.prototype,"selectionStart",{get:function(){return this.rh.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionEnd",{get:function(){return this.rh.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasSelection",{get:function(){var t=this.rh.finalSelectionStart,i=this.rh.finalSelectionEnd;return!(!t||!i||t[0]===i[0]&&t[1]===i[1])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionText",{get:function(){var t=this.rh.finalSelectionStart,i=this.rh.finalSelectionEnd;if(!t||!i)return"";var n=this._t.buffer,s=[];if(3===this.hh){if(t[0]===i[0])return"";for(var e=t[1];e<=i[1];e++){var r=n.translateBufferLineToString(e,!0,t[0],i[0]);s.push(r)}}else{var h=t[1]===i[1]?i[0]:void 0;for(s.push(n.translateBufferLineToString(t[1],!0,t[0],h)),e=t[1]+1;e<=i[1]-1;e++){var u=n.lines.get(e);r=n.translateBufferLineToString(e,!0),u&&u.isWrapped?s[s.length-1]+=r:s.push(r)}t[1]!==i[1]&&(u=n.lines.get(i[1]),r=n.translateBufferLineToString(i[1],!0,0,i[0]),u&&u.isWrapped?s[s.length-1]+=r:s.push(r))}return s.map((function(t){return t.replace(g," ")})).join(o.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),i.prototype.clearSelection=function(){this.rh.clearSelection(),this.oh(),this.refresh(),this.Ki.fire()},i.prototype.refresh=function(t){var i=this;this.Hn||(this.Hn=window.requestAnimationFrame((function(){return i.Gn()}))),o.isLinux&&t&&this.selectionText.length&&this.Qr.fire(this.selectionText)},i.prototype.Gn=function(){this.Hn=void 0,this.Xr.fire({start:this.rh.finalSelectionStart,end:this.rh.finalSelectionEnd,columnSelectMode:3===this.hh})},i.prototype.uh=function(t){var i=this.fh(t),n=this.rh.finalSelectionStart,s=this.rh.finalSelectionEnd;return!!(n&&s&&i)&&this.ah(i,n,s)},i.prototype.ah=function(t,i,n){return t[1]>i[1]&&t[1]<n[1]||i[1]===n[1]&&t[1]===i[1]&&t[0]>=i[0]&&t[0]<n[0]||i[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||i[1]<n[1]&&t[1]===i[1]&&t[0]>=i[0]},i.prototype.lh=function(t){var i=this.fh(t);i&&(this.dh(i,!1),this.rh.selectionEnd=void 0,this.refresh(!0))},i.prototype.selectAll=function(){this.rh.isSelectAllActive=!0,this.refresh(),this.Ki.fire()},i.prototype.selectLines=function(t,i){this.rh.clearSelection(),t=Math.max(t,0),i=Math.min(i,this._t.buffer.lines.length-1),this.rh.selectionStart=[0,t],this.rh.selectionEnd=[this._t.cols,i],this.refresh(),this.Ki.fire()},i.prototype.sh=function(t){this.rh.onTrim(t)&&this.refresh()},i.prototype.fh=function(t){var i=this.zt.getCoords(t,this.fi,this._t.cols,this._t.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this._t.buffer.ydisp,i},i.prototype.bh=function(t){var i=v.getCoordsRelativeToElement(t,this.fi)[1],n=this.P.dimensions.canvasHeight;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-50),50),(i/=50)/Math.abs(i)+Math.round(14*i))},i.prototype.shouldForceSelection=function(t){return o.isMac?t.altKey&&this.li.options.macOptionClickForcesSelection:t.shiftKey},i.prototype.onMouseDown=function(t){if(this.$r=t.timeStamp,(2!==t.button||!this.hasSelection)&&0===t.button){if(!this.Gr){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this.zr=0,this.Gr&&t.shiftKey?this.wh(t):1===t.detail?this.gh(t):2===t.detail?this.mh(t):3===t.detail&&this.ph(t),this.Oh(),this.refresh(!0)}},i.prototype.Oh=function(){var t=this;this.fi.ownerDocument&&(this.fi.ownerDocument.addEventListener("mousemove",this.mi),this.fi.ownerDocument.addEventListener("mouseup",this.th)),this.jh=window.setInterval((function(){return t.yh()}),50)},i.prototype.oh=function(){this.fi.ownerDocument&&(this.fi.ownerDocument.removeEventListener("mousemove",this.mi),this.fi.ownerDocument.removeEventListener("mouseup",this.th)),clearInterval(this.jh),this.jh=void 0},i.prototype.wh=function(t){this.rh.selectionStart&&(this.rh.selectionEnd=this.fh(t))},i.prototype.gh=function(t){if(this.rh.selectionStartLength=0,this.rh.isSelectAllActive=!1,this.hh=this.shouldColumnSelect(t)?3:0,this.rh.selectionStart=this.fh(t),this.rh.selectionStart){this.rh.selectionEnd=void 0;var i=this._t.buffer.lines.get(this.rh.selectionStart[1]);i&&i.length!==this.rh.selectionStart[0]&&0===i.hasWidth(this.rh.selectionStart[0])&&this.rh.selectionStart[0]++}},i.prototype.mh=function(t){var i=this.fh(t);i&&(this.hh=1,this.dh(i,!0))},i.prototype.ph=function(t){var i=this.fh(t);i&&(this.hh=2,this._h(i[1]))},i.prototype.shouldColumnSelect=function(t){return t.altKey&&!(o.isMac&&this.li.options.macOptionClickForcesSelection)},i.prototype.$t=function(t){if(t.stopImmediatePropagation(),this.rh.selectionStart){var i=this.rh.selectionEnd?[this.rh.selectionEnd[0],this.rh.selectionEnd[1]]:null;if(this.rh.selectionEnd=this.fh(t),this.rh.selectionEnd){2===this.hh?this.rh.selectionEnd[1]<this.rh.selectionStart[1]?this.rh.selectionEnd[0]=0:this.rh.selectionEnd[0]=this._t.cols:1===this.hh&&this.kh(this.rh.selectionEnd),this.zr=this.bh(t),3!==this.hh&&(this.zr>0?this.rh.selectionEnd[0]=this._t.cols:this.zr<0&&(this.rh.selectionEnd[0]=0));var n=this._t.buffer;if(this.rh.selectionEnd[1]<n.lines.length){var s=n.lines.get(this.rh.selectionEnd[1]);s&&0===s.hasWidth(this.rh.selectionEnd[0])&&this.rh.selectionEnd[0]++}i&&i[0]===this.rh.selectionEnd[0]&&i[1]===this.rh.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},i.prototype.yh=function(){if(this.rh.selectionEnd&&this.rh.selectionStart&&this.zr){this.Zr.fire({amount:this.zr,suppressScrollEvent:!1});var t=this._t.buffer;this.zr>0?(3!==this.hh&&(this.rh.selectionEnd[0]=this._t.cols),this.rh.selectionEnd[1]=Math.min(t.ydisp+this._t.rows,t.lines.length-1)):(3!==this.hh&&(this.rh.selectionEnd[0]=0),this.rh.selectionEnd[1]=t.ydisp),this.refresh()}},i.prototype.ih=function(t){var i=t.timeStamp-this.$r;if(this.oh(),this.selectionText.length<=1&&i<500&&t.altKey&&this.li.getOption("altClickMovesCursor")){if(this._t.buffer.ybase===this._t.buffer.ydisp){var n=this.zt.getCoords(t,this.Et,this._t.cols,this._t.rows,!1);if(n&&void 0!==n[0]&&void 0!==n[1]){var s=d.moveToCellSequence(n[0]-1,n[1]-1,this._t,this.ln.decPrivateModes.applicationCursorKeys);this.ln.triggerDataEvent(s,!0)}}}else this.Mh()},i.prototype.Mh=function(){var t=this.rh.finalSelectionStart,i=this.rh.finalSelectionEnd,n=!(!t||!i||t[0]===i[0]&&t[1]===i[1]);n?t&&i&&(this.Vr&&this.Yr&&t[0]===this.Vr[0]&&t[1]===this.Vr[1]&&i[0]===this.Yr[0]&&i[1]===this.Yr[1]||this.qh(t,i,n)):this.Jr&&this.qh(t,i,n)},i.prototype.qh=function(t,i,n){this.Vr=t,this.Yr=i,this.Jr=n,this.Ki.fire()},i.prototype.eh=function(t){var i=this;this.clearSelection(),this.nh.dispose(),this.nh=t.activeBuffer.lines.onTrim((function(t){return i.sh(t)}))},i.prototype.xh=function(t,i){for(var n=i[0],s=0;i[0]>=s;s++){var e=t.loadCell(s,this.Qs).getChars().length;0===this.Qs.getWidth()?n--:e>1&&i[0]!==s&&(n+=e-1)}return n},i.prototype.setSelection=function(t,i,n){this.rh.clearSelection(),this.oh(),this.rh.selectionStart=[t,i],this.rh.selectionStartLength=n,this.refresh()},i.prototype.rightClickSelect=function(t){this.uh(t)||(this.lh(t),this.Mh())},i.prototype.Ah=function(t,i,n,s){if(void 0===n&&(n=!0),void 0===s&&(s=!0),!(t[0]>=this._t.cols)){var e=this._t.buffer,r=e.lines.get(t[1]);if(r){var h=e.translateBufferLineToString(t[1],!1),o=this.xh(r,t),u=o,c=t[0]-o,f=0,a=0,l=0,v=0;if(" "===h.charAt(o)){for(;o>0&&" "===h.charAt(o-1);)o--;for(;u<h.length&&" "===h.charAt(u+1);)u++}else{var d=t[0],b=t[0];0===r.getWidth(d)&&(f++,d--),2===r.getWidth(b)&&(a++,b++);var w=r.getString(b).length;for(w>1&&(v+=w-1,u+=w-1);d>0&&o>0&&!this.Sh(r.loadCell(d-1,this.Qs));){r.loadCell(d-1,this.Qs);var g=this.Qs.getChars().length;0===this.Qs.getWidth()?(f++,d--):g>1&&(l+=g-1,o-=g-1),o--,d--}for(;b<r.length&&u+1<h.length&&!this.Sh(r.loadCell(b+1,this.Qs));){r.loadCell(b+1,this.Qs);var m=this.Qs.getChars().length;2===this.Qs.getWidth()?(a++,b++):m>1&&(v+=m-1,u+=m-1),u++,b++}}u++;var p=o+c-f+l,O=Math.min(this._t.cols,u-o+f+a-l-v);if(i||""!==h.slice(o,u).trim()){if(n&&0===p&&32!==r.getCodePoint(0)){var j=e.lines.get(t[1]-1);if(j&&r.isWrapped&&32!==j.getCodePoint(this._t.cols-1)){var y=this.Ah([this._t.cols-1,t[1]-1],!1,!0,!1);if(y){var _=this._t.cols-y.start;p-=_,O+=_}}}if(s&&p+O===this._t.cols&&32!==r.getCodePoint(this._t.cols-1)){var k=e.lines.get(t[1]+1);if(k&&k.isWrapped&&32!==k.getCodePoint(0)){var M=this.Ah([0,t[1]+1],!1,!1,!0);M&&(O+=M.length)}}return{start:p,length:O}}}}},i.prototype.dh=function(t,i){var n=this.Ah(t,i);if(n){for(;n.start<0;)n.start+=this._t.cols,t[1]--;this.rh.selectionStart=[n.start,t[1]],this.rh.selectionStartLength=n.length}},i.prototype.kh=function(t){var i=this.Ah(t,!0);if(i){for(var n=t[1];i.start<0;)i.start+=this._t.cols,n--;if(!this.rh.areSelectionValuesReversed())for(;i.start+i.length>this._t.cols;)i.length-=this._t.cols,n++;this.rh.selectionEnd=[this.rh.areSelectionValuesReversed()?i.start:i.start+i.length,n]}},i.prototype.Sh=function(t){return 0!==t.getWidth()&&this.li.options.wordSeparator.indexOf(t.getChars())>=0},i.prototype._h=function(t){var i=this._t.buffer.getWrappedRangeForLine(t);this.rh.selectionStart=[0,i.first],this.rh.selectionEnd=[this._t.cols,i.last],this.rh.selectionStartLength=0},r([h(2,l.IBufferService),h(3,l.ICoreService),h(4,a.IMouseService),h(5,l.IOptionsService),h(6,a.IRenderService)],i)}(b.Disposable);i.SelectionService=m},4725:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.ISoundService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;var s=n(8343);i.ICharSizeService=s.createDecorator("CharSizeService"),i.ICoreBrowserService=s.createDecorator("CoreBrowserService"),i.IMouseService=s.createDecorator("MouseService"),i.IRenderService=s.createDecorator("RenderService"),i.ISelectionService=s.createDecorator("SelectionService"),i.ISoundService=s.createDecorator("SoundService")},357:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.SoundService=void 0;var r=n(2585),h=function(){function t(t){this.li=t}return Object.defineProperty(t,"audioContext",{get:function(){if(!t.Rh){var i=window.AudioContext||window.webkitAudioContext;if(!i)return null;t.Rh=new i}return t.Rh},enumerable:!1,configurable:!0}),t.prototype.playBellSound=function(){var i=t.audioContext;if(i){var n=i.createBufferSource();i.decodeAudioData(this.Ch(this.Eh(this.li.options.bellSound)),(function(t){n.buffer=t,n.connect(i.destination),n.start(0)}))}},t.prototype.Ch=function(t){for(var i=window.atob(t),n=i.length,s=new Uint8Array(n),e=0;e<n;e++)s[e]=i.charCodeAt(e);return s.buffer},t.prototype.Eh=function(t){return t.split(",")[1]},t=s([e(0,r.IOptionsService)],t)}();i.SoundService=h},6349:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.CircularList=void 0;var s=n(8460),e=function(){function t(t){this.Th=t,this.onDeleteEmitter=new s.EventEmitter,this.onInsertEmitter=new s.EventEmitter,this.onTrimEmitter=new s.EventEmitter,this.Ih=new Array(this.Th),this.Uh=0,this.Bh=0}return Object.defineProperty(t.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.Th},set:function(t){if(this.Th!==t){for(var i=new Array(t),n=0;n<Math.min(t,this.length);n++)i[n]=this.Ih[this.Ph(n)];this.Ih=i,this.Th=t,this.Uh=0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.Bh},set:function(t){if(t>this.Bh)for(var i=this.Bh;i<t;i++)this.Ih[i]=void 0;this.Bh=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.Ih[this.Ph(t)]},t.prototype.set=function(t,i){this.Ih[this.Ph(t)]=i},t.prototype.push=function(t){this.Ih[this.Ph(this.Bh)]=t,this.Bh===this.Th?(this.Uh=++this.Uh%this.Th,this.onTrimEmitter.fire(1)):this.Bh++},t.prototype.recycle=function(){if(this.Bh!==this.Th)throw new Error("Can only recycle when the buffer is full");return this.Uh=++this.Uh%this.Th,this.onTrimEmitter.fire(1),this.Ih[this.Ph(this.Bh-1)]},Object.defineProperty(t.prototype,"isFull",{get:function(){return this.Bh===this.Th},enumerable:!1,configurable:!0}),t.prototype.pop=function(){return this.Ih[this.Ph(this.Bh---1)]},t.prototype.splice=function(t,i){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(i){for(var e=t;e<this.Bh-i;e++)this.Ih[this.Ph(e)]=this.Ih[this.Ph(e+i)];this.Bh-=i,this.onDeleteEmitter.fire({index:t,amount:i})}for(e=this.Bh-1;e>=t;e--)this.Ih[this.Ph(e+n.length)]=this.Ih[this.Ph(e)];for(e=0;e<n.length;e++)this.Ih[this.Ph(t+e)]=n[e];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this.Bh+n.length>this.Th){var r=this.Bh+n.length-this.Th;this.Uh+=r,this.Bh=this.Th,this.onTrimEmitter.fire(r)}else this.Bh+=n.length},t.prototype.trimStart=function(t){t>this.Bh&&(t=this.Bh),this.Uh+=t,this.Bh-=t,this.onTrimEmitter.fire(t)},t.prototype.shiftElements=function(t,i,n){if(!(i<=0)){if(t<0||t>=this.Bh)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(var s=i-1;s>=0;s--)this.set(t+s+n,this.get(t+s));var e=t+i+n-this.Bh;if(e>0)for(this.Bh+=e;this.Bh>this.Th;)this.Bh--,this.Uh++,this.onTrimEmitter.fire(1)}else for(s=0;s<i;s++)this.set(t+s+n,this.get(t+s))}},t.prototype.Ph=function(t){return(this.Uh+t)%this.Th},t}();i.CircularList=e},1439:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.clone=void 0,i.clone=function t(i,n){if(void 0===n&&(n=5),"object"!=typeof i)return i;var s=Array.isArray(i)?[]:{};for(var e in i)s[e]=n<=1?i[e]:i[e]?t(i[e],n-1):i[e];return s}},8969:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.CoreTerminal=void 0;var r=n(844),h=n(2585),o=n(4348),u=n(7866),c=n(744),f=n(7302),a=n(6975),l=n(8460),v=n(1753),d=n(3730),b=n(1480),w=n(7994),g=n(9282),m=n(5435),p=n(5981),O=function(t){function i(i){var n=t.call(this)||this;return n.Nh=new l.EventEmitter,n.Dh=new l.EventEmitter,n.Lh=new l.EventEmitter,n.rt=new l.EventEmitter,n.Tn=new l.EventEmitter,n.Yi=new o.InstantiationService,n.optionsService=new f.OptionsService(i),n.Yi.setService(h.IOptionsService,n.optionsService),n._t=n.register(n.Yi.createInstance(c.BufferService)),n.Yi.setService(h.IBufferService,n._t),n.kt=n.Yi.createInstance(u.LogService),n.Yi.setService(h.ILogService,n.kt),n.ln=n.register(n.Yi.createInstance(a.CoreService,(function(){return n.scrollToBottom()}))),n.Yi.setService(h.ICoreService,n.ln),n.Rn=n.Yi.createInstance(v.CoreMouseService),n.Yi.setService(h.ICoreMouseService,n.Rn),n.Wh=n.Yi.createInstance(d.DirtyRowService),n.Yi.setService(h.IDirtyRowService,n.Wh),n.unicodeService=n.Yi.createInstance(b.UnicodeService),n.Yi.setService(h.IUnicodeService,n.unicodeService),n.Fh=n.Yi.createInstance(w.CharsetService),n.Yi.setService(h.ICharsetService,n.Fh),n.Qi=new m.InputHandler(n._t,n.Fh,n.ln,n.Wh,n.kt,n.optionsService,n.Rn,n.unicodeService),n.register(l.forwardEvent(n.Qi.onLineFeed,n.Lh)),n.register(n.Qi),n.register(l.forwardEvent(n._t.onResize,n.rt)),n.register(l.forwardEvent(n.ln.onData,n.Dh)),n.register(l.forwardEvent(n.ln.onBinary,n.Nh)),n.register(n.optionsService.onOptionChange((function(t){return n.rn(t)}))),n.Kh=new p.WriteBuffer((function(t){return n.Qi.parse(t)})),n}return e(i,t),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this.Nh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this.Dh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this.Lh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this.rt.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this.Tn.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._t.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._t.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffers",{get:function(){return this._t.buffers},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){var i;this.sn||(t.prototype.dispose.call(this),null===(i=this.Hh)||void 0===i||i.dispose(),this.Hh=void 0)},i.prototype.write=function(t,i){this.Kh.write(t,i)},i.prototype.writeSync=function(t){this.Kh.writeSync(t)},i.prototype.resize=function(t,i){isNaN(t)||isNaN(i)||(t=Math.max(t,c.MINIMUM_COLS),i=Math.max(i,c.MINIMUM_ROWS),this._t.resize(t,i))},i.prototype.scroll=function(t,i){void 0===i&&(i=!1);var n,s=this._t.buffer;(n=this.zh)&&n.length===this.cols&&n.getFg(0)===t.fg&&n.getBg(0)===t.bg||(n=s.getBlankLine(t,i),this.zh=n),n.isWrapped=i;var e=s.ybase+s.scrollTop,r=s.ybase+s.scrollBottom;if(0===s.scrollTop){var h=s.lines.isFull;r===s.lines.length-1?h?s.lines.recycle().copyFrom(n):s.lines.push(n.clone()):s.lines.splice(r+1,0,n.clone()),h?this._t.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this._t.isUserScrolling||s.ydisp++)}else{var o=r-e+1;s.lines.shiftElements(e+1,o-1,-1),s.lines.set(r,n.clone())}this._t.isUserScrolling||(s.ydisp=s.ybase),this.Wh.markRangeDirty(s.scrollTop,s.scrollBottom),this.Tn.fire(s.ydisp)},i.prototype.scrollLines=function(t,i){var n=this._t.buffer;if(t<0){if(0===n.ydisp)return;this._t.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this._t.isUserScrolling=!1);var s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(i||this.Tn.fire(n.ydisp))},i.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this._t.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this._t.buffer.ybase-this._t.buffer.ydisp)},i.prototype.scrollToLine=function(t){var i=t-this._t.buffer.ydisp;0!==i&&this.scrollLines(i)},i.prototype.addEscHandler=function(t,i){return this.Qi.addEscHandler(t,i)},i.prototype.addDcsHandler=function(t,i){return this.Qi.addDcsHandler(t,i)},i.prototype.addCsiHandler=function(t,i){return this.Qi.addCsiHandler(t,i)},i.prototype.addOscHandler=function(t,i){return this.Qi.addOscHandler(t,i)},i.prototype.Vi=function(){this.optionsService.options.windowsMode&&this.Gh()},i.prototype.reset=function(){this.Qi.reset(),this._t.reset(),this.Fh.reset(),this.ln.reset(),this.Rn.reset()},i.prototype.rn=function(t){var i;switch(t){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this.Gh():(null===(i=this.Hh)||void 0===i||i.dispose(),this.Hh=void 0)}},i.prototype.Gh=function(){var t=this;if(!this.Hh){var i=[];i.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._t))),i.push(this.addCsiHandler({final:"H"},(function(){return g.updateWindowsModeWrappedState(t._t),!1}))),this.Hh={dispose:function(){for(var t=0,n=i;t<n.length;t++)n[t].dispose()}}}},i}(r.Disposable);i.CoreTerminal=O},8460:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.forwardEvent=i.EventEmitter=void 0;var n=function(){function t(){this.$h=[],this.Jh=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this.Vh||(this.Vh=function(i){return t.$h.push(i),{dispose:function(){if(!t.Jh)for(var n=0;n<t.$h.length;n++)if(t.$h[n]===i)return void t.$h.splice(n,1)}}}),this.Vh},enumerable:!1,configurable:!0}),t.prototype.fire=function(t,i){for(var n=[],s=0;s<this.$h.length;s++)n.push(this.$h[s]);for(s=0;s<n.length;s++)n[s].call(void 0,t,i)},t.prototype.dispose=function(){this.$h&&(this.$h.length=0),this.Jh=!0},t}();i.EventEmitter=n,i.forwardEvent=function(t,i){return t((function(t){return i.fire(t)}))}},5435:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;var r,h=n(2584),o=n(7116),u=n(2015),c=n(844),f=n(8273),a=n(482),l=n(8437),v=n(8460),d=n(643),b=n(511),w=n(3734),g=n(6242),m=n(6351),p={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function j(t,i){if(t>24)return i.setWinLines||!1;switch(t){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}!function(t){t[t.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",t[t.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(r=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));var y=function(){function t(t,i,n,s){this._t=t,this.ln=i,this.kt=n,this.li=s,this.Yh=new Uint32Array(0)}return t.prototype.hook=function(t){this.Yh=new Uint32Array(0)},t.prototype.put=function(t,i,n){this.Yh=f.concat(this.Yh,t.subarray(i,n))},t.prototype.unhook=function(t){if(!t)return this.Yh=new Uint32Array(0),!0;var i=a.utf32ToString(this.Yh);switch(this.Yh=new Uint32Array(0),i){case'"q':this.ln.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this.ln.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var n=this._t.buffer.scrollTop+1+";"+(this._t.buffer.scrollBottom+1)+"r";this.ln.triggerDataEvent(h.C0.ESC+"P1$r"+n+h.C0.ESC+"\\");break;case"m":this.ln.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var s={block:2,underline:4,bar:6}[this.li.options.cursorStyle];s-=this.li.options.cursorBlink?1:0,this.ln.triggerDataEvent(h.C0.ESC+"P1$r"+s+" q"+h.C0.ESC+"\\");break;default:this.kt.debug("Unknown DCS $q %s",i),this.ln.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},t}(),_=function(t){function i(i,n,s,e,r,c,f,d,w){void 0===w&&(w=new u.EscapeSequenceParser);var m=t.call(this)||this;m._t=i,m.Fh=n,m.ln=s,m.Wh=e,m.kt=r,m.li=c,m.Rn=f,m.Mt=d,m.cs=w,m.Qh=new Uint32Array(4096),m.Xh=new a.StringToUtf32,m.Zh=new a.Utf8ToUtf32,m.Qs=new b.CellData,m.io="",m.no="",m.so=[],m.eo=[],m.ro=l.DEFAULT_ATTR_DATA.clone(),m.ho=l.DEFAULT_ATTR_DATA.clone(),m.oo=new v.EventEmitter,m.uo=new v.EventEmitter,m.co=new v.EventEmitter,m.fo=new v.EventEmitter,m.ao=new v.EventEmitter,m.lo=new v.EventEmitter,m.vo=new v.EventEmitter,m.do=new v.EventEmitter,m.Wi=new v.EventEmitter,m.Lh=new v.EventEmitter,m.Tn=new v.EventEmitter,m.Hi=new v.EventEmitter,m.bo=new v.EventEmitter,m.register(m.cs),m.cs.setCsiHandlerFallback((function(t,i){m.kt.debug("Unknown CSI code: ",{identifier:m.cs.identToString(t),params:i.toArray()})})),m.cs.setEscHandlerFallback((function(t){m.kt.debug("Unknown ESC code: ",{identifier:m.cs.identToString(t)})})),m.cs.setExecuteHandlerFallback((function(t){m.kt.debug("Unknown EXECUTE code: ",{code:t})})),m.cs.setOscHandlerFallback((function(t,i,n){m.kt.debug("Unknown OSC code: ",{identifier:t,action:i,data:n})})),m.cs.setDcsHandlerFallback((function(t,i,n){"HOOK"===i&&(n=n.toArray()),m.kt.debug("Unknown DCS code: ",{identifier:m.cs.identToString(t),action:i,payload:n})})),m.cs.setPrintHandler((function(t,i,n){return m.print(t,i,n)})),m.cs.registerCsiHandler({final:"@"},(function(t){return m.insertChars(t)})),m.cs.registerCsiHandler({intermediates:" ",final:"@"},(function(t){return m.scrollLeft(t)})),m.cs.registerCsiHandler({final:"A"},(function(t){return m.cursorUp(t)})),m.cs.registerCsiHandler({intermediates:" ",final:"A"},(function(t){return m.scrollRight(t)})),m.cs.registerCsiHandler({final:"B"},(function(t){return m.cursorDown(t)})),m.cs.registerCsiHandler({final:"C"},(function(t){return m.cursorForward(t)})),m.cs.registerCsiHandler({final:"D"},(function(t){return m.cursorBackward(t)})),m.cs.registerCsiHandler({final:"E"},(function(t){return m.cursorNextLine(t)})),m.cs.registerCsiHandler({final:"F"},(function(t){return m.cursorPrecedingLine(t)})),m.cs.registerCsiHandler({final:"G"},(function(t){return m.cursorCharAbsolute(t)})),m.cs.registerCsiHandler({final:"H"},(function(t){return m.cursorPosition(t)})),m.cs.registerCsiHandler({final:"I"},(function(t){return m.cursorForwardTab(t)})),m.cs.registerCsiHandler({final:"J"},(function(t){return m.eraseInDisplay(t)})),m.cs.registerCsiHandler({prefix:"?",final:"J"},(function(t){return m.eraseInDisplay(t)})),m.cs.registerCsiHandler({final:"K"},(function(t){return m.eraseInLine(t)})),m.cs.registerCsiHandler({prefix:"?",final:"K"},(function(t){return m.eraseInLine(t)})),m.cs.registerCsiHandler({final:"L"},(function(t){return m.insertLines(t)})),m.cs.registerCsiHandler({final:"M"},(function(t){return m.deleteLines(t)})),m.cs.registerCsiHandler({final:"P"},(function(t){return m.deleteChars(t)})),m.cs.registerCsiHandler({final:"S"},(function(t){return m.scrollUp(t)})),m.cs.registerCsiHandler({final:"T"},(function(t){return m.scrollDown(t)})),m.cs.registerCsiHandler({final:"X"},(function(t){return m.eraseChars(t)})),m.cs.registerCsiHandler({final:"Z"},(function(t){return m.cursorBackwardTab(t)})),m.cs.registerCsiHandler({final:"`"},(function(t){return m.charPosAbsolute(t)})),m.cs.registerCsiHandler({final:"a"},(function(t){return m.hPositionRelative(t)})),m.cs.registerCsiHandler({final:"b"},(function(t){return m.repeatPrecedingCharacter(t)})),m.cs.registerCsiHandler({final:"c"},(function(t){return m.sendDeviceAttributesPrimary(t)})),m.cs.registerCsiHandler({prefix:">",final:"c"},(function(t){return m.sendDeviceAttributesSecondary(t)})),m.cs.registerCsiHandler({final:"d"},(function(t){return m.linePosAbsolute(t)})),m.cs.registerCsiHandler({final:"e"},(function(t){return m.vPositionRelative(t)})),m.cs.registerCsiHandler({final:"f"},(function(t){return m.hVPosition(t)})),m.cs.registerCsiHandler({final:"g"},(function(t){return m.tabClear(t)})),m.cs.registerCsiHandler({final:"h"},(function(t){return m.setMode(t)})),m.cs.registerCsiHandler({prefix:"?",final:"h"},(function(t){return m.setModePrivate(t)})),m.cs.registerCsiHandler({final:"l"},(function(t){return m.resetMode(t)})),m.cs.registerCsiHandler({prefix:"?",final:"l"},(function(t){return m.resetModePrivate(t)})),m.cs.registerCsiHandler({final:"m"},(function(t){return m.charAttributes(t)})),m.cs.registerCsiHandler({final:"n"},(function(t){return m.deviceStatus(t)})),m.cs.registerCsiHandler({prefix:"?",final:"n"},(function(t){return m.deviceStatusPrivate(t)})),m.cs.registerCsiHandler({intermediates:"!",final:"p"},(function(t){return m.softReset(t)})),m.cs.registerCsiHandler({intermediates:" ",final:"q"},(function(t){return m.setCursorStyle(t)})),m.cs.registerCsiHandler({final:"r"},(function(t){return m.setScrollRegion(t)})),m.cs.registerCsiHandler({final:"s"},(function(t){return m.saveCursor(t)})),m.cs.registerCsiHandler({final:"t"},(function(t){return m.windowOptions(t)})),m.cs.registerCsiHandler({final:"u"},(function(t){return m.restoreCursor(t)})),m.cs.registerCsiHandler({intermediates:"'",final:"}"},(function(t){return m.insertColumns(t)})),m.cs.registerCsiHandler({intermediates:"'",final:"~"},(function(t){return m.deleteColumns(t)})),m.cs.setExecuteHandler(h.C0.BEL,(function(){return m.bell()})),m.cs.setExecuteHandler(h.C0.LF,(function(){return m.lineFeed()})),m.cs.setExecuteHandler(h.C0.VT,(function(){return m.lineFeed()})),m.cs.setExecuteHandler(h.C0.FF,(function(){return m.lineFeed()})),m.cs.setExecuteHandler(h.C0.CR,(function(){return m.carriageReturn()})),m.cs.setExecuteHandler(h.C0.BS,(function(){return m.backspace()})),m.cs.setExecuteHandler(h.C0.HT,(function(){return m.tab()})),m.cs.setExecuteHandler(h.C0.SO,(function(){return m.shiftOut()})),m.cs.setExecuteHandler(h.C0.SI,(function(){return m.shiftIn()})),m.cs.setExecuteHandler(h.C1.IND,(function(){return m.index()})),m.cs.setExecuteHandler(h.C1.NEL,(function(){return m.nextLine()})),m.cs.setExecuteHandler(h.C1.HTS,(function(){return m.tabSet()})),m.cs.registerOscHandler(0,new g.OscHandler((function(t){return m.setTitle(t),m.setIconName(t),!0}))),m.cs.registerOscHandler(1,new g.OscHandler((function(t){return m.setIconName(t)}))),m.cs.registerOscHandler(2,new g.OscHandler((function(t){return m.setTitle(t)}))),m.cs.registerOscHandler(4,new g.OscHandler((function(t){return m.setAnsiColor(t)}))),m.cs.registerEscHandler({final:"7"},(function(){return m.saveCursor()})),m.cs.registerEscHandler({final:"8"},(function(){return m.restoreCursor()})),m.cs.registerEscHandler({final:"D"},(function(){return m.index()})),m.cs.registerEscHandler({final:"E"},(function(){return m.nextLine()})),m.cs.registerEscHandler({final:"H"},(function(){return m.tabSet()})),m.cs.registerEscHandler({final:"M"},(function(){return m.reverseIndex()})),m.cs.registerEscHandler({final:"="},(function(){return m.keypadApplicationMode()})),m.cs.registerEscHandler({final:">"},(function(){return m.keypadNumericMode()})),m.cs.registerEscHandler({final:"c"},(function(){return m.fullReset()})),m.cs.registerEscHandler({final:"n"},(function(){return m.setgLevel(2)})),m.cs.registerEscHandler({final:"o"},(function(){return m.setgLevel(3)})),m.cs.registerEscHandler({final:"|"},(function(){return m.setgLevel(3)})),m.cs.registerEscHandler({final:"}"},(function(){return m.setgLevel(2)})),m.cs.registerEscHandler({final:"~"},(function(){return m.setgLevel(1)})),m.cs.registerEscHandler({intermediates:"%",final:"@"},(function(){return m.selectDefaultCharset()})),m.cs.registerEscHandler({intermediates:"%",final:"G"},(function(){return m.selectDefaultCharset()}));var p=function(t){O.cs.registerEscHandler({intermediates:"(",final:t},(function(){return m.selectCharset("("+t)})),O.cs.registerEscHandler({intermediates:")",final:t},(function(){return m.selectCharset(")"+t)})),O.cs.registerEscHandler({intermediates:"*",final:t},(function(){return m.selectCharset("*"+t)})),O.cs.registerEscHandler({intermediates:"+",final:t},(function(){return m.selectCharset("+"+t)})),O.cs.registerEscHandler({intermediates:"-",final:t},(function(){return m.selectCharset("-"+t)})),O.cs.registerEscHandler({intermediates:".",final:t},(function(){return m.selectCharset("."+t)})),O.cs.registerEscHandler({intermediates:"/",final:t},(function(){return m.selectCharset("/"+t)}))},O=this;for(var j in o.CHARSETS)p(j);return m.cs.registerEscHandler({intermediates:"#",final:"8"},(function(){return m.screenAlignmentPattern()})),m.cs.setErrorHandler((function(t){return m.kt.error("Parsing error: ",t),t})),m.cs.registerDcsHandler({intermediates:"$",final:"q"},new y(m._t,m.ln,m.kt,m.li)),m}return e(i,t),Object.defineProperty(i.prototype,"onRequestBell",{get:function(){return this.oo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRefreshRows",{get:function(){return this.uo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestReset",{get:function(){return this.co.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestScroll",{get:function(){return this.fo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestSyncScrollBar",{get:function(){return this.ao.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestWindowsOptionsReport",{get:function(){return this.lo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this.vo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this.do.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this.Wi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this.Lh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this.Tn.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this.Hi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onAnsiColorChange",{get:function(){return this.bo.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.parse=function(t){var i=this._t.buffer,n=i.x,s=i.y;if(this.kt.debug("parsing data",t),this.Qh.length<t.length&&this.Qh.length<O&&(this.Qh=new Uint32Array(Math.min(t.length,O))),this.Wh.clearRange(),t.length>O)for(var e=0;e<t.length;e+=O){var r=e+O<t.length?e+O:t.length,h="string"==typeof t?this.Xh.decode(t.substring(e,r),this.Qh):this.Zh.decode(t.subarray(e,r),this.Qh);this.cs.parse(this.Qh,h)}else h="string"==typeof t?this.Xh.decode(t,this.Qh):this.Zh.decode(t,this.Qh),this.cs.parse(this.Qh,h);(i=this._t.buffer).x===n&&i.y===s||this.Wi.fire(),this.uo.fire(this.Wh.start,this.Wh.end)},i.prototype.print=function(t,i,n){var s,e,r=this._t.buffer,h=this.Fh.charset,o=this.li.options.screenReaderMode,u=this._t.cols,c=this.ln.decPrivateModes.wraparound,f=this.ln.modes.insertMode,l=this.ro,v=r.lines.get(r.ybase+r.y);this.Wh.markDirty(r.y),r.x&&n-i>0&&2===v.getWidth(r.x-1)&&v.setCellFromCodePoint(r.x-1,0,1,l.fg,l.bg,l.extended);for(var b=i;b<n;++b){if(s=t[b],e=this.Mt.wcwidth(s),s<127&&h){var w=h[String.fromCharCode(s)];w&&(s=w.charCodeAt(0))}if(o&&this.vo.fire(a.stringFromCodePoint(s)),e||!r.x){if(r.x+e-1>=u)if(c){for(;r.x<u;)v.setCellFromCodePoint(r.x++,0,1,l.fg,l.bg,l.extended);r.x=0,r.y++,r.y===r.scrollBottom+1?(r.y--,this.fo.fire(this.wo(),!0)):(r.y>=this._t.rows&&(r.y=this._t.rows-1),r.lines.get(r.ybase+r.y).isWrapped=!0),v=r.lines.get(r.ybase+r.y)}else if(r.x=u-1,2===e)continue;if(f&&(v.insertCells(r.x,e,r.getNullCell(l),l),2===v.getWidth(u-1)&&v.setCellFromCodePoint(u-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,l.fg,l.bg,l.extended)),v.setCellFromCodePoint(r.x++,s,e,l.fg,l.bg,l.extended),e>0)for(;--e;)v.setCellFromCodePoint(r.x++,0,0,l.fg,l.bg,l.extended)}else v.getWidth(r.x-1)?v.addCodepointToCell(r.x-1,s):v.addCodepointToCell(r.x-2,s)}n-i>0&&(v.loadCell(r.x-1,this.Qs),2===this.Qs.getWidth()||this.Qs.getCode()>65535?this.cs.precedingCodepoint=0:this.Qs.isCombined()?this.cs.precedingCodepoint=this.Qs.getChars().charCodeAt(0):this.cs.precedingCodepoint=this.Qs.content),r.x<u&&n-i>0&&0===v.getWidth(r.x)&&!v.hasContent(r.x)&&v.setCellFromCodePoint(r.x,0,1,l.fg,l.bg,l.extended),this.Wh.markDirty(r.y)},i.prototype.addCsiHandler=function(t,i){var n=this;return"t"!==t.final||t.prefix||t.intermediates?this.cs.registerCsiHandler(t,i):this.cs.registerCsiHandler(t,(function(t){return!j(t.params[0],n.li.options.windowOptions)||i(t)}))},i.prototype.addDcsHandler=function(t,i){return this.cs.registerDcsHandler(t,new m.DcsHandler(i))},i.prototype.addEscHandler=function(t,i){return this.cs.registerEscHandler(t,i)},i.prototype.addOscHandler=function(t,i){return this.cs.registerOscHandler(t,new g.OscHandler(i))},i.prototype.bell=function(){return this.oo.fire(),!0},i.prototype.lineFeed=function(){var t=this._t.buffer;return this.Wh.markDirty(t.y),this.li.options.convertEol&&(t.x=0),t.y++,t.y===t.scrollBottom+1?(t.y--,this.fo.fire(this.wo())):t.y>=this._t.rows&&(t.y=this._t.rows-1),t.x>=this._t.cols&&t.x--,this.Wh.markDirty(t.y),this.Lh.fire(),!0},i.prototype.carriageReturn=function(){return this._t.buffer.x=0,!0},i.prototype.backspace=function(){var t,i=this._t.buffer;if(!this.ln.decPrivateModes.reverseWraparound)return this.mo(),i.x>0&&i.x--,!0;if(this.mo(this._t.cols),i.x>0)i.x--;else if(0===i.x&&i.y>i.scrollTop&&i.y<=i.scrollBottom&&(null===(t=i.lines.get(i.ybase+i.y))||void 0===t?void 0:t.isWrapped)){i.lines.get(i.ybase+i.y).isWrapped=!1,i.y--,i.x=this._t.cols-1;var n=i.lines.get(i.ybase+i.y);n.hasWidth(i.x)&&!n.hasContent(i.x)&&i.x--}return this.mo(),!0},i.prototype.tab=function(){if(this._t.buffer.x>=this._t.cols)return!0;var t=this._t.buffer.x;return this._t.buffer.x=this._t.buffer.nextStop(),this.li.options.screenReaderMode&&this.do.fire(this._t.buffer.x-t),!0},i.prototype.shiftOut=function(){return this.Fh.setgLevel(1),!0},i.prototype.shiftIn=function(){return this.Fh.setgLevel(0),!0},i.prototype.mo=function(t){void 0===t&&(t=this._t.cols-1),this._t.buffer.x=Math.min(t,Math.max(0,this._t.buffer.x)),this._t.buffer.y=this.ln.decPrivateModes.origin?Math.min(this._t.buffer.scrollBottom,Math.max(this._t.buffer.scrollTop,this._t.buffer.y)):Math.min(this._t.rows-1,Math.max(0,this._t.buffer.y)),this.Wh.markDirty(this._t.buffer.y)},i.prototype.po=function(t,i){this.Wh.markDirty(this._t.buffer.y),this.ln.decPrivateModes.origin?(this._t.buffer.x=t,this._t.buffer.y=this._t.buffer.scrollTop+i):(this._t.buffer.x=t,this._t.buffer.y=i),this.mo(),this.Wh.markDirty(this._t.buffer.y)},i.prototype.Oo=function(t,i){this.mo(),this.po(this._t.buffer.x+t,this._t.buffer.y+i)},i.prototype.cursorUp=function(t){var i=this._t.buffer.y-this._t.buffer.scrollTop;return i>=0?this.Oo(0,-Math.min(i,t.params[0]||1)):this.Oo(0,-(t.params[0]||1)),!0},i.prototype.cursorDown=function(t){var i=this._t.buffer.scrollBottom-this._t.buffer.y;return i>=0?this.Oo(0,Math.min(i,t.params[0]||1)):this.Oo(0,t.params[0]||1),!0},i.prototype.cursorForward=function(t){return this.Oo(t.params[0]||1,0),!0},i.prototype.cursorBackward=function(t){return this.Oo(-(t.params[0]||1),0),!0},i.prototype.cursorNextLine=function(t){return this.cursorDown(t),this._t.buffer.x=0,!0},i.prototype.cursorPrecedingLine=function(t){return this.cursorUp(t),this._t.buffer.x=0,!0},i.prototype.cursorCharAbsolute=function(t){return this.po((t.params[0]||1)-1,this._t.buffer.y),!0},i.prototype.cursorPosition=function(t){return this.po(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0},i.prototype.charPosAbsolute=function(t){return this.po((t.params[0]||1)-1,this._t.buffer.y),!0},i.prototype.hPositionRelative=function(t){return this.Oo(t.params[0]||1,0),!0},i.prototype.linePosAbsolute=function(t){return this.po(this._t.buffer.x,(t.params[0]||1)-1),!0},i.prototype.vPositionRelative=function(t){return this.Oo(0,t.params[0]||1),!0},i.prototype.hVPosition=function(t){return this.cursorPosition(t),!0},i.prototype.tabClear=function(t){var i=t.params[0];return 0===i?delete this._t.buffer.tabs[this._t.buffer.x]:3===i&&(this._t.buffer.tabs={}),!0},i.prototype.cursorForwardTab=function(t){if(this._t.buffer.x>=this._t.cols)return!0;for(var i=t.params[0]||1;i--;)this._t.buffer.x=this._t.buffer.nextStop();return!0},i.prototype.cursorBackwardTab=function(t){if(this._t.buffer.x>=this._t.cols)return!0;for(var i=t.params[0]||1,n=this._t.buffer;i--;)n.x=n.prevStop();return!0},i.prototype.jo=function(t,i,n,s){void 0===s&&(s=!1);var e=this._t.buffer.lines.get(this._t.buffer.ybase+t);e.replaceCells(i,n,this._t.buffer.getNullCell(this.wo()),this.wo()),s&&(e.isWrapped=!1)},i.prototype.yo=function(t){var i=this._t.buffer.lines.get(this._t.buffer.ybase+t);i.fill(this._t.buffer.getNullCell(this.wo())),i.isWrapped=!1},i.prototype.eraseInDisplay=function(t){var i;switch(this.mo(),t.params[0]){case 0:for(i=this._t.buffer.y,this.Wh.markDirty(i),this.jo(i++,this._t.buffer.x,this._t.cols,0===this._t.buffer.x);i<this._t.rows;i++)this.yo(i);this.Wh.markDirty(i);break;case 1:for(i=this._t.buffer.y,this.Wh.markDirty(i),this.jo(i,0,this._t.buffer.x+1,!0),this._t.buffer.x+1>=this._t.cols&&(this._t.buffer.lines.get(i+1).isWrapped=!1);i--;)this.yo(i);this.Wh.markDirty(0);break;case 2:for(i=this._t.rows,this.Wh.markDirty(i-1);i--;)this.yo(i);this.Wh.markDirty(0);break;case 3:var n=this._t.buffer.lines.length-this._t.rows;n>0&&(this._t.buffer.lines.trimStart(n),this._t.buffer.ybase=Math.max(this._t.buffer.ybase-n,0),this._t.buffer.ydisp=Math.max(this._t.buffer.ydisp-n,0),this.Tn.fire(0))}return!0},i.prototype.eraseInLine=function(t){switch(this.mo(),t.params[0]){case 0:this.jo(this._t.buffer.y,this._t.buffer.x,this._t.cols);break;case 1:this.jo(this._t.buffer.y,0,this._t.buffer.x+1);break;case 2:this.jo(this._t.buffer.y,0,this._t.cols)}return this.Wh.markDirty(this._t.buffer.y),!0},i.prototype.insertLines=function(t){this.mo();var i=t.params[0]||1,n=this._t.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;for(var s=n.ybase+n.y,e=this._t.rows-1-n.scrollBottom,r=this._t.rows-1+n.ybase-e+1;i--;)n.lines.splice(r-1,1),n.lines.splice(s,0,n.getBlankLine(this.wo()));return this.Wh.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.deleteLines=function(t){this.mo();var i=t.params[0]||1,n=this._t.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;var s,e=n.ybase+n.y;for(s=this._t.rows-1-n.scrollBottom,s=this._t.rows-1+n.ybase-s;i--;)n.lines.splice(e,1),n.lines.splice(s,0,n.getBlankLine(this.wo()));return this.Wh.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.insertChars=function(t){this.mo();var i=this._t.buffer.lines.get(this._t.buffer.ybase+this._t.buffer.y);return i&&(i.insertCells(this._t.buffer.x,t.params[0]||1,this._t.buffer.getNullCell(this.wo()),this.wo()),this.Wh.markDirty(this._t.buffer.y)),!0},i.prototype.deleteChars=function(t){this.mo();var i=this._t.buffer.lines.get(this._t.buffer.ybase+this._t.buffer.y);return i&&(i.deleteCells(this._t.buffer.x,t.params[0]||1,this._t.buffer.getNullCell(this.wo()),this.wo()),this.Wh.markDirty(this._t.buffer.y)),!0},i.prototype.scrollUp=function(t){for(var i=t.params[0]||1,n=this._t.buffer;i--;)n.lines.splice(n.ybase+n.scrollTop,1),n.lines.splice(n.ybase+n.scrollBottom,0,n.getBlankLine(this.wo()));return this.Wh.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollDown=function(t){for(var i=t.params[0]||1,n=this._t.buffer;i--;)n.lines.splice(n.ybase+n.scrollBottom,1),n.lines.splice(n.ybase+n.scrollTop,0,n.getBlankLine(l.DEFAULT_ATTR_DATA));return this.Wh.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollLeft=function(t){var i=this._t.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.deleteCells(0,n,i.getNullCell(this.wo()),this.wo()),e.isWrapped=!1}return this.Wh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.scrollRight=function(t){var i=this._t.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.insertCells(0,n,i.getNullCell(this.wo()),this.wo()),e.isWrapped=!1}return this.Wh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.insertColumns=function(t){var i=this._t.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=this._t.buffer.lines.get(i.ybase+s);e.insertCells(i.x,n,i.getNullCell(this.wo()),this.wo()),e.isWrapped=!1}return this.Wh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.deleteColumns=function(t){var i=this._t.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.deleteCells(i.x,n,i.getNullCell(this.wo()),this.wo()),e.isWrapped=!1}return this.Wh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.eraseChars=function(t){this.mo();var i=this._t.buffer.lines.get(this._t.buffer.ybase+this._t.buffer.y);return i&&(i.replaceCells(this._t.buffer.x,this._t.buffer.x+(t.params[0]||1),this._t.buffer.getNullCell(this.wo()),this.wo()),this.Wh.markDirty(this._t.buffer.y)),!0},i.prototype.repeatPrecedingCharacter=function(t){if(!this.cs.precedingCodepoint)return!0;for(var i=t.params[0]||1,n=new Uint32Array(i),s=0;s<i;++s)n[s]=this.cs.precedingCodepoint;return this.print(n,0,n.length),!0},i.prototype.sendDeviceAttributesPrimary=function(t){return t.params[0]>0||(this._o("xterm")||this._o("rxvt-unicode")||this._o("screen")?this.ln.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._o("linux")&&this.ln.triggerDataEvent(h.C0.ESC+"[?6c")),!0},i.prototype.sendDeviceAttributesSecondary=function(t){return t.params[0]>0||(this._o("xterm")?this.ln.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._o("rxvt-unicode")?this.ln.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._o("linux")?this.ln.triggerDataEvent(t.params[0]+"c"):this._o("screen")&&this.ln.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},i.prototype._o=function(t){return 0===(this.li.options.termName+"").indexOf(t)},i.prototype.setMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this.ln.modes.insertMode=!0}return!0},i.prototype.setModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this.ln.decPrivateModes.applicationCursorKeys=!0;break;case 2:this.Fh.setgCharset(0,o.DEFAULT_CHARSET),this.Fh.setgCharset(1,o.DEFAULT_CHARSET),this.Fh.setgCharset(2,o.DEFAULT_CHARSET),this.Fh.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this.li.options.windowOptions.setWinLines&&(this._t.resize(132,this._t.rows),this.co.fire());break;case 6:this.ln.decPrivateModes.origin=!0,this.po(0,0);break;case 7:this.ln.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this.ln.decPrivateModes.reverseWraparound=!0;break;case 66:this.kt.debug("Serial port requested application keypad."),this.ln.decPrivateModes.applicationKeypad=!0,this.ao.fire();break;case 9:this.Rn.activeProtocol="X10";break;case 1e3:this.Rn.activeProtocol="VT200";break;case 1002:this.Rn.activeProtocol="DRAG";break;case 1003:this.Rn.activeProtocol="ANY";break;case 1004:this.ln.decPrivateModes.sendFocus=!0;break;case 1005:this.kt.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this.Rn.activeEncoding="SGR";break;case 1015:this.kt.debug("DECSET 1015 not supported (see #2507)");break;case 25:this.ln.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._t.buffers.activateAltBuffer(this.wo()),this.ln.isCursorInitialized=!0,this.uo.fire(0,this._t.rows-1),this.ao.fire();break;case 2004:this.ln.decPrivateModes.bracketedPasteMode=!0}return!0},i.prototype.resetMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this.ln.modes.insertMode=!1}return!0},i.prototype.resetModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this.ln.decPrivateModes.applicationCursorKeys=!1;break;case 3:this.li.options.windowOptions.setWinLines&&(this._t.resize(80,this._t.rows),this.co.fire());break;case 6:this.ln.decPrivateModes.origin=!1,this.po(0,0);break;case 7:this.ln.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this.ln.decPrivateModes.reverseWraparound=!1;break;case 66:this.kt.debug("Switching back to normal keypad."),this.ln.decPrivateModes.applicationKeypad=!1,this.ao.fire();break;case 9:case 1e3:case 1002:case 1003:this.Rn.activeProtocol="NONE";break;case 1004:this.ln.decPrivateModes.sendFocus=!1;break;case 1005:this.kt.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this.Rn.activeEncoding="DEFAULT";break;case 1015:this.kt.debug("DECRST 1015 not supported (see #2507)");break;case 25:this.ln.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._t.buffers.activateNormalBuffer(),1049===t.params[i]&&this.restoreCursor(),this.ln.isCursorInitialized=!0,this.uo.fire(0,this._t.rows-1),this.ao.fire();break;case 2004:this.ln.decPrivateModes.bracketedPasteMode=!1}return!0},i.prototype.ko=function(t,i,n,s,e){return 2===i?(t|=50331648,t&=-16777216,t|=w.AttributeData.fromColorRGB([n,s,e])):5===i&&(t&=-50331904,t|=33554432|255&n),t},i.prototype.Mo=function(t,i,n){var s=[0,0,-1,0,0,0],e=0,r=0;do{if(s[r+e]=t.params[i+r],t.hasSubParams(i+r)){var h=t.getSubParams(i+r),o=0;do{5===s[1]&&(e=1),s[r+o+1+e]=h[o]}while(++o<h.length&&o+r+1+e<s.length);break}if(5===s[1]&&r+e>=2||2===s[1]&&r+e>=5)break;s[1]&&(e=1)}while(++r+i<t.length&&r+e<s.length);for(o=2;o<s.length;++o)-1===s[o]&&(s[o]=0);switch(s[0]){case 38:n.fg=this.ko(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this.ko(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this.ko(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return r},i.prototype.qo=function(t,i){i.extended=i.extended.clone(),(!~t||t>5)&&(t=1),i.extended.underlineStyle=t,i.fg|=268435456,0===t&&(i.fg&=-268435457),i.updateExtended()},i.prototype.charAttributes=function(t){if(1===t.length&&0===t.params[0])return this.ro.fg=l.DEFAULT_ATTR_DATA.fg,this.ro.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var i,n=t.length,s=this.ro,e=0;e<n;e++)(i=t.params[e])>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?(s.fg=l.DEFAULT_ATTR_DATA.fg,s.bg=l.DEFAULT_ATTR_DATA.bg):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this.qo(t.hasSubParams(e)?t.getSubParams(e)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:2===i?s.bg|=134217728:21===i?this.qo(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?s.fg&=-268435457:25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:39===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?e+=this.Mo(t,e,s):59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this.kt.debug("Unknown SGR attribute: %d.",i);return!0},i.prototype.deviceStatus=function(t){switch(t.params[0]){case 5:this.ln.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var i=this._t.buffer.y+1,n=this._t.buffer.x+1;this.ln.triggerDataEvent(h.C0.ESC+"["+i+";"+n+"R")}return!0},i.prototype.deviceStatusPrivate=function(t){switch(t.params[0]){case 6:var i=this._t.buffer.y+1,n=this._t.buffer.x+1;this.ln.triggerDataEvent(h.C0.ESC+"[?"+i+";"+n+"R")}return!0},i.prototype.softReset=function(t){return this.ln.isCursorHidden=!1,this.ao.fire(),this._t.buffer.scrollTop=0,this._t.buffer.scrollBottom=this._t.rows-1,this.ro=l.DEFAULT_ATTR_DATA.clone(),this.ln.reset(),this.Fh.reset(),this._t.buffer.savedX=0,this._t.buffer.savedY=this._t.buffer.ybase,this._t.buffer.savedCurAttrData.fg=this.ro.fg,this._t.buffer.savedCurAttrData.bg=this.ro.bg,this._t.buffer.savedCharset=this.Fh.charset,this.ln.decPrivateModes.origin=!1,!0},i.prototype.setCursorStyle=function(t){var i=t.params[0]||1;switch(i){case 1:case 2:this.li.options.cursorStyle="block";break;case 3:case 4:this.li.options.cursorStyle="underline";break;case 5:case 6:this.li.options.cursorStyle="bar"}var n=i%2==1;return this.li.options.cursorBlink=n,!0},i.prototype.setScrollRegion=function(t){var i,n=t.params[0]||1;return(t.length<2||(i=t.params[1])>this._t.rows||0===i)&&(i=this._t.rows),i>n&&(this._t.buffer.scrollTop=n-1,this._t.buffer.scrollBottom=i-1,this.po(0,0)),!0},i.prototype.windowOptions=function(t){if(!j(t.params[0],this.li.options.windowOptions))return!0;var i=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:2!==i&&this.lo.fire(r.GET_WIN_SIZE_PIXELS);break;case 16:this.lo.fire(r.GET_CELL_SIZE_PIXELS);break;case 18:this._t&&this.ln.triggerDataEvent(h.C0.ESC+"[8;"+this._t.rows+";"+this._t.cols+"t");break;case 22:0!==i&&2!==i||(this.so.push(this.io),this.so.length>10&&this.so.shift()),0!==i&&1!==i||(this.eo.push(this.no),this.eo.length>10&&this.eo.shift());break;case 23:0!==i&&2!==i||this.so.length&&this.setTitle(this.so.pop()),0!==i&&1!==i||this.eo.length&&this.setIconName(this.eo.pop())}return!0},i.prototype.saveCursor=function(t){return this._t.buffer.savedX=this._t.buffer.x,this._t.buffer.savedY=this._t.buffer.ybase+this._t.buffer.y,this._t.buffer.savedCurAttrData.fg=this.ro.fg,this._t.buffer.savedCurAttrData.bg=this.ro.bg,this._t.buffer.savedCharset=this.Fh.charset,!0},i.prototype.restoreCursor=function(t){return this._t.buffer.x=this._t.buffer.savedX||0,this._t.buffer.y=Math.max(this._t.buffer.savedY-this._t.buffer.ybase,0),this.ro.fg=this._t.buffer.savedCurAttrData.fg,this.ro.bg=this._t.buffer.savedCurAttrData.bg,this.Fh.charset=this.xo,this._t.buffer.savedCharset&&(this.Fh.charset=this._t.buffer.savedCharset),this.mo(),!0},i.prototype.setTitle=function(t){return this.io=t,this.Hi.fire(t),!0},i.prototype.setIconName=function(t){return this.no=t,!0},i.prototype.Ao=function(t){for(var i,n={colors:[]},s=/(\d+);rgb:([0-9a-f]{2})\/([0-9a-f]{2})\/([0-9a-f]{2})/gi;null!==(i=s.exec(t));)n.colors.push({colorIndex:parseInt(i[1]),red:parseInt(i[2],16),green:parseInt(i[3],16),blue:parseInt(i[4],16)});return 0===n.colors.length?null:n},i.prototype.setAnsiColor=function(t){var i=this.Ao(t);return i?this.bo.fire(i):this.kt.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+t),!0},i.prototype.nextLine=function(){return this._t.buffer.x=0,this.index(),!0},i.prototype.keypadApplicationMode=function(){return this.kt.debug("Serial port requested application keypad."),this.ln.decPrivateModes.applicationKeypad=!0,this.ao.fire(),!0},i.prototype.keypadNumericMode=function(){return this.kt.debug("Switching back to normal keypad."),this.ln.decPrivateModes.applicationKeypad=!1,this.ao.fire(),!0},i.prototype.selectDefaultCharset=function(){return this.Fh.setgLevel(0),this.Fh.setgCharset(0,o.DEFAULT_CHARSET),!0},i.prototype.selectCharset=function(t){return 2!==t.length?(this.selectDefaultCharset(),!0):("/"===t[0]||this.Fh.setgCharset(p[t[0]],o.CHARSETS[t[1]]||o.DEFAULT_CHARSET),!0)},i.prototype.index=function(){this.mo();var t=this._t.buffer;return this._t.buffer.y++,t.y===t.scrollBottom+1?(t.y--,this.fo.fire(this.wo())):t.y>=this._t.rows&&(t.y=this._t.rows-1),this.mo(),!0},i.prototype.tabSet=function(){return this._t.buffer.tabs[this._t.buffer.x]=!0,!0},i.prototype.reverseIndex=function(){this.mo();var t=this._t.buffer;if(t.y===t.scrollTop){var i=t.scrollBottom-t.scrollTop;t.lines.shiftElements(t.ybase+t.y,i,1),t.lines.set(t.ybase+t.y,t.getBlankLine(this.wo())),this.Wh.markRangeDirty(t.scrollTop,t.scrollBottom)}else t.y--,this.mo();return!0},i.prototype.fullReset=function(){return this.cs.reset(),this.co.fire(),!0},i.prototype.reset=function(){this.ro=l.DEFAULT_ATTR_DATA.clone(),this.ho=l.DEFAULT_ATTR_DATA.clone()},i.prototype.wo=function(){return this.ho.bg&=-67108864,this.ho.bg|=67108863&this.ro.bg,this.ho},i.prototype.setgLevel=function(t){return this.Fh.setgLevel(t),!0},i.prototype.screenAlignmentPattern=function(){var t=new b.CellData;t.content=1<<22|"E".charCodeAt(0),t.fg=this.ro.fg,t.bg=this.ro.bg;var i=this._t.buffer;this.po(0,0);for(var n=0;n<this._t.rows;++n){var s=i.ybase+i.y+n,e=i.lines.get(s);e&&(e.fill(t),e.isWrapped=!1)}return this.Wh.markAllDirty(),this.po(0,0),!0},i}(c.Disposable);i.InputHandler=_},844:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.Disposable=void 0;var n=function(){function t(){this.So=[],this.sn=!1}return t.prototype.dispose=function(){this.sn=!0;for(var t=0,i=this.So;t<i.length;t++)i[t].dispose();this.So.length=0},t.prototype.register=function(t){return this.So.push(t),t},t.prototype.unregister=function(t){var i=this.So.indexOf(t);-1!==i&&this.So.splice(i,1)},t}();function s(t){for(var i=0,n=t;i<n.length;i++)n[i].dispose();t.length=0}i.Disposable=n,i.disposeArray=s,i.getDisposeArrayDisposable=function(t){return{dispose:function(){return s(t)}}}},6114:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.isSafari=i.isFirefox=void 0;var n="undefined"==typeof navigator,s=n?"node":navigator.userAgent,e=n?"node":navigator.platform;i.isFirefox=s.includes("Firefox"),i.isSafari=/^((?!chrome|android).)*safari/i.test(s),i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(e),i.isIpad="iPad"===e,i.isIphone="iPhone"===e,i.isWindows=["Windows","Win16","Win32","WinCE"].includes(e),i.isLinux=e.indexOf("Linux")>=0},8273:(t,i)=>{function n(t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),n>=t.length)return t;n=(t.length+n)%t.length,s=s>=t.length?t.length:(t.length+s)%t.length;for(var e=n;e<s;++e)t[e]=i;return t}Object.defineProperty(i,"I",{value:!0}),i.concat=i.fillFallback=i.fill=void 0,i.fill=function(t,i,s,e){return t.fill?t.fill(i,s,e):n(t,i,s,e)},i.fillFallback=n,i.concat=function(t,i){var n=new t.constructor(t.length+i.length);return n.set(t),n.set(i,t.length),n}},9282:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.updateWindowsModeWrappedState=void 0;var s=n(643);i.updateWindowsModeWrappedState=function(t){var i=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1),n=null==i?void 0:i.get(t.cols-1),e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);e&&n&&(e.isWrapped=n[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&n[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;var n=function(){function t(){this.fg=0,this.bg=0,this.extended=new s}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var i=new t;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},t.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},t.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},t.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},t.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},t.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},t.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},t.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},t}();i.AttributeData=n;var s=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=-1),this.underlineStyle=t,this.underlineColor=i}return t.prototype.clone=function(){return new t(this.underlineStyle,this.underlineColor)},t.prototype.isEmpty=function(){return 0===this.underlineStyle},t}();i.ExtendedAttrs=s},9092:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;var s=n(6349),e=n(8437),r=n(511),h=n(643),o=n(4634),u=n(4863),c=n(7116),f=n(3734);i.MAX_BUFFER_SIZE=4294967295;var a=function(){function t(t,i,n){this.Ro=t,this.li=i,this._t=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=e.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this.Co=r.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this.Eo=r.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this.To=this._t.cols,this.Io=this._t.rows,this.lines=new s.CircularList(this.Uo(this.Io)),this.scrollTop=0,this.scrollBottom=this.Io-1,this.setupTabStops()}return t.prototype.getNullCell=function(t){return t?(this.Co.fg=t.fg,this.Co.bg=t.bg,this.Co.extended=t.extended):(this.Co.fg=0,this.Co.bg=0,this.Co.extended=new f.ExtendedAttrs),this.Co},t.prototype.getWhitespaceCell=function(t){return t?(this.Eo.fg=t.fg,this.Eo.bg=t.bg,this.Eo.extended=t.extended):(this.Eo.fg=0,this.Eo.bg=0,this.Eo.extended=new f.ExtendedAttrs),this.Eo},t.prototype.getBlankLine=function(t,i){return new e.BufferLine(this._t.cols,this.getNullCell(t),i)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this.Ro&&this.lines.maxLength>this.Io},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this.Io},enumerable:!1,configurable:!0}),t.prototype.Uo=function(t){if(!this.Ro)return t;var n=t+this.li.options.scrollback;return n>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:n},t.prototype.fillViewportRows=function(t){if(0===this.lines.length){void 0===t&&(t=e.DEFAULT_ATTR_DATA);for(var i=this.Io;i--;)this.lines.push(this.getBlankLine(t))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this.Uo(this.Io)),this.scrollTop=0,this.scrollBottom=this.Io-1,this.setupTabStops()},t.prototype.resize=function(t,i){var n=this.getNullCell(e.DEFAULT_ATTR_DATA),s=this.Uo(i);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this.To<t)for(var r=0;r<this.lines.length;r++)this.lines.get(r).resize(t,n);var h=0;if(this.Io<i)for(var o=this.Io;o<i;o++)this.lines.length<i+this.ybase&&(this.li.options.windowsMode?this.lines.push(new e.BufferLine(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new e.BufferLine(t,n)));else for(o=this.Io;o>i;o--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){var u=this.lines.length-s;u>0&&(this.lines.trimStart(u),this.ybase=Math.max(this.ybase-u,0),this.ydisp=Math.max(this.ydisp-u,0),this.savedY=Math.max(this.savedY-u,0)),this.lines.maxLength=s}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this.Bo&&(this.Po(t,i),this.To>t))for(r=0;r<this.lines.length;r++)this.lines.get(r).resize(t,n);this.To=t,this.Io=i},Object.defineProperty(t.prototype,"Bo",{get:function(){return this.Ro&&!this.li.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype.Po=function(t,i){this.To!==t&&(t>this.To?this.No(t,i):this.Do(t,i))},t.prototype.No=function(t,i){var n=o.reflowLargerGetLinesToRemove(this.lines,this.To,t,this.ybase+this.y,this.getNullCell(e.DEFAULT_ATTR_DATA));if(n.length>0){var s=o.reflowLargerCreateNewLayout(this.lines,n);o.reflowLargerApplyNewLayout(this.lines,s.layout),this.Lo(t,i,s.countRemoved)}},t.prototype.Lo=function(t,i,n){for(var s=this.getNullCell(e.DEFAULT_ATTR_DATA),r=n;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new e.BufferLine(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)},t.prototype.Do=function(t,i){for(var n=this.getNullCell(e.DEFAULT_ATTR_DATA),s=[],r=0,h=this.lines.length-1;h>=0;h--){var u=this.lines.get(h);if(!(!u||!u.isWrapped&&u.getTrimmedLength()<=t)){for(var c=[u];u.isWrapped&&h>0;)u=this.lines.get(--h),c.unshift(u);var f=this.ybase+this.y;if(!(f>=h&&f<h+c.length)){var a,l=c[c.length-1].getTrimmedLength(),v=o.reflowSmallerGetNewLineLengths(c,this.To,t),d=v.length-c.length;a=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+d):Math.max(0,this.lines.length-this.lines.maxLength+d);for(var b=[],w=0;w<d;w++){var g=this.getBlankLine(e.DEFAULT_ATTR_DATA,!0);b.push(g)}b.length>0&&(s.push({start:h+c.length+r,newLines:b}),r+=b.length),c.push.apply(c,b);var m=v.length-1,p=v[m];0===p&&(p=v[--m]);for(var O=c.length-d-1,j=l;O>=0;){var y=Math.min(j,p);if(c[m].copyCellsFrom(c[O],j-y,p-y,y,!0),0==(p-=y)&&(p=v[--m]),0==(j-=y)){O--;var _=Math.max(O,0);j=o.getWrappedLineTrimmedLength(c,_,this.To)}}for(w=0;w<c.length;w++)v[w]<t&&c[w].setCell(v[w],n);for(var k=d-a;k-- >0;)0===this.ybase?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+d,this.ybase+i-1)}}}if(s.length>0){var M=[],q=[];for(w=0;w<this.lines.length;w++)q.push(this.lines.get(w));var x=this.lines.length,A=x-1,S=0,R=s[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);var C=0;for(w=Math.min(this.lines.maxLength-1,x+r-1);w>=0;w--)if(R&&R.start>A+C){for(var E=R.newLines.length-1;E>=0;E--)this.lines.set(w--,R.newLines[E]);w++,M.push({index:A+1,amount:R.newLines.length}),C+=R.newLines.length,R=s[++S]}else this.lines.set(w,q[A--]);var T=0;for(w=M.length-1;w>=0;w--)M[w].index+=T,this.lines.onInsertEmitter.fire(M[w]),T+=M[w].amount;var I=Math.max(0,x+r-this.lines.maxLength);I>0&&this.lines.onTrimEmitter.fire(I)}},t.prototype.stringIndexToBufferIndex=function(t,i,n){for(void 0===n&&(n=!1);i;){var s=this.lines.get(t);if(!s)return[-1,-1];for(var e=n?s.getTrimmedLength():s.length,r=0;r<e;++r)if(s.get(r)[h.CHAR_DATA_WIDTH_INDEX]&&(i-=s.get(r)[h.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,r];t++}return[t,0]},t.prototype.translateBufferLineToString=function(t,i,n,s){void 0===n&&(n=0);var e=this.lines.get(t);return e?e.translateToString(i,n,s):""},t.prototype.getWrappedRangeForLine=function(t){for(var i=t,n=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}},t.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this.To;t+=this.li.options.tabStopWidth)this.tabs[t]=!0},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this.To?this.To-1:t<0?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.To;);return t>=this.To?this.To-1:t<0?0:t},t.prototype.addMarker=function(t){var i=this,n=new u.Marker(t);return this.markers.push(n),n.register(this.lines.onTrim((function(t){n.line-=t,n.line<0&&n.dispose()}))),n.register(this.lines.onInsert((function(t){n.line>=t.index&&(n.line+=t.amount)}))),n.register(this.lines.onDelete((function(t){n.line>=t.index&&n.line<t.index+t.amount&&n.dispose(),n.line>t.index&&(n.line-=t.amount)}))),n.register(n.onDispose((function(){return i.Wo(n)}))),n},t.prototype.Wo=function(t){this.markers.splice(this.markers.indexOf(t),1)},t.prototype.iterator=function(t,i,n,s,e){return new l(this,t,i,n,s,e)},t}();i.Buffer=a;var l=function(){function t(t,i,n,s,e,r){void 0===n&&(n=0),void 0===s&&(s=t.lines.length),void 0===e&&(e=0),void 0===r&&(r=0),this.fs=t,this.Fo=i,this.Uh=n,this.Ko=s,this.Ho=e,this.zo=r,this.Uh<0&&(this.Uh=0),this.Ko>this.fs.lines.length&&(this.Ko=this.fs.lines.length),this.Go=this.Uh}return t.prototype.hasNext=function(){return this.Go<this.Ko},t.prototype.next=function(){var t=this.fs.getWrappedRangeForLine(this.Go);t.first<this.Uh-this.Ho&&(t.first=this.Uh-this.Ho),t.last>this.Ko+this.zo&&(t.last=this.Ko+this.zo),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this.fs.lines.length);for(var i="",n=t.first;n<=t.last;++n)i+=this.fs.translateBufferLineToString(n,this.Fo);return this.Go=t.last+1,{range:t,content:i}},t}();i.BufferStringIterator=l},8437:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;var s=n(482),e=n(643),r=n(511),h=n(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var o=function(){function t(t,i,n){void 0===n&&(n=!1),this.isWrapped=n,this.$o={},this.Jo={},this.Yh=new Uint32Array(3*t);for(var s=i||r.CellData.fromCharData([0,e.NULL_CELL_CHAR,e.NULL_CELL_WIDTH,e.NULL_CELL_CODE]),h=0;h<t;++h)this.setCell(h,s);this.length=t}return t.prototype.get=function(t){var i=this.Yh[3*t+0],n=2097151&i;return[this.Yh[3*t+1],2097152&i?this.$o[t]:n?s.stringFromCodePoint(n):"",i>>22,2097152&i?this.$o[t].charCodeAt(this.$o[t].length-1):n]},t.prototype.set=function(t,i){this.Yh[3*t+1]=i[e.CHAR_DATA_ATTR_INDEX],i[e.CHAR_DATA_CHAR_INDEX].length>1?(this.$o[t]=i[1],this.Yh[3*t+0]=2097152|t|i[e.CHAR_DATA_WIDTH_INDEX]<<22):this.Yh[3*t+0]=i[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[e.CHAR_DATA_WIDTH_INDEX]<<22},t.prototype.getWidth=function(t){return this.Yh[3*t+0]>>22},t.prototype.hasWidth=function(t){return 12582912&this.Yh[3*t+0]},t.prototype.getFg=function(t){return this.Yh[3*t+1]},t.prototype.getBg=function(t){return this.Yh[3*t+2]},t.prototype.hasContent=function(t){return 4194303&this.Yh[3*t+0]},t.prototype.getCodePoint=function(t){var i=this.Yh[3*t+0];return 2097152&i?this.$o[t].charCodeAt(this.$o[t].length-1):2097151&i},t.prototype.isCombined=function(t){return 2097152&this.Yh[3*t+0]},t.prototype.getString=function(t){var i=this.Yh[3*t+0];return 2097152&i?this.$o[t]:2097151&i?s.stringFromCodePoint(2097151&i):""},t.prototype.loadCell=function(t,i){var n=3*t;return i.content=this.Yh[n+0],i.fg=this.Yh[n+1],i.bg=this.Yh[n+2],2097152&i.content&&(i.combinedData=this.$o[t]),268435456&i.bg&&(i.extended=this.Jo[t]),i},t.prototype.setCell=function(t,i){2097152&i.content&&(this.$o[t]=i.combinedData),268435456&i.bg&&(this.Jo[t]=i.extended),this.Yh[3*t+0]=i.content,this.Yh[3*t+1]=i.fg,this.Yh[3*t+2]=i.bg},t.prototype.setCellFromCodePoint=function(t,i,n,s,e,r){268435456&e&&(this.Jo[t]=r),this.Yh[3*t+0]=i|n<<22,this.Yh[3*t+1]=s,this.Yh[3*t+2]=e},t.prototype.addCodepointToCell=function(t,i){var n=this.Yh[3*t+0];2097152&n?this.$o[t]+=s.stringFromCodePoint(i):(2097151&n?(this.$o[t]=s.stringFromCodePoint(2097151&n)+s.stringFromCodePoint(i),n&=-2097152,n|=2097152):n=i|1<<22,this.Yh[3*t+0]=n)},t.prototype.insertCells=function(t,i,n,s){if((t%=this.length)&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),i<this.length-t){for(var e=new r.CellData,o=this.length-t-i-1;o>=0;--o)this.setCell(t+i+o,this.loadCell(t+o,e));for(o=0;o<i;++o)this.setCell(t+o,n)}else for(o=t;o<this.length;++o)this.setCell(o,n);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs)},t.prototype.deleteCells=function(t,i,n,s){if(t%=this.length,i<this.length-t){for(var e=new r.CellData,o=0;o<this.length-t-i;++o)this.setCell(t+o,this.loadCell(t+i+o,e));for(o=this.length-i;o<this.length;++o)this.setCell(o,n)}else for(o=t;o<this.length;++o)this.setCell(o,n);t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),0!==this.getWidth(t)||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs)},t.prototype.replaceCells=function(t,i,n,s){for(t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),i<this.length&&2===this.getWidth(i-1)&&this.setCellFromCodePoint(i,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs);t<i&&t<this.length;)this.setCell(t++,n)},t.prototype.resize=function(t,i){if(t!==this.length){if(t>this.length){var n=new Uint32Array(3*t);this.length&&(3*t<this.Yh.length?n.set(this.Yh.subarray(0,3*t)):n.set(this.Yh)),this.Yh=n;for(var s=this.length;s<t;++s)this.setCell(s,i)}else if(t){(n=new Uint32Array(3*t)).set(this.Yh.subarray(0,3*t)),this.Yh=n;var e=Object.keys(this.$o);for(s=0;s<e.length;s++){var r=parseInt(e[s],10);r>=t&&delete this.$o[r]}}else this.Yh=new Uint32Array(0),this.$o={};this.length=t}},t.prototype.fill=function(t){this.$o={},this.Jo={};for(var i=0;i<this.length;++i)this.setCell(i,t)},t.prototype.copyFrom=function(t){for(var i in this.length!==t.length?this.Yh=new Uint32Array(t.Yh):this.Yh.set(t.Yh),this.length=t.length,this.$o={},t.$o)this.$o[i]=t.$o[i];for(var i in this.Jo={},t.Jo)this.Jo[i]=t.Jo[i];this.isWrapped=t.isWrapped},t.prototype.clone=function(){var i=new t(0);for(var n in i.Yh=new Uint32Array(this.Yh),i.length=this.length,this.$o)i.$o[n]=this.$o[n];for(var n in this.Jo)i.Jo[n]=this.Jo[n];return i.isWrapped=this.isWrapped,i},t.prototype.getTrimmedLength=function(){for(var t=this.length-1;t>=0;--t)if(4194303&this.Yh[3*t+0])return t+(this.Yh[3*t+0]>>22);return 0},t.prototype.copyCellsFrom=function(t,i,n,s,e){var r=t.Yh;if(e)for(var h=s-1;h>=0;h--)for(var o=0;o<3;o++)this.Yh[3*(n+h)+o]=r[3*(i+h)+o];else for(h=0;h<s;h++)for(o=0;o<3;o++)this.Yh[3*(n+h)+o]=r[3*(i+h)+o];var u=Object.keys(t.$o);for(o=0;o<u.length;o++){var c=parseInt(u[o],10);c>=i&&(this.$o[c-i+n]=t.$o[c])}},t.prototype.translateToString=function(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=this.length),t&&(n=Math.min(n,this.getTrimmedLength()));for(var r="";i<n;){var h=this.Yh[3*i+0],o=2097151&h;r+=2097152&h?this.$o[i]:o?s.stringFromCodePoint(o):e.WHITESPACE_CELL_CHAR,i+=h>>22||1}return r},t}();i.BufferLine=o},4634:(t,i)=>{function n(t,i,n){if(i===t.length-1)return t[i].getTrimmedLength();var s=!t[i].hasContent(n-1)&&1===t[i].getWidth(n-1),e=2===t[i+1].getWidth(0);return s&&e?n-1:n}Object.defineProperty(i,"I",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(t,i,s,e,r){for(var h=[],o=0;o<t.length-1;o++){var u=o,c=t.get(++u);if(c.isWrapped){for(var f=[t.get(o)];u<t.length&&c.isWrapped;)f.push(c),c=t.get(++u);if(e>=o&&e<u)o+=f.length-1;else{for(var a=0,l=n(f,a,i),v=1,d=0;v<f.length;){var b=n(f,v,i),w=b-d,g=s-l,m=Math.min(w,g);f[a].copyCellsFrom(f[v],d,l,m,!1),(l+=m)===s&&(a++,l=0),(d+=m)===b&&(v++,d=0),0===l&&0!==a&&2===f[a-1].getWidth(s-1)&&(f[a].copyCellsFrom(f[a-1],s-1,l++,1,!1),f[a-1].setCell(s-1,r))}f[a].replaceCells(l,s,r);for(var p=0,O=f.length-1;O>0&&(O>a||0===f[O].getTrimmedLength());O--)p++;p>0&&(h.push(o+f.length-p),h.push(p)),o+=f.length-1}}}return h},i.reflowLargerCreateNewLayout=function(t,i){for(var n=[],s=0,e=i[s],r=0,h=0;h<t.length;h++)if(e===h){var o=i[++s];t.onDeleteEmitter.fire({index:h-r,amount:o}),h+=o-1,r+=o,e=i[++s]}else n.push(h);return{layout:n,countRemoved:r}},i.reflowLargerApplyNewLayout=function(t,i){for(var n=[],s=0;s<i.length;s++)n.push(t.get(i[s]));for(s=0;s<n.length;s++)t.set(s,n[s]);t.length=i.length},i.reflowSmallerGetNewLineLengths=function(t,i,s){for(var e=[],r=t.map((function(s,e){return n(t,e,i)})).reduce((function(t,i){return t+i})),h=0,o=0,u=0;u<r;){if(r-u<s){e.push(r-u);break}h+=s;var c=n(t,o,i);h>c&&(h-=c,o++);var f=2===t[o].getWidth(h-1);f&&h--;var a=f?s-1:s;e.push(a),u+=a}return e},i.getWrappedLineTrimmedLength=n},5295:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.BufferSet=void 0;var r=n(9092),h=n(8460),o=function(t){function i(i,n){var s=t.call(this)||this;return s.li=i,s._t=n,s.eh=s.register(new h.EventEmitter),s.reset(),s}return e(i,t),Object.defineProperty(i.prototype,"onBufferActivate",{get:function(){return this.eh.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.ds=new r.Buffer(!0,this.li,this._t),this.ds.fillViewportRows(),this.Vo=new r.Buffer(!1,this.li,this._t),this.Yo=this.ds,this.setupTabStops()},Object.defineProperty(i.prototype,"alt",{get:function(){return this.Vo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this.ds},enumerable:!1,configurable:!0}),i.prototype.activateNormalBuffer=function(){this.Yo!==this.ds&&(this.ds.x=this.Vo.x,this.ds.y=this.Vo.y,this.Vo.clear(),this.Yo=this.ds,this.eh.fire({activeBuffer:this.ds,inactiveBuffer:this.Vo}))},i.prototype.activateAltBuffer=function(t){this.Yo!==this.Vo&&(this.Vo.fillViewportRows(t),this.Vo.x=this.ds.x,this.Vo.y=this.ds.y,this.Yo=this.Vo,this.eh.fire({activeBuffer:this.Vo,inactiveBuffer:this.ds}))},i.prototype.resize=function(t,i){this.ds.resize(t,i),this.Vo.resize(t,i)},i.prototype.setupTabStops=function(t){this.ds.setupTabStops(t),this.Vo.setupTabStops(t)},i}(n(844).Disposable);i.BufferSet=o},511:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.CellData=void 0;var r=n(482),h=n(643),o=n(3734),u=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.content=0,i.fg=0,i.bg=0,i.extended=new o.ExtendedAttrs,i.combinedData="",i}return e(i,t),i.fromCharData=function(t){var n=new i;return n.setFromCharData(t),n},i.prototype.isCombined=function(){return 2097152&this.content},i.prototype.getWidth=function(){return this.content>>22},i.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?r.stringFromCodePoint(2097151&this.content):""},i.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},i.prototype.setFromCharData=function(t){this.fg=t[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var i=!1;if(t[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(2===t[h.CHAR_DATA_CHAR_INDEX].length){var n=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){var s=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(n-55296)+s-56320+65536|t[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=t[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[h.CHAR_DATA_WIDTH_INDEX]<<22)},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(o.AttributeData);i.CellData=u},643:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=256,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.Marker=void 0;var r=n(8460),h=function(t){function i(n){var s=t.call(this)||this;return s.line=n,s.ge=i.Qo++,s.isDisposed=!1,s.Xo=new r.EventEmitter,s}return e(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this.ge},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onDispose",{get:function(){return this.Xo.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this.Xo.fire(),t.prototype.dispose.call(this))},i.Qo=1,i}(n(844).Disposable);i.Marker=h},7116:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},i.CHARSETS.A={"#":"Â£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},i.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},i.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},i.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},i.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},i.CHARSETS.H=i.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",Zo:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(t,i)=>{var n,s;Object.defineProperty(i,"I",{value:!0}),i.C1=i.C0=void 0,(s=i.C0||(i.C0={})).NUL="\0",s.SOH="",s.STX="",s.ETX="",s.EOT="",s.ENQ="",s.ACK="",s.BEL="",s.BS="\b",s.HT="\t",s.LF="\n",s.VT="\v",s.FF="\f",s.CR="\r",s.SO="",s.SI="",s.DLE="",s.DC1="",s.DC2="",s.DC3="",s.DC4="",s.NAK="",s.SYN="",s.ETB="",s.CAN="",s.EM="",s.SUB="",s.ESC="",s.FS="",s.GS="",s.RS="",s.US="",s.SP=" ",s.DEL="",(n=i.C1||(i.C1={})).PAD="Â",n.HOP="Â",n.BPH="Â",n.NBH="Â",n.IND="Â",n.NEL="Â",n.SSA="Â",n.ESA="Â",n.HTS="Â",n.HTJ="Â",n.VTS="Â",n.PLD="Â",n.PLU="Â",n.RI="Â",n.SS2="Â",n.SS3="Â",n.DCS="Â",n.PU1="Â",n.PU2="Â",n.STS="Â",n.CCH="Â",n.MW="Â",n.SPA="Â",n.EPA="Â",n.SOS="Â",n.SGCI="Â",n.SCI="Â",n.CSI="Â",n.ST="Â",n.OSC="Â",n.PM="Â",n.APC="Â"},7399:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.evaluateKeyboardEvent=void 0;var s=n(2584),e={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(t,i,n,r){var h={type:0,cancel:!1,key:void 0},o=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:"UIKeyInputUpArrow"===t.key?h.key=i?s.C0.ESC+"OA":s.C0.ESC+"[A":"UIKeyInputLeftArrow"===t.key?h.key=i?s.C0.ESC+"OD":s.C0.ESC+"[D":"UIKeyInputRightArrow"===t.key?h.key=i?s.C0.ESC+"OC":s.C0.ESC+"[C":"UIKeyInputDownArrow"===t.key&&(h.key=i?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:if(t.shiftKey){h.key=s.C0.BS;break}if(t.altKey){h.key=s.C0.ESC+s.C0.DEL;break}h.key=s.C0.DEL;break;case 9:if(t.shiftKey){h.key=s.C0.ESC+"[Z";break}h.key=s.C0.HT,h.cancel=!0;break;case 13:h.key=t.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,h.cancel=!0;break;case 27:h.key=s.C0.ESC,t.altKey&&(h.key=s.C0.ESC+s.C0.ESC),h.cancel=!0;break;case 37:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"D",h.key===s.C0.ESC+"[1;3D"&&(h.key=s.C0.ESC+(n?"b":"[1;5D"))):h.key=i?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"C",h.key===s.C0.ESC+"[1;3C"&&(h.key=s.C0.ESC+(n?"f":"[1;5C"))):h.key=i?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"A",n||h.key!==s.C0.ESC+"[1;3A"||(h.key=s.C0.ESC+"[1;5A")):h.key=i?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"B",n||h.key!==s.C0.ESC+"[1;3B"||(h.key=s.C0.ESC+"[1;5B")):h.key=i?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:t.shiftKey||t.ctrlKey||(h.key=s.C0.ESC+"[2~");break;case 46:h.key=o?s.C0.ESC+"[3;"+(o+1)+"~":s.C0.ESC+"[3~";break;case 36:h.key=o?s.C0.ESC+"[1;"+(o+1)+"H":i?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:h.key=o?s.C0.ESC+"[1;"+(o+1)+"F":i?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:t.shiftKey?h.type=2:h.key=s.C0.ESC+"[5~";break;case 34:t.shiftKey?h.type=3:h.key=s.C0.ESC+"[6~";break;case 112:h.key=o?s.C0.ESC+"[1;"+(o+1)+"P":s.C0.ESC+"OP";break;case 113:h.key=o?s.C0.ESC+"[1;"+(o+1)+"Q":s.C0.ESC+"OQ";break;case 114:h.key=o?s.C0.ESC+"[1;"+(o+1)+"R":s.C0.ESC+"OR";break;case 115:h.key=o?s.C0.ESC+"[1;"+(o+1)+"S":s.C0.ESC+"OS";break;case 116:h.key=o?s.C0.ESC+"[15;"+(o+1)+"~":s.C0.ESC+"[15~";break;case 117:h.key=o?s.C0.ESC+"[17;"+(o+1)+"~":s.C0.ESC+"[17~";break;case 118:h.key=o?s.C0.ESC+"[18;"+(o+1)+"~":s.C0.ESC+"[18~";break;case 119:h.key=o?s.C0.ESC+"[19;"+(o+1)+"~":s.C0.ESC+"[19~";break;case 120:h.key=o?s.C0.ESC+"[20;"+(o+1)+"~":s.C0.ESC+"[20~";break;case 121:h.key=o?s.C0.ESC+"[21;"+(o+1)+"~":s.C0.ESC+"[21~";break;case 122:h.key=o?s.C0.ESC+"[23;"+(o+1)+"~":s.C0.ESC+"[23~";break;case 123:h.key=o?s.C0.ESC+"[24;"+(o+1)+"~":s.C0.ESC+"[24~";break;default:if(!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)if(n&&!r||!t.altKey||t.metaKey)!n||t.altKey||t.ctrlKey||t.shiftKey||!t.metaKey?t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&1===t.key.length?h.key=t.key:t.key&&t.ctrlKey&&"_"===t.key&&(h.key=s.C0.US):65===t.keyCode&&(h.type=1);else{var u=e[t.keyCode],c=u&&u[t.shiftKey?1:0];if(c)h.key=s.C0.ESC+c;else if(t.keyCode>=65&&t.keyCode<=90){var f=t.ctrlKey?t.keyCode-64:t.keyCode+32;h.key=s.C0.ESC+String.fromCharCode(f)}}else t.keyCode>=65&&t.keyCode<=90?h.key=String.fromCharCode(t.keyCode-64):32===t.keyCode?h.key=s.C0.NUL:t.keyCode>=51&&t.keyCode<=55?h.key=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?h.key=s.C0.DEL:219===t.keyCode?h.key=s.C0.ESC:220===t.keyCode?h.key=s.C0.FS:221===t.keyCode&&(h.key=s.C0.GS)}return h}},482:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},i.utf32ToString=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);for(var s="",e=i;e<n;++e){var r=t[e];r>65535?(r-=65536,s+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):s+=String.fromCharCode(r)}return s};var n=function(){function t(){this.tu=0}return t.prototype.clear=function(){this.tu=0},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var s=0,e=0;this.tu&&(56320<=(o=t.charCodeAt(e++))&&o<=57343?i[s++]=1024*(this.tu-55296)+o-56320+65536:(i[s++]=this.tu,i[s++]=o),this.tu=0);for(var r=e;r<n;++r){var h=t.charCodeAt(r);if(55296<=h&&h<=56319){if(++r>=n)return this.tu=h,s;var o;56320<=(o=t.charCodeAt(r))&&o<=57343?i[s++]=1024*(h-55296)+o-56320+65536:(i[s++]=h,i[s++]=o)}else 65279!==h&&(i[s++]=h)}return s},t}();i.StringToUtf32=n;var s=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var s,e,r,h,o=0,u=0,c=0;if(this.interim[0]){var f=!1,a=this.interim[0];a&=192==(224&a)?31:224==(240&a)?15:7;for(var l=0,v=void 0;(v=63&this.interim[++l])&&l<4;)a<<=6,a|=v;for(var d=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,b=d-l;c<b;){if(c>=n)return 0;if(128!=(192&(v=t[c++]))){c--,f=!0;break}this.interim[l++]=v,a<<=6,a|=63&v}f||(2===d?a<128?c--:i[o++]=a:3===d?a<2048||a>=55296&&a<=57343||65279===a||(i[o++]=a):a<65536||a>1114111||(i[o++]=a)),this.interim.fill(0)}for(var w=n-4,g=c;g<n;){for(;!(!(g<w)||128&(s=t[g])||128&(e=t[g+1])||128&(r=t[g+2])||128&(h=t[g+3]));)i[o++]=s,i[o++]=e,i[o++]=r,i[o++]=h,g+=4;if((s=t[g++])<128)i[o++]=s;else if(192==(224&s)){if(g>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[g++]))){g--;continue}if((u=(31&s)<<6|63&e)<128){g--;continue}i[o++]=u}else if(224==(240&s)){if(g>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[g++]))){g--;continue}if(g>=n)return this.interim[0]=s,this.interim[1]=e,o;if(128!=(192&(r=t[g++]))){g--;continue}if((u=(15&s)<<12|(63&e)<<6|63&r)<2048||u>=55296&&u<=57343||65279===u)continue;i[o++]=u}else if(240==(248&s)){if(g>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[g++]))){g--;continue}if(g>=n)return this.interim[0]=s,this.interim[1]=e,o;if(128!=(192&(r=t[g++]))){g--;continue}if(g>=n)return this.interim[0]=s,this.interim[1]=e,this.interim[2]=r,o;if(128!=(192&(h=t[g++]))){g--;continue}if((u=(7&s)<<18|(63&e)<<12|(63&r)<<6|63&h)<65536||u>1114111)continue;i[o++]=u}}return o},t}();i.Utf8ToUtf32=s},225:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.UnicodeV6=void 0;var s,e=n(8273),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],o=function(){function t(){if(this.version="6",!s){s=new Uint8Array(65536),e.fill(s,1),s[0]=0,e.fill(s,0,1,32),e.fill(s,0,127,160),e.fill(s,2,4352,4448),s[9001]=2,s[9002]=2,e.fill(s,2,11904,42192),s[12351]=1,e.fill(s,2,44032,55204),e.fill(s,2,63744,64256),e.fill(s,2,65040,65050),e.fill(s,2,65072,65136),e.fill(s,2,65280,65377),e.fill(s,2,65504,65511);for(var t=0;t<r.length;++t)e.fill(s,0,r[t][0],r[t][1]+1)}}return t.prototype.wcwidth=function(t){return t<32?0:t<127?1:t<65536?s[t]:function(t,i){var n,s=0,e=i.length-1;if(t<i[0][0]||t>i[e][1])return!1;for(;e>=s;)if(t>i[n=s+e>>1][1])s=n+1;else{if(!(t<i[n][0]))return!0;e=n-1}return!1}(t,h)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1},t}();i.UnicodeV6=o},5981:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.WriteBuffer=void 0;var n=function(){function t(t){this.iu=t,this.Kh=[],this.nu=[],this.su=0,this.eu=0}return t.prototype.writeSync=function(t){if(this.Kh.length){for(var i=this.eu;i<this.Kh.length;++i){var n=this.Kh[i],s=this.nu[i];this.iu(n),s&&s()}this.Kh=[],this.nu=[],this.su=0,this.eu=2147483647}this.iu(t)},t.prototype.write=function(t,i){var n=this;if(this.su>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this.Kh.length||(this.eu=0,setTimeout((function(){return n.ru()}))),this.su+=t.length,this.Kh.push(t),this.nu.push(i)},t.prototype.ru=function(){for(var t=this,i=Date.now();this.Kh.length>this.eu;){var n=this.Kh[this.eu],s=this.nu[this.eu];if(this.eu++,this.iu(n),this.su-=n.length,s&&s(),Date.now()-i>=12)break}this.Kh.length>this.eu?(this.eu>50&&(this.Kh=this.Kh.slice(this.eu),this.nu=this.nu.slice(this.eu),this.eu=0),setTimeout((function(){return t.ru()}),0)):(this.Kh=[],this.nu=[],this.su=0,this.eu=0)},t}();i.WriteBuffer=n},5770:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.DcsHandler=i.DcsParser=void 0;var s=n(482),e=n(8742),r=n(5770),h=[],o=function(){function t(){this.hu=Object.create(null),this.ou=h,this.uu=0,this.cu=function(){}}return t.prototype.dispose=function(){this.hu=Object.create(null),this.cu=function(){},this.ou=h},t.prototype.registerHandler=function(t,i){void 0===this.hu[t]&&(this.hu[t]=[]);var n=this.hu[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this.hu[t]&&delete this.hu[t]},t.prototype.setHandlerFallback=function(t){this.cu=t},t.prototype.reset=function(){this.ou.length&&this.unhook(!1),this.ou=h,this.uu=0},t.prototype.hook=function(t,i){if(this.reset(),this.uu=t,this.ou=this.hu[t]||h,this.ou.length)for(var n=this.ou.length-1;n>=0;n--)this.ou[n].hook(i);else this.cu(this.uu,"HOOK",i)},t.prototype.put=function(t,i,n){if(this.ou.length)for(var e=this.ou.length-1;e>=0;e--)this.ou[e].put(t,i,n);else this.cu(this.uu,"PUT",s.utf32ToString(t,i,n))},t.prototype.unhook=function(t){if(this.ou.length){for(var i=this.ou.length-1;i>=0&&!this.ou[i].unhook(t);i--);for(i--;i>=0;i--)this.ou[i].unhook(!1)}else this.cu(this.uu,"UNHOOK",t);this.ou=h,this.uu=0},t}();i.DcsParser=o;var u=new e.Params;u.addParam(0);var c=function(){function t(t){this.fu=t,this.Yh="",this.au=u,this.lu=!1}return t.prototype.hook=function(t){this.au=t.length>1||t.params[0]?t.clone():u,this.Yh="",this.lu=!1},t.prototype.put=function(t,i,n){this.lu||(this.Yh+=s.utf32ToString(t,i,n),this.Yh.length>r.PAYLOAD_LIMIT&&(this.Yh="",this.lu=!0))},t.prototype.unhook=function(t){var i=!1;return this.lu?i=!1:t&&(i=this.fu(this.Yh,this.au)),this.au=u,this.Yh="",this.lu=!1,i},t}();i.DcsHandler=c},2015:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"I",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;var r=n(844),h=n(8273),o=n(8742),u=n(6242),c=n(6351),f=function(){function t(t){this.table=new Uint8Array(t)}return t.prototype.setDefault=function(t,i){h.fill(this.table,t<<4|i)},t.prototype.add=function(t,i,n,s){this.table[i<<8|t]=n<<4|s},t.prototype.addMany=function(t,i,n,s){for(var e=0;e<t.length;e++)this.table[i<<8|t[e]]=n<<4|s},t}();i.TransitionTable=f;var a=160;i.VT500_TRANSITION_TABLE=function(){var t=new f(4095),i=Array.apply(null,Array(256)).map((function(t,i){return i})),n=function(t,n){return i.slice(t,n)},s=n(32,127),e=n(0,24);e.push(25),e.push.apply(e,n(28,32));var r,h=n(0,14);for(r in t.setDefault(1,0),t.addMany(s,0,2,0),h)t.addMany([24,26,153,154],r,3,0),t.addMany(n(128,144),r,3,0),t.addMany(n(144,152),r,3,0),t.add(156,r,0,0),t.add(27,r,11,1),t.add(157,r,4,8),t.addMany([152,158,159],r,0,7),t.add(155,r,11,3),t.add(144,r,11,9);return t.addMany(e,0,3,0),t.addMany(e,1,3,1),t.add(127,1,0,1),t.addMany(e,8,0,8),t.addMany(e,3,3,3),t.add(127,3,0,3),t.addMany(e,4,3,4),t.add(127,4,0,4),t.addMany(e,6,3,6),t.addMany(e,5,3,5),t.add(127,5,0,5),t.addMany(e,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(e,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(e,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(e,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(e,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(e,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(e,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(a,0,2,0),t.add(a,8,5,8),t.add(a,6,0,6),t.add(a,11,0,11),t.add(a,13,13,13),t}();var l=function(t){function n(n){void 0===n&&(n=i.VT500_TRANSITION_TABLE);var s=t.call(this)||this;return s.vu=n,s.initialState=0,s.currentState=s.initialState,s.au=new o.Params,s.au.addParam(0),s.du=0,s.precedingCodepoint=0,s.bu=function(t,i,n){},s.wu=function(t){},s.gu=function(t,i){},s.mu=function(t){},s.pu=function(t){return t},s.Ou=s.bu,s.ju=Object.create(null),s.yu=Object.create(null),s._u=Object.create(null),s.ku=new u.OscParser,s.Mu=new c.DcsParser,s.qu=s.pu,s.registerEscHandler({final:"\\"},(function(){return!0})),s}return e(n,t),n.prototype.xu=function(t,i){void 0===i&&(i=[64,126]);var n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=t.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var s=0;s<t.intermediates.length;++s){var e=t.intermediates.charCodeAt(s);if(32>e||e>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=e}}if(1!==t.final.length)throw new Error("final must be a single byte");var r=t.final.charCodeAt(0);if(i[0]>r||r>i[1])throw new Error("final must be in range "+i[0]+" .. "+i[1]);return(n<<=8)|r},n.prototype.identToString=function(t){for(var i=[];t;)i.push(String.fromCharCode(255&t)),t>>=8;return i.reverse().join("")},n.prototype.dispose=function(){this.yu=Object.create(null),this.ju=Object.create(null),this._u=Object.create(null),this.ku.dispose(),this.Mu.dispose()},n.prototype.setPrintHandler=function(t){this.Ou=t},n.prototype.clearPrintHandler=function(){this.Ou=this.bu},n.prototype.registerEscHandler=function(t,i){var n=this.xu(t,[48,126]);void 0===this._u[n]&&(this._u[n]=[]);var s=this._u[n];return s.push(i),{dispose:function(){var t=s.indexOf(i);-1!==t&&s.splice(t,1)}}},n.prototype.clearEscHandler=function(t){this._u[this.xu(t,[48,126])]&&delete this._u[this.xu(t,[48,126])]},n.prototype.setEscHandlerFallback=function(t){this.mu=t},n.prototype.setExecuteHandler=function(t,i){this.ju[t.charCodeAt(0)]=i},n.prototype.clearExecuteHandler=function(t){this.ju[t.charCodeAt(0)]&&delete this.ju[t.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(t){this.wu=t},n.prototype.registerCsiHandler=function(t,i){var n=this.xu(t);void 0===this.yu[n]&&(this.yu[n]=[]);var s=this.yu[n];return s.push(i),{dispose:function(){var t=s.indexOf(i);-1!==t&&s.splice(t,1)}}},n.prototype.clearCsiHandler=function(t){this.yu[this.xu(t)]&&delete this.yu[this.xu(t)]},n.prototype.setCsiHandlerFallback=function(t){this.gu=t},n.prototype.registerDcsHandler=function(t,i){return this.Mu.registerHandler(this.xu(t),i)},n.prototype.clearDcsHandler=function(t){this.Mu.clearHandler(this.xu(t))},n.prototype.setDcsHandlerFallback=function(t){this.Mu.setHandlerFallback(t)},n.prototype.registerOscHandler=function(t,i){return this.ku.registerHandler(t,i)},n.prototype.clearOscHandler=function(t){this.ku.clearHandler(t)},n.prototype.setOscHandlerFallback=function(t){this.ku.setHandlerFallback(t)},n.prototype.setErrorHandler=function(t){this.qu=t},n.prototype.clearErrorHandler=function(){this.qu=this.pu},n.prototype.reset=function(){this.currentState=this.initialState,this.ku.reset(),this.Mu.reset(),this.au.reset(),this.au.addParam(0),this.du=0,this.precedingCodepoint=0},n.prototype.parse=function(t,i){for(var n=0,s=0,e=this.currentState,r=this.ku,h=this.Mu,o=this.du,u=this.au,c=this.vu.table,f=0;f<i;++f){switch((s=c[e<<8|((n=t[f])<160?n:a)])>>4){case 2:for(var l=f+1;;++l){if(l>=i||(n=t[l])<32||n>126&&n<a){this.Ou(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this.Ou(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this.Ou(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this.Ou(t,f,l),f=l-1;break}}break;case 3:this.ju[n]?this.ju[n]():this.wu(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this.qu({position:f,code:n,currentState:e,collect:o,params:u,abort:!1}).abort)return;break;case 7:for(var v=this.yu[o<<8|n],d=v?v.length-1:-1;d>=0&&!v[d](u);d--);d<0&&this.gu(o<<8|n,u),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:u.addParam(0);break;case 58:u.addSubParam(-1);break;default:u.addDigit(n-48)}}while(++f<i&&(n=t[f])>47&&n<60);f--;break;case 9:o<<=8,o|=n;break;case 10:for(var b=this._u[o<<8|n],w=b?b.length-1:-1;w>=0&&!b[w]();w--);w<0&&this.mu(o<<8|n),this.precedingCodepoint=0;break;case 11:u.reset(),u.addParam(0),o=0;break;case 12:h.hook(o<<8|n,u);break;case 13:for(var g=f+1;;++g)if(g>=i||24===(n=t[g])||26===n||27===n||n>127&&n<a){h.put(t,f,g),f=g-1;break}break;case 14:h.unhook(24!==n&&26!==n),27===n&&(s|=1),u.reset(),u.addParam(0),o=0,this.precedingCodepoint=0;break;case 4:r.start();break;case 5:for(var m=f+1;;m++)if(m>=i||(n=t[m])<32||n>127&&n<a){r.put(t,f,m),f=m-1;break}break;case 6:r.end(24!==n&&26!==n),27===n&&(s|=1),u.reset(),u.addParam(0),o=0,this.precedingCodepoint=0}e=15&s}this.du=o,this.currentState=e},n}(r.Disposable);i.EscapeSequenceParser=l},6242:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.OscHandler=i.OscParser=void 0;var s=n(5770),e=n(482),r=[],h=function(){function t(){this.ee=0,this.ou=r,this.ge=-1,this.hu=Object.create(null),this.cu=function(){}}return t.prototype.registerHandler=function(t,i){void 0===this.hu[t]&&(this.hu[t]=[]);var n=this.hu[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this.hu[t]&&delete this.hu[t]},t.prototype.setHandlerFallback=function(t){this.cu=t},t.prototype.dispose=function(){this.hu=Object.create(null),this.cu=function(){},this.ou=r},t.prototype.reset=function(){2===this.ee&&this.end(!1),this.ou=r,this.ge=-1,this.ee=0},t.prototype.Au=function(){if(this.ou=this.hu[this.ge]||r,this.ou.length)for(var t=this.ou.length-1;t>=0;t--)this.ou[t].start();else this.cu(this.ge,"START")},t.prototype.Su=function(t,i,n){if(this.ou.length)for(var s=this.ou.length-1;s>=0;s--)this.ou[s].put(t,i,n);else this.cu(this.ge,"PUT",e.utf32ToString(t,i,n))},t.prototype.Ru=function(t){if(this.ou.length){for(var i=this.ou.length-1;i>=0&&!this.ou[i].end(t);i--);for(i--;i>=0;i--)this.ou[i].end(!1)}else this.cu(this.ge,"END",t)},t.prototype.start=function(){this.reset(),this.ee=1},t.prototype.put=function(t,i,n){if(3!==this.ee){if(1===this.ee)for(;i<n;){var s=t[i++];if(59===s){this.ee=2,this.Au();break}if(s<48||57<s)return void(this.ee=3);-1===this.ge&&(this.ge=0),this.ge=10*this.ge+s-48}2===this.ee&&n-i>0&&this.Su(t,i,n)}},t.prototype.end=function(t){0!==this.ee&&(3!==this.ee&&(1===this.ee&&this.Au(),this.Ru(t)),this.ou=r,this.ge=-1,this.ee=0)},t}();i.OscParser=h;var o=function(){function t(t){this.fu=t,this.Yh="",this.lu=!1}return t.prototype.start=function(){this.Yh="",this.lu=!1},t.prototype.put=function(t,i,n){this.lu||(this.Yh+=e.utf32ToString(t,i,n),this.Yh.length>s.PAYLOAD_LIMIT&&(this.Yh="",this.lu=!0))},t.prototype.end=function(t){var i=!1;return this.lu?i=!1:t&&(i=this.fu(this.Yh)),this.Yh="",this.lu=!1,i},t}();i.OscHandler=o},8742:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.Params=void 0;var n=2147483647,s=function(){function t(t,i){if(void 0===t&&(t=32),void 0===i&&(i=32),this.maxLength=t,this.maxSubParamsLength=i,i>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this.Cu=new Int32Array(i),this.Eu=0,this.Tu=new Uint16Array(t),this.Iu=!1,this.Uu=!1,this.Bu=!1}return t.fromArray=function(i){var n=new t;if(!i.length)return n;for(var s=i[0]instanceof Array?1:0;s<i.length;++s){var e=i[s];if(e instanceof Array)for(var r=0;r<e.length;++r)n.addSubParam(e[r]);else n.addParam(e)}return n},t.prototype.clone=function(){var i=new t(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i.Cu.set(this.Cu),i.Eu=this.Eu,i.Tu.set(this.Tu),i.Iu=this.Iu,i.Uu=this.Uu,i.Bu=this.Bu,i},t.prototype.toArray=function(){for(var t=[],i=0;i<this.length;++i){t.push(this.params[i]);var n=this.Tu[i]>>8,s=255&this.Tu[i];s-n>0&&t.push(Array.prototype.slice.call(this.Cu,n,s))}return t},t.prototype.reset=function(){this.length=0,this.Eu=0,this.Iu=!1,this.Uu=!1,this.Bu=!1},t.prototype.addParam=function(t){if(this.Bu=!1,this.length>=this.maxLength)this.Iu=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this.Tu[this.length]=this.Eu<<8|this.Eu,this.params[this.length++]=t>n?n:t}},t.prototype.addSubParam=function(t){if(this.Bu=!0,this.length)if(this.Iu||this.Eu>=this.maxSubParamsLength)this.Uu=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this.Cu[this.Eu++]=t>n?n:t,this.Tu[this.length-1]++}},t.prototype.hasSubParams=function(t){return(255&this.Tu[t])-(this.Tu[t]>>8)>0},t.prototype.getSubParams=function(t){var i=this.Tu[t]>>8,n=255&this.Tu[t];return n-i>0?this.Cu.subarray(i,n):null},t.prototype.getSubParamsAll=function(){for(var t={},i=0;i<this.length;++i){var n=this.Tu[i]>>8,s=255&this.Tu[i];s-n>0&&(t[i]=this.Cu.slice(n,s))}return t},t.prototype.addDigit=function(t){var i;if(!(this.Iu||!(i=this.Bu?this.Eu:this.length)||this.Bu&&this.Uu)){var s=this.Bu?this.Cu:this.params,e=s[i-1];s[i-1]=~e?Math.min(10*e+t,n):t}},t}();i.Params=s},744:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;var o=n(2585),u=n(5295),c=n(8460),f=n(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;var a=function(t){function n(n){var s=t.call(this)||this;return s.li=n,s.isUserScrolling=!1,s.rt=new c.EventEmitter,s.cols=Math.max(n.options.cols,i.MINIMUM_COLS),s.rows=Math.max(n.options.rows,i.MINIMUM_ROWS),s.buffers=new u.BufferSet(n,s),s}return e(n,t),Object.defineProperty(n.prototype,"onResize",{get:function(){return this.rt.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){t.prototype.dispose.call(this),this.buffers.dispose()},n.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this.rt.fire({cols:t,rows:i})},n.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r([h(0,o.IOptionsService)],n)}(f.Disposable);i.BufferService=a},7994:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.CharsetService=void 0;var n=function(){function t(){this.glevel=0,this.Pu=[]}return t.prototype.reset=function(){this.charset=void 0,this.Pu=[],this.glevel=0},t.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.Pu[t]},t.prototype.setgCharset=function(t,i){this.Pu[t]=i,this.glevel===t&&(this.charset=i)},t}();i.CharsetService=n},1753:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.CoreMouseService=void 0;var r=n(2585),h=n(8460),o={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(t){return 4!==t.button&&1===t.action&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)}},VT200:{events:19,restrict:function(t){return 32!==t.action}},DRAG:{events:23,restrict:function(t){return 32!==t.action||3!==t.button}},ANY:{events:31,restrict:function(t){return!0}}};function u(t,i){var n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return 4===t.button?(n|=64,n|=t.action):(n|=3&t.button,4&t.button&&(n|=64),8&t.button&&(n|=128),32===t.action?n|=32:0!==t.action||i||(n|=3)),n}var c=String.fromCharCode,f={DEFAULT:function(t){var i=[u(t,!1)+32,t.col+32,t.row+32];return i[0]>255||i[1]>255||i[2]>255?"":"[M"+c(i[0])+c(i[1])+c(i[2])},SGR:function(t){var i=0===t.action&&4!==t.button?"m":"M";return"[<"+u(t,!0)+";"+t.col+";"+t.row+i}},a=function(){function t(t,i){this._t=t,this.ln=i,this.Nu={},this.Du={},this.Lu="",this.Wu="",this.Fu=new h.EventEmitter,this.Ku=null;for(var n=0,s=Object.keys(o);n<s.length;n++){var e=s[n];this.addProtocol(e,o[e])}for(var r=0,u=Object.keys(f);r<u.length;r++){var c=u[r];this.addEncoding(c,f[c])}this.reset()}return t.prototype.addProtocol=function(t,i){this.Nu[t]=i},t.prototype.addEncoding=function(t,i){this.Du[t]=i},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this.Lu},set:function(t){if(!this.Nu[t])throw new Error('unknown protocol "'+t+'"');this.Lu=t,this.Fu.fire(this.Nu[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return 0!==this.Nu[this.Lu].events},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this.Wu},set:function(t){if(!this.Du[t])throw new Error('unknown encoding "'+t+'"');this.Wu=t},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this.Ku=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this.Fu.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._t.cols||t.row<0||t.row>=this._t.rows)return!1;if(4===t.button&&32===t.action)return!1;if(3===t.button&&32!==t.action)return!1;if(4!==t.button&&(2===t.action||3===t.action))return!1;if(t.col++,t.row++,32===t.action&&this.Ku&&this.Hu(this.Ku,t))return!1;if(!this.Nu[this.Lu].restrict(t))return!1;var i=this.Du[this.Wu](t);return i&&("DEFAULT"===this.Wu?this.ln.triggerBinaryEvent(i):this.ln.triggerDataEvent(i,!0)),this.Ku=t,!0},t.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},t.prototype.Hu=function(t,i){return t.col===i.col&&t.row===i.row&&t.button===i.button&&t.action===i.action&&t.ctrl===i.ctrl&&t.alt===i.alt&&t.shift===i.shift},s([e(0,r.IBufferService),e(1,r.ICoreService)],t)}();i.CoreMouseService=a},6975:function(t,i,n){var s,e=this&&this.T||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.CoreService=void 0;var o=n(2585),u=n(8460),c=n(1439),f=n(844),a=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),v=function(t){function i(i,n,s,e){var r=t.call(this)||this;return r._t=n,r.kt=s,r.li=e,r.isCursorInitialized=!1,r.isCursorHidden=!1,r.Dh=r.register(new u.EventEmitter),r.zu=r.register(new u.EventEmitter),r.Nh=r.register(new u.EventEmitter),r.Gu=i,r.register({dispose:function(){return r.Gu=void 0}}),r.modes=c.clone(a),r.decPrivateModes=c.clone(l),r}return e(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this.Dh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this.zu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this.Nh.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=c.clone(a),this.decPrivateModes=c.clone(l)},i.prototype.triggerDataEvent=function(t,i){if(void 0===i&&(i=!1),!this.li.options.disableStdin){var n=this._t.buffer;n.ybase!==n.ydisp&&this.Gu(),i&&this.zu.fire(),this.kt.debug('sending data "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this.Dh.fire(t)}},i.prototype.triggerBinaryEvent=function(t){this.li.options.disableStdin||(this.kt.debug('sending binary "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this.Nh.fire(t))},r([h(1,o.IBufferService),h(2,o.ILogService),h(3,o.IOptionsService)],i)}(f.Disposable);i.CoreService=v},3730:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"I",{value:!0}),i.DirtyRowService=void 0;var r=n(2585),h=function(){function t(t){this._t=t,this.clearRange()}return Object.defineProperty(t.prototype,"start",{get:function(){return this.Au},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.Ru},enumerable:!1,configurable:!0}),t.prototype.clearRange=function(){this.Au=this._t.buffer.y,this.Ru=this._t.buffer.y},t.prototype.markDirty=function(t){t<this.Au?this.Au=t:t>this.Ru&&(this.Ru=t)},t.prototype.markRangeDirty=function(t,i){if(t>i){var n=t;t=i,i=n}t<this.Au&&(this.Au=t),i>this.Ru&&(this.Ru=i)},t.prototype.markAllDirty=function(){this.markRangeDirty(0,this._t.rows-1)},s([e(0,r.IBufferService)],t)}();i.DirtyRowService=h},4348:function(t,i,n){var s=this&&this.$u||function(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var s=Array(t),e=0;for(i=0;i<n;i++)for(var r=arguments[i],h=0,o=r.length;h<o;h++,e++)s[e]=r[h];return s};Object.defineProperty(i,"I",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;var e=n(2585),r=n(8343),h=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.Ju=new Map;for(var n=0,s=t;n<s.length;n++){var e=s[n],r=e[0],h=e[1];this.set(r,h)}}return t.prototype.set=function(t,i){var n=this.Ju.get(t);return this.Ju.set(t,i),n},t.prototype.forEach=function(t){this.Ju.forEach((function(i,n){return t(n,i)}))},t.prototype.has=function(t){return this.Ju.has(t)},t.prototype.get=function(t){return this.Ju.get(t)},t}();i.ServiceCollection=h;var o=function(){function t(){this.Vu=new h,this.Vu.set(e.IInstantiationService,this)}return t.prototype.setService=function(t,i){this.Vu.set(t,i)},t.prototype.getService=function(t){return this.Vu.get(t)},t.prototype.createInstance=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=r.getServiceDependencies(t).sort((function(t,i){return t.index-i.index})),h=[],o=0,u=e;o<u.length;o++){var c=u[o],f=this.Vu.get(c.id);if(!f)throw new Error("[createInstance] "+t.name+" depends on UNKNOWN service "+c.id+".");h.push(f)}var a=e.length>0?e[0].index:i.length;if(i.length!==a)throw new Error("[createInstance] First service dependency of "+t.name+" at position "+(a+1)+" conflicts with "+i.length+" static arguments");return new(t.bind.apply(t,s([void 0],s(i,h))))},t}();i.InstantiationService=o},7866:function(t,i,n){var s=this&&this.jt||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.yt||function(t,i){return function(n,s){i(n,s,t)}},r=this&&this.$u||function(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var s=Array(t),e=0;for(i=0;i<n;i++)for(var r=arguments[i],h=0,o=r.length;h<o;h++,e++)s[e]=r[h];return s};Object.defineProperty(i,"I",{value:!0}),i.LogService=i.LogLevel=void 0;var h,o=n(2585);!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.OFF=4]="OFF"}(h=i.LogLevel||(i.LogLevel={}));var u={debug:h.DEBUG,info:h.INFO,warn:h.WARN,error:h.ERROR,off:h.OFF},c=function(){function t(t){var i=this;this.li=t,this.Yu(),this.li.onOptionChange((function(t){"logLevel"===t&&i.Yu()}))}return t.prototype.Yu=function(){this.Qu=u[this.li.options.logLevel]},t.prototype.Xu=function(t){for(var i=0;i<t.length;i++)"function"==typeof t[i]&&(t[i]=t[i]())},t.prototype.Zu=function(t,i,n){this.Xu(n),t.call.apply(t,r([console,"xterm.js: "+i],n))},t.prototype.debug=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.Qu<=h.DEBUG&&this.Zu(console.log,t,i)},t.prototype.info=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.Qu<=h.INFO&&this.Zu(console.info,t,i)},t.prototype.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.Qu<=h.WARN&&this.Zu(console.warn,t,i)},t.prototype.error=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.Qu<=h.ERROR&&this.Zu(console.error,t,i)},s([e(0,o.IOptionsService)],t)}();i.LogService=c},7302:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=i.DEFAULT_BELL_SOUND=void 0;var s=n(8460),e=n(6114),r=n(1439);i.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",i.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:i.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:e.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var h=["normal","bold","100","200","300","400","500","600","700","800","900"],o=["cols","rows"],u=function(){function t(t){this.tc=new s.EventEmitter,this.options=r.clone(i.DEFAULT_OPTIONS);for(var n=0,e=Object.keys(t);n<e.length;n++){var h=e[n];if(h in this.options)try{var o=t[h];this.options[h]=this.ic(h,o)}catch(t){}}}return Object.defineProperty(t.prototype,"onOptionChange",{get:function(){return this.tc.event},enumerable:!1,configurable:!0}),t.prototype.setOption=function(t,n){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');if(o.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==n&&(n=this.ic(t,n),this.options[t]!==n&&(this.options[t]=n,this.tc.fire(t)))},t.prototype.ic=function(t,n){switch(t){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[t]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof n&&1<=n&&n<=1e3)break;n=h.includes(n)?n:i.DEFAULT_OPTIONS[t];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(t+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(t+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(t+" cannot be less than or equal to 0, value: "+n)}return n},t.prototype.getOption=function(t){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return this.options[t]},t}();i.OptionsService=u},8343:(t,i)=>{function n(t,i,n){i.di$target===i?i.di$dependencies.push({id:t,index:n}):(i.di$dependencies=[{id:t,index:n}],i.di$target=i)}Object.defineProperty(i,"I",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(t){return t.di$dependencies||[]},i.createDecorator=function(t){if(i.serviceRegistry.has(t))return i.serviceRegistry.get(t);var s=function(t,i,e){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(s,t,e)};return s.toString=function(){return t},i.serviceRegistry.set(t,s),s}},2585:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.IUnicodeService=i.IOptionsService=i.ILogService=i.IInstantiationService=i.IDirtyRowService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;var s=n(8343);i.IBufferService=s.createDecorator("BufferService"),i.ICoreMouseService=s.createDecorator("CoreMouseService"),i.ICoreService=s.createDecorator("CoreService"),i.ICharsetService=s.createDecorator("CharsetService"),i.IDirtyRowService=s.createDecorator("DirtyRowService"),i.IInstantiationService=s.createDecorator("InstantiationService"),i.ILogService=s.createDecorator("LogService"),i.IOptionsService=s.createDecorator("OptionsService"),i.IUnicodeService=s.createDecorator("UnicodeService")},1480:(t,i,n)=>{Object.defineProperty(i,"I",{value:!0}),i.UnicodeService=void 0;var s=n(8460),e=n(225),r=function(){function t(){this.nc=Object.create(null),this.ou="",this.sc=new s.EventEmitter;var t=new e.UnicodeV6;this.register(t),this.ou=t.version,this.ec=t}return Object.defineProperty(t.prototype,"onChange",{get:function(){return this.sc.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"versions",{get:function(){return Object.keys(this.nc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this.ou},set:function(t){if(!this.nc[t])throw new Error('unknown Unicode version "'+t+'"');this.ou=t,this.ec=this.nc[t],this.sc.fire(t)},enumerable:!1,configurable:!0}),t.prototype.register=function(t){this.nc[t.version]=t},t.prototype.wcwidth=function(t){return this.ec.wcwidth(t)},t.prototype.getStringCellWidth=function(t){for(var i=0,n=t.length,s=0;s<n;++s){var e=t.charCodeAt(s);if(55296<=e&&e<=56319){if(++s>=n)return i+this.wcwidth(e);var r=t.charCodeAt(s);56320<=r&&r<=57343?e=1024*(e-55296)+r-56320+65536:i+=this.wcwidth(r)}i+=this.wcwidth(e)}return i},t}();i.UnicodeService=r}},n={},function t(s){if(n[s])return n[s].exports;var e=n[s]={exports:{}};return i[s].call(e.exports,e,e.exports,t),e.exports}(4389))},t=>{var i,n;self,t.exports=(i={775:(t,i)=>{Object.defineProperty(i,"I",{value:!0}),i.FitAddon=void 0;var n=function(){function t(){}return t.prototype.activate=function(t){this.U=t},t.prototype.dispose=function(){},t.prototype.fit=function(){var t=this.proposeDimensions();if(t&&this.U){var i=this.U.hs;this.U.rows===t.rows&&this.U.cols===t.cols||(i.P.clear(),this.U.resize(t.cols,t.rows))}},t.prototype.proposeDimensions=function(){if(this.U&&this.U.element&&this.U.element.parentElement){var t=this.U.hs;if(0!==t.P.dimensions.actualCellWidth&&0!==t.P.dimensions.actualCellHeight){var i=window.getComputedStyle(this.U.element.parentElement),n=parseInt(i.getPropertyValue("height")),s=Math.max(0,parseInt(i.getPropertyValue("width"))),e=window.getComputedStyle(this.U.element),r=n-(parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom"))),h=s-(parseInt(e.getPropertyValue("padding-right"))+parseInt(e.getPropertyValue("padding-left")))-t.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(h/t.P.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(r/t.P.dimensions.actualCellHeight))}}}},t}();i.FitAddon=n}},n={},function t(s){if(n[s])return n[s].exports;var e=n[s]={exports:{}};return i[s](e,e.exports,t),e.exports}(775))},,(t,i,n)=>{n.r(i),n.d(i,{default:()=>s});const s=n.p+"index.html"},(t,i,n)=>{n.r(i),n.d(i,{default:()=>s});const s=n.p+"xterm.css"}],i={};function n(s){var e=i[s];if(void 0!==e)return e.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,n),r.exports}n.n=t=>{var i=t&&t.I?()=>t.default:()=>t;return n.d(i,{a:i}),i},n.d=(t,i)=>{for(var s in i)n.o(i,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"I",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var i=n.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var s=i.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t=n(2),i=n(3),s=n(1),e=n.n(s);var r=n(0).default;const h=t=>(i,n=null)=>n?(...s)=>{t.emit(i,n(...s))}:(...n)=>{t.emit(i,...n)};class o extends(e()){constructor(t){super(),this.rc=t;const i=h(this);this.rc.onmessage=i("data",(t=>t.data instanceof ArrayBuffer?r.from(t.data):t.data)),this.rc.onclose=i("close"),this.rc.onerror=i("error")}send(t){if(!this.rc||"open"!=this.rc.readyState)throw"Channel is not open, cannot send data";this.rc.send(t)}get label(){return this.rc.label}}class u extends(e()){constructor(t){super();try{this.wrtc=t.wrtc||{RTCPeerConnection,RTCIceCandidate}}catch(t){throw t instanceof ReferenceError?ReferenceError("wrtc implementation must be set when running in nodejs."):t}if(!this.wrtc.RTCPeerConnection)throw ReferenceError("wrtc implementation have incorrect interface.");this.hc=!!t.initiator,this.oc=!!t.trickle,this.uc=!!t.candidate_timeout||0,this.rc=void 0,this.cc=[],this.fc=new this.wrtc.RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]});const i=h(this),n=i("signal"),s=i("channel"),e=async()=>{const t=await this.fc.createOffer();await this.fc.setLocalDescription(t),this.oc&&n(t)},u=()=>{this.rc.onopen=i("connect"),this.rc.onmessage=i("data",(t=>t.data instanceof ArrayBuffer?r.from(t.data):t.data)),this.rc.onclose=i("close"),this.rc.onerror=i("error")};let c=!1;this.signal=async t=>{if(t&&t.type)if("offer"==t.type){await this.fc.setRemoteDescription(t);const i=await this.fc.createAnswer();await this.fc.setLocalDescription(i),this.oc&&n(i)}else if("answer"==t.type)"closed"==this.fc.connectionState||c||(c=!0,await this.fc.setRemoteDescription(t));else if("candidate"==t.type&&"closed"!=this.fc.connectionState)try{const i=new this.wrtc.RTCIceCandidate(t.candidate);this.fc.addIceCandidate(i)}catch(t){}},this.channel=(t="")=>{const i=this.fc.createDataChannel(t);i.onopen=()=>{const t=new o(i);this.cc.push(t),s(t)}},(()=>{let t=!1;this.fc.ondatachannel=t=>{this.rc?t.channel.onopen=()=>{const i=new o(t.channel);this.cc.push(i),s(i)}:(this.rc=t.channel,u())},this.fc.onicecandidate=i=>{i.candidate&&(this.oc||t?n({type:"candidate",candidate:i.candidate.candidate}):setTimeout((()=>{t||(t=!0,n(this.fc.localDescription))}),this.uc))}})(),this.hc&&(this.rc=this.fc.createDataChannel("someName"),u(),e())}send(t,i=100){this.fc&&"disconnected"!=this.fc.connectionState&&(this.rc&&"open"==this.rc.readyState?this.rc.send(t):setTimeout((()=>this.send(t,i+500)),i))}destroy(){if(this.rc)try{this.rc.close()}catch(t){}for(const t of this.cc)try{t.close()}catch(t){}if(this.fc&&"closed"!=this.fc.connectionState)try{this.fc.close(),this.emit("close")}catch(t){}}fingerprint(t){const i=(t?this.fc.localDescription.sdp:this.fc.remoteDescription.sdp).split("\r\n").filter((t=>t.includes("a=fingerprint:"))).map((t=>{const[i,n]=t.replace("a=fingerprint:","").split(" ");return n}));return 1==i.length?i[0]:null}type(t){return t?this.fc.localDescription.type:this.fc.remoteDescription.type}}const c=u;let f=null;{class t extends(e()){constructor(t){super();const i=t=>(...i)=>{this.emit(t,...i)};this.ac=new WebSocket(t),this.ac.onopen=i("open"),this.ac.onmessage=t=>this.emit("message",t.data),this.ac.onclose=i("close"),this.ac.onerror=i("error")}send(...t){this.ac.readyState==this.ac.OPEN&&this.ac.send(...t)}close(...t){this.ac.close(...t)}terminate(){this.ac.close(1e3,"Terminate")}}f=t}const a=f;var l=n(0).default;let v=null;v=t=>{const i=new Uint8Array(t);return window.crypto.getRandomValues(i),d(i)};const d=t=>{for(var i=l.alloc(t.byteLength),n=new Uint8Array(t),s=0;s<i.length;++s)i[s]=n[s];return i},b=t=>l.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_"),w={lc:v,vc:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"==t?i:3&i|8).toString(16)})),dc:(t,i,n)=>{if(null!=(t={IPv4:"ip4",IPv6:"ip6",mdns:"mdns"}[t]))return`/${t}/${i}/udp/${n}`},bc:t=>l.from(t,"base64"),wc:t=>l.from(t,"hex"),gc:b,mc:t=>l.from(t).toString("binary"),Oc:d,jc:t=>{for(var i=new ArrayBuffer(t.length),n=new Uint8Array(i),s=0;s<t.length;++s)n[s]=t[s];return i},yc:()=>"-WP0000-"+b(v(9))};let g=null;g=crypto;const m=void 0===g.subtle?void 0:g.subtle;var p=n(0).default;let O=null;O=async(t,i,n)=>{const s=w.Oc(await m.digest(t,w.jc(i)));return n?s.toString(n):s};const j=async(t,i=null,n=null)=>{i||(i="SHA-256");let s=null;if(t instanceof String||"string"==typeof t?s=w.bc(t):t instanceof Array?s=p.from(t):t instanceof Uint8Array&&(s=t),null==s)return null;let e=await O(i,s,n);"base64"==n&&(e=e.replace(/\+/g,"-").replace(/\//g,"_"));return s.length==e.length?s:e};class y extends(e()){constructor(t){super();{const i={offer_timeout:120,nr_offers:10,generate_offers:!0,peer_id:w.yc(),endpoints:[],always_have_offers:!1,...t};this._c=i.wrtc,this.kc=i.offer_timeout,this.Mc=i.nr_offers,this.qc=i.generate_offers,this.xc=i.peer_id,this.Ac=new Set,this.Sc=i.endpoints,this.Rc=i.always_have_offers,this.Cc=[],this.Ec={},this.Tc={},this.Ic={}}const i=t=>{const i=this.Tc[t];return null!=i&&i.is_connected},n=()=>Object.values(this.Ec).filter((t=>"offer"==t.type(!0))),s=(t,i)=>{t.on("connect",(()=>{t.is_connected||(t.is_connected=!0,delete this.Ec[i],this.Cc=this.Cc.filter((t=>t.offer_id!=i)),null==this.Tc[t.peer_id]?(this.Tc[t.peer_id]=t,(t=>{const i={local:w.dc(t.localFamily,t.localAddress,t.localPort),remote:w.dc(t.remoteFamily,t.remoteAddress,t.remotePort)};i.local=i.local||[...t.candidates.local].sort()[0],i.remote=i.remote||[...t.candidates.remote].sort()[0],t.address=i})(t),this.emit("peer",t)):t.destroy())})),t.on("close",(()=>{if(t.is_connected&&(t.is_connected=!1,this.Tc[t.peer_id]==t&&delete this.Tc[t.peer_id]),t.destroy(),0==this.peers.filter((t=>t.is_connected)).length&&n().length<this.Mc*this.Ac.size)for(const t of this.Ac)d(t)})),t.on("error",(n=>{e(i),t.destroy()}))},e=t=>{if(this.Rc&&this.Cc.length<=1)return f(8e3),void setTimeout((()=>e(t)),1e4);{const i=this.Ec[t];null!=i&&(i.destroy(),delete this.Ec[t])}this.Cc=this.Cc.filter((i=>i.offer_id!=t))},r=t=>{let i=null;for(const n of t)"offer"!=n.type&&"answer"!=n.type||(i=n);for(const n of t)"candidate"==n.type&&(i.sdp+="a="+n.candidate+"\r\n");return i},h=t=>"offer"==t.type||"answer"==t.type?t.sdp.split("\n").filter((t=>t.includes("a=candidate:"))):"candidate"==t.type?["a="+t.candidate]:void 0,o=(t,i,n)=>{let s="remote";n&&(i.forEach((t=>this.emit("candidate",t))),s="local");const e=t.candidates||{remote:[],local:[]},r=e[s];for(let t of i)if(~t.indexOf("a=candidate")){var h=t.split(" "),o=h[4],u=h[5];h[7];const i=/^.*\.local$/.test(o),n=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/.test(o)?"IPv4":i?"mdns":"IPv6";r.push(w.dc(n,o,u))}t.candidates=e},u=async(t,i)=>{let n=[];for(let i=0;i<t&&this.Cc.length>0;i++)n.push(this.Cc.shift());const s=t-n.length;return s>0&&(n=n.concat(await Promise.all(Array.from(Array(s)).map((()=>f(i))).flat()))),n.slice(0,t)},f=async t=>{const i=w.mc(w.lc(20));return setTimeout((()=>e(i)),1e3*this.kc),await new Promise(((n,e)=>{const u=new c({initiator:!0,wrtc:this._c,trickle:!0});u.is_connected=!1;let f=[];s(u,i),u.on("signal",(async s=>{o(u,h(s),!0),f.push(s),"offer"==s.type&&(this.Ec[i]=u,setTimeout((()=>{const t={offer:r(f),offer_id:i};n(t)}),t))}))}))},l=async(t,n,u)=>{const f=t.offer_id,a=t.peer_id;if(i(a))return;if(null!=this.Ec[f])return;setTimeout((()=>e(f)),1e4);const l=new c({initiator:!1,wrtc:this._c,trickle:!0});l.is_connected=!1,l.peer_id=a;let v=[];s(l,f),l.on("signal",(async t=>{if(o(l,h(t),!0),!i(a))if("answer"==t.type&&(this.Ec[f]=l,setTimeout((()=>{const t={answer:r(v),offer_id:f};v=null,n(t)}),u)),null==v){n({answer:t,offer_id:f})}else v.push(t)})),o(l,h(t.offer),!1),l.signal(t.offer)},v=async t=>{if(i(t.peer_id))return void e(t.offer_id);const n=this.Ec[t.offer_id];null!=n&&(n.peer_id=t.peer_id,o(n,h(t.answer),!1),n.signal(t.answer))},d=async(t,i=null)=>{const n=this.Ic[t],s={nr_offers:this.Mc,trickle_timeout:5e3,...i};if(null!=n){const t=this.Sc.map((t=>j(t,"SHA-1","binary")));for await(const i of t){const t=this.qc?await u(s.nr_offers,s.trickle_timeout):[],e={action:"announce",numwant:s.nr_offers,uploaded:0,downloaded:0,left:129302391,info_hash:i,peer_id:this.xc,offers:t},r=null!=s.event?{...e,event:s.event}:e,h=JSON.stringify(r);n.send(h)}}},b=async(t,i)=>{null!=i.offer&&null!=i.offer_id?l(i,(n=>{const s=JSON.stringify({action:"announce",info_hash:i.info_hash,peer_id:this.xc,to_peer_id:i.peer_id,...n});t.send(s)}),150):null!=i.answer&&null!=i.offer_id&&v(i)};this.connectTrackers=t=>{const i=this.Ac;this.Ac=new Set([...this.Ac,...t]);for(const t of this.Ac){if(i.has(t))continue;let n=!1,s=!0;const e=()=>{const i=!this.Ac.has(t);if(n||i)return;const r=new a(t);r.peer_id=this.xc,r.tracker_url=t,r.announce_interval=null,this.Ic[t]=r;const h=()=>d(t),o=()=>{n?(n=!1,r.terminate(),setTimeout(e,5e3),clearInterval(r.announce_interval)):setTimeout(e,12e4),null!=this.Ic[t]&&delete this.Ic[t]};r.on("open",(()=>{n=!0,s&&(d(t,{trickle_timeout:400,nr_offers:1}),s=!1),d(t),this.emit("tracker",r)})),r.on("close",(t=>{o()})),r.on("error",(t=>{})),r.on("message",(t=>{const i=JSON.parse(t);var n;"announce"==i.action&&(null!=i.interval?(n=i.interval,clearInterval(r.announce_interval),r.announce_interval=setInterval(h,1e3*n-5e3)):b(r,i))}))};e()}}}disconnectTrackers(){this.Ac=new Set([]);for(const t of Object.values(this.Ic))t.close()}get peers(){return Object.values(this.Tc)}get endpoints(){return this.Sc}get tracker_urls(){return this.Ac}}const _={Client:y},k=t=>i=>{let n=null;try{n=JSON.parse(i)}catch(t){return}null!=n.protocol&&null!=n.version&&t(n)},M=(t,i)=>{if("string"!=typeof t)throw"role must be string";return JSON.stringify({protocol:"wps",version:"1.0",session:i,role:t})},q={readFile:async(t,i)=>{throw"NotImplemented"},writeFile:async(t,i,n)=>{}},x=(t,i)=>{const n=w.gc(t);return i?`-----BEGIN PUBLIC KEY-----\n${n}\n-----END PUBLIC KEY-----`:`-----BEGIN PRIVATE KEY-----\n${n}\n-----END PRIVATE KEY-----`},A=(t,i)=>{const n=i?"-----BEGIN PUBLIC KEY-----".length:"-----BEGIN PRIVATE KEY-----".length,s=i?"-----END PUBLIC KEY-----".length:"-----END PRIVATE KEY-----".length,e=t.substring(n,t.length-s);return w.bc(e)};let S=null;{const t={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},i={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},n=async()=>{const i=await m.generateKey(t,!0,["sign","verify"]),n=await m.exportKey("spki",i.publicKey),e=await m.exportKey("pkcs8",i.privateKey),r=w.Oc(n),h=w.Oc(e),o=new s;return await o.import(r,h),o};class s{constructor(){this.Uc=null,this.Bc=null}async import(n,s){n&&(this.Uc=await m.importKey("spki",w.jc(n),i,!0,["verify"])),s&&(this.Bc=await m.importKey("pkcs8",w.jc(s),t,!0,["sign"]))}async export(){return{publicKey:w.Oc(await m.exportKey("spki",this.Uc)),privateKey:w.Oc(await m.exportKey("pkcs8",this.Bc))}}async sign(i){if(!this.Bc)throw"Cannot sign without a private key!";return w.Oc(await m.sign(t,this.Bc,w.jc(i)))}async verify(i,n){return!!this.Uc&&await m.verify(t,this.Uc,w.jc(n),w.jc(i))}}S={KeyPair:s,generate:n}}const R={setupKey:async t=>{try{const i=await q.readFile(t+".pub","utf8"),n=await q.readFile(t,"utf8"),s=new S.KeyPair;return await s.import(A(i,!0),A(n,!1)),s}catch(i){const n=await S.generate(),{publicKey:s,privateKey:e}=await n.export();return await q.writeFile(t,x(e,!1),"utf8"),await q.writeFile(t+".pub",x(s,!0),"utf8"),n}},...S},C=async(t,i)=>{let n,s;if(!t||!(n=t.fingerprint(!0))||!(s=t.fingerprint(!1)))return{};const e=w.wc([n.replace(/\:/g,""),s.replace(/\:/g,"")].sort().join("")),r=await i.sign(e),{publicKey:h}=await i.export();return{peer_id:w.gc(h),fingerprint:w.gc(e),signature:w.gc(r)}},E=async(t,i)=>{let n=!!(t&&i&&t.peer_id&&i.peer_id);if(!n)return!1;const s=new R.KeyPair;await s.import(w.bc(t.peer_id));const e=new R.KeyPair;await e.import(w.bc(i.peer_id));const r=w.bc(t.fingerprint),h=w.bc(i.fingerprint),o=w.bc(t.signature),u=w.bc(i.signature);return n&&(n=r.equals(h)),n&&(n=await s.verify(r,o)),n&&(n=await e.verify(h,u)),n};class T extends(e()){constructor(t){if(super(),!(t={user:"root",client:null,terminal:null,id_key:null,...t}).client)throw ReferenceError("Must provide a tracker client.");if(!t.terminal)throw ReferenceError("Must provide a terminal.");if(!t.id_key)throw ReferenceError("id_key must be provided.");const i=t.terminal,n=t.client;let s=null;s=i.onData((t=>{""==t&&(s.dispose(),this.emit("close",0))}));const e=i=>JSON.stringify({type:"clientAuthorizeReq",payload:{mode:"password",user:t.user,password:i}}),r=()=>JSON.stringify({type:"ttyResize",payload:{width:i.cols,height:i.rows}}),h=t=>(i.write(`${t}'s password:ð `),new Promise(((t,n)=>{let s="",e=null;e=i.onData((n=>{switch(n+=""){case"\n":case"\r":case"":i.write("\r\n"),e.dispose(),t(s);break;case"\b":case"":return void(s.length>0&&(s=s.slice(0,s.length-1)));case"":return void e.dispose();default:s+=n}}))}))),o=async u=>{let c=!1,f=null,a=null,l=null,v=!1;i.write("\r[:] 2/2 Connecting to Peer...");const d=await C(u,t.id_key),b=k((async t=>{if(!l){let i="server"==t.role;if(!i)return void u.destroy();if(i&&(i=await E(d,t.session)),!i)return void u.destroy();const s=await j(t.session.peer_id,"SHA-256");if(i&&(i=n.endpoints.map((t=>w.bc(t))).find((t=>t.equals(s)))),!i)return void u.destroy();i&&(v=!0,u.channel("wps"))}})),g=async n=>{const s=JSON.parse(n);if("clientAuthorizeRes"==s.type){s.payload.authorized&&!c?(c=!0,l.send(r())):(i.write("Permission denied, please try again.\r\n"),l.send(e(await h(t.user))))}};u.on("channel",(async c=>{if(v)return"wps"!=c.label||l?"tty"!=c.label||a?void 0:(a=c,s.dispose(),s=i.onData((t=>a.send(t))),f=i.onResize((()=>l.send(r()))),a.on("data",(t=>i.write(t))),void a.on("close",(()=>u.destroy()))):(n.off("peer",o),n.disconnectTrackers(),l=c,l.on("data",g),l.on("close",(()=>u.destroy())),i.write("\r[â] 2/2 Connecting to Peer...\n\r"),void l.send(e(await h(t.user))))})),u.on("data",b),u.on("close",(()=>{l?(l=null,s.dispose(),i.write("Connection closed.\r\n"),this.emit("close",0)):n.tracker_urls.size>0&&0==n.peers.filter((t=>t.is_connected)).length&&i.write("\r[x] 2/2 Connecting to Peer..."),a&&(s.dispose(),f.dispose(),a=null)})),u.send(M("client",d))};n.on("peer",o),i.write("\r[ ] 1/2 Connecting to Tracker..."),n.once("tracker",(()=>{i.write("\r[â] 1/2 Connecting to Tracker...\n\r"),i.write("\r[ ] 2/2 Connecting to Peer...")}));let u=!1;n.on("tracker",(t=>{const n=s=>{const e=JSON.parse(s);u?t.off("message",n):e.peer_id&&(u=!0,i.write("\r[.] 2/2 Connecting to Peer..."))};t.on("message",n)}))}}const I={Client:T};n(0).default;n(5),n(6);class U{constructor(n,s){const[e,r]=s.peer.includes("@")?s.peer.split("@"):["root",s.peer],h=["wss://tracker.webpeer.repl.co","wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz","wss://tracker.sloppyta.co/announce","wss://tracker.files.fm:7073/announce","wss://hub.bugout.link/announce"],o={background:document.body.style["background-color"]||"#000"};(async()=>{const s=await R.setupKey("id_rsa"),u=new i.FitAddon,c=new t.Terminal({cursorStyle:"bar",theme:o}),f=new _.Client({nr_offers:2,endpoints:[r]});new I.Client({user:e,terminal:c,client:f,id_key:s}).on("close",(()=>{f.disconnectTrackers(),c.reset(),c.write("Refresh to reconnect.\r\n")})),c.open(n),c.focus(),c.loadAddon(u),u.fit(),document.body.onresize=()=>u.fit(),f.connectTrackers(h)})()}}(()=>{var t=unescape(window.location.search.slice(1));if(""!=t&&(document.title="wps - "+t,history.pushState)){var i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+t;window.history.pushState({path:i},"",i)}var n={peer:t},s=document.getElementById("terminal");new U(s,n)})()})()})();