(()=>{var t=[(t,i,n)=>{n.r(i),n.d(i,{default:()=>l});var r=n(9),e=n(12),s=n(10),h=n(11);function u(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return o(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,h=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return h=t.done,t},e:function(t){u=!0,s=t},f:function(){try{h||null==n.return||n.return()}finally{if(u)throw s}}}}function o(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}var c=function(t,i){if("hex"==i)return function(t){var i,n=a.alloc((t.length+1)/2),r=-1,e=0,s=u(t=t.toLowerCase());try{for(s.s();!(i=s.n()).done;){var h=i.value,o="0123456789abcdef".search(h);if(-1==o)return n;r<0?r=o:(n.O[e++]=16*r+o,r=-1)}}catch(t){s.e(t)}finally{s.f()}return n}(t);"base64"==i&&(t=atob(t.replace(/-/g,"+").replace(/_/g,"/")));var n=a.alloc(t.length);return function(t,i,n){for(var r=0;r<n;++r)i[r]=t.charCodeAt(r)}(t,n.O,t.length),n},f=function(t){var i=new a;return i.O=new Uint8Array(t),i},a=function(){function t(){return(0,s.a)(this,t),this.O=null,new Proxy(this,{get:function(t,i){return"string"==typeof i&&Number.isInteger(Number(i))?t.O[i]:t[i]},set:function(t,i,n){return"string"==typeof i&&Number.isInteger(Number(i))?(t.O[i]=n,!0):t[i]=n}})}return(0,h.a)(t,[{key:"toString",value:function(t){if(!t)return"<Buffer "+(this.O?this.O.join(" "):"")+">";var i=String.fromCharCode.apply(String,(0,e.a)(this.O?this.O:[]));return"binary"==t?i:"base64"==t?btoa(i):void 0}},{key:"equals",value:function(t){return this.O&&t.O&&this.O.length==t.O.length&&this.O.every((function(i,n){return i==t.O[n]}))}},{key:"length",get:function(){return this.O?this.O.byteLength:0}}],[{key:"from",value:function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n||(n="binary"),null==i)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(0,r.a)(i));if("string"==typeof i)return c(i,n);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i))return f(i);if(i instanceof t)return i;throw"Cannot construct Buffer from "+i+" with encoiding: "+n}},{key:"alloc",value:function(i){var n=new t;return n.O=new Uint8Array(i),n}}]),t}();const l=a},(t,i,n)=>{t.exports=n(3)},t=>{var i,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,i,n){return Function.prototype.apply.call(t,i,n)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var e=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,i){return new Promise((function(n,r){function e(n){t.removeListener(i,s),r(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",e),n([].slice.call(arguments))}b(t,i,s,{once:!0}),"error"!==i&&function(t,i,n){"function"==typeof t.on&&b(t,"error",i,n)}(t,e,{once:!0})}))},s.EventEmitter=s,s.prototype._=void 0,s.prototype.M=0,s.prototype.S=void 0;var h=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t.S?s.defaultMaxListeners:t.S}function c(t,i,n,r){var e,s,h;if(u(n),void 0===(s=t._)?(s=t._=Object.create(null),t.M=0):(void 0!==s.newListener&&(t.emit("newListener",i,n.listener?n.listener:n),s=t._),h=s[i]),void 0===h)h=s[i]=n,++t.M;else if("function"==typeof h?h=s[i]=r?[n,h]:[h,n]:r?h.unshift(n):h.push(n),(e=o(t))>0&&h.length>e&&!h.warned){h.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=h.length,console&&console.warn}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(t,i,n){var r={fired:!1,wrapFn:void 0,target:t,type:i,listener:n},e=f.bind(r);return e.listener=n,r.wrapFn=e,e}function l(t,i,n){var r=t._;if(void 0===r)return[];var e=r[i];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var i=new Array(t.length),n=0;n<i.length;++n)i[n]=t[n].listener||t[n];return i}(e):d(e,e.length)}function v(t){var i=this._;if(void 0!==i){var n=i[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,i){for(var n=new Array(i),r=0;r<i;++r)n[r]=t[r];return n}function b(t,i,n,r){if("function"==typeof t.on)r.once?t.once(i,n):t.on(i,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function e(s){r.once&&t.removeEventListener(i,e),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||e(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),s.init=function(){void 0!==this._&&this._!==Object.getPrototypeOf(this)._||(this._=Object.create(null),this.M=0),this.S=this.S||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||e(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.S=t,this},s.prototype.getMaxListeners=function(){return o(this)},s.prototype.emit=function(t){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var e="error"===t,s=this._;if(void 0!==s)e=e&&void 0===s.error;else if(!e)return!1;if(e){var h;if(i.length>0&&(h=i[0]),h instanceof Error)throw h;var u=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw u.context=h,u}var o=s[t];if(void 0===o)return!1;if("function"==typeof o)r(o,this,i);else{var c=o.length,f=d(o,c);for(n=0;n<c;++n)r(f[n],this,i)}return!0},s.prototype.addListener=function(t,i){return c(this,t,i,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,i){return c(this,t,i,!0)},s.prototype.once=function(t,i){return u(i),this.on(t,a(this,t,i)),this},s.prototype.prependOnceListener=function(t,i){return u(i),this.prependListener(t,a(this,t,i)),this},s.prototype.removeListener=function(t,i){var n,r,e,s,h;if(u(i),void 0===(r=this._))return this;if(void 0===(n=r[t]))return this;if(n===i||n.listener===i)0==--this.M?this._=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||i));else if("function"!=typeof n){for(e=-1,s=n.length-1;s>=0;s--)if(n[s]===i||n[s].listener===i){h=n[s].listener,e=s;break}if(e<0)return this;0===e?n.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(n,e),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,h||i)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var i,n,r;if(void 0===(n=this._))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._=Object.create(null),this.M=0):void 0!==n[t]&&(0==--this.M?this._=Object.create(null):delete n[t]),this;if(0===arguments.length){var e,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(e=s[r])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._=Object.create(null),this.M=0,this}if("function"==typeof(i=n[t]))this.removeListener(t,i);else if(void 0!==i)for(r=i.length-1;r>=0;r--)this.removeListener(t,i[r]);return this},s.prototype.listeners=function(t){return l(this,t,!0)},s.prototype.rawListeners=function(t){return l(this,t,!1)},s.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):v.call(t,i)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this.M>0?i(this._):[]}},t=>{var i=function(t){var i,n=Object.prototype,r=n.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},s=e.iterator||"@@iterator",h=e.asyncIterator||"@@asyncIterator",u=e.toStringTag||"@@toStringTag";function o(t,i,n){return Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{o({},"")}catch(t){o=function(t,i,n){return t[i]=n}}function c(t,i,n,r){var e=i&&i.prototype instanceof w?i:w,s=Object.create(e.prototype),h=new A(r||[]);return s.T=function(t,i,n){var r=a;return function(e,s){if(r===v)throw new Error("Generator is already running");if(r===d){if("throw"===e)throw s;return R()}for(n.method=e,n.arg=s;;){var h=n.delegate;if(h){var u=M(h,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n.I=n.arg;else if("throw"===n.method){if(r===a)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var o=f(t,i,n);if("normal"===o.type){if(r=n.done?d:l,o.arg===b)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(r=d,n.method="throw",n.arg=o.arg)}}}(t,n,h),s}function f(t,i,n){try{return{type:"normal",arg:t.call(i,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var a="suspendedStart",l="suspendedYield",v="executing",d="completed",b={};function w(){}function m(){}function g(){}var p={};p[s]=function(){return this};var y=Object.getPrototypeOf,O=y&&y(y(S([])));O&&O!==n&&r.call(O,s)&&(p=O);var j=g.prototype=w.prototype=Object.create(p);function _(t){["next","throw","return"].forEach((function(i){o(t,i,(function(t){return this.T(i,t)}))}))}function k(t,i){function n(e,s,h,u){var o=f(t[e],t,s);if("throw"!==o.type){var c=o.arg,a=c.value;return a&&"object"==typeof a&&r.call(a,"__await")?i.resolve(a.U).then((function(t){n("next",t,h,u)}),(function(t){n("throw",t,h,u)})):i.resolve(a).then((function(t){c.value=t,h(c)}),(function(t){return n("throw",t,h,u)}))}u(o.arg)}var e;this.T=function(t,r){function s(){return new i((function(i,e){n(t,r,i,e)}))}return e=e?e.then(s,s):s()}}function M(t,n){var r=t.iterator[n.method];if(r===i){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=i,M(t,n),"throw"===n.method))return b;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var e=f(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,b;var s=e.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=i),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function q(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function x(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function S(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,h=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=i,n.done=!0,n};return h.next=h}}return{next:R}}function R(){return{value:i,done:!0}}return m.prototype=j.constructor=g,g.constructor=m,m.displayName=o(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var i="function"==typeof t&&t.constructor;return!!i&&(i===m||"GeneratorFunction"===(i.displayName||i.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,o(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},t.awrap=function(t){return{U:t}},_(k.prototype),k.prototype[h]=function(){return this},t.AsyncIterator=k,t.async=function(i,n,r,e,s){void 0===s&&(s=Promise);var h=new k(c(i,n,r,e),s);return t.isGeneratorFunction(n)?h:h.next().then((function(t){return t.done?t.value:h.next()}))},_(j),o(j,u,"Generator"),j[s]=function(){return this},j.toString=function(){return"[object Generator]"},t.keys=function(t){var i=[];for(var n in t)i.push(n);return i.reverse(),function n(){for(;i.length;){var r=i.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.I=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(r,e){return u.type="throw",u.arg=t,n.next=r,e&&(n.method="next",n.arg=i),!!e}for(var s=this.tryEntries.length-1;s>=0;--s){var h=this.tryEntries[s],u=h.completion;if("root"===h.tryLoc)return e("end");if(h.tryLoc<=this.prev){var o=r.call(h,"catchLoc"),c=r.call(h,"finallyLoc");if(o&&c){if(this.prev<h.catchLoc)return e(h.catchLoc,!0);if(this.prev<h.finallyLoc)return e(h.finallyLoc)}else if(o){if(this.prev<h.catchLoc)return e(h.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<h.finallyLoc)return e(h.finallyLoc)}}}},abrupt:function(t,i){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var s=e;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=i&&i<=s.finallyLoc&&(s=null);var h=s?s.completion:{};return h.type=t,h.arg=i,s?(this.method="next",this.next=s.finallyLoc,b):this.complete(h)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),b},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),b}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var e=r.arg;x(n)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:S(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=i),b}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},t=>{var i,n;self,t.exports=(i={4567:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.AccessibilityManager=void 0;var s=n(9042),h=n(6114),u=n(6193),o=n(3656),c=n(844),f=n(5596),a=n(9631),l=function(t){function i(i,n){var r=t.call(this)||this;r.L=i,r.D=n,r.W=0,r.F=[],r.G="",r.$=document.createElement("div"),r.$.classList.add("xterm-accessibility"),r.J=document.createElement("div"),r.J.setAttribute("role","list"),r.J.classList.add("xterm-accessibility-tree"),r.V=[];for(var e=0;e<r.L.rows;e++)r.V[e]=r.X(),r.J.appendChild(r.V[e]);if(r.tt=function(t){return r.it(t,0)},r.nt=function(t){return r.it(t,1)},r.V[0].addEventListener("focus",r.tt),r.V[r.V.length-1].addEventListener("focus",r.nt),r.rt(),r.$.appendChild(r.J),r.et=new u.RenderDebouncer(r.st.bind(r)),r.ht(),r.ut=document.createElement("div"),r.ut.classList.add("live-region"),r.ut.setAttribute("aria-live","assertive"),r.$.appendChild(r.ut),!r.L.element)throw new Error("Cannot enable accessibility before Terminal.open");return r.L.element.insertAdjacentElement("afterbegin",r.$),r.register(r.et),r.register(r.L.onResize((function(t){return r.ot(t.rows)}))),r.register(r.L.onRender((function(t){return r.ht(t.start,t.end)}))),r.register(r.L.onScroll((function(){return r.ht()}))),r.register(r.L.onA11yChar((function(t){return r.ct(t)}))),r.register(r.L.onLineFeed((function(){return r.ct("\n")}))),r.register(r.L.onA11yTab((function(t){return r.ft(t)}))),r.register(r.L.onKey((function(t){return r.at(t.key)}))),r.register(r.L.onBlur((function(){return r.lt()}))),r.register(r.D.onDimensionsChange((function(){return r.rt()}))),r.vt=new f.ScreenDprMonitor,r.register(r.vt),r.vt.setListener((function(){return r.rt()})),r.register(o.addDisposableDomListener(window,"resize",(function(){return r.rt()}))),r}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),a.removeElementFromParent(this.$),this.V.length=0},i.prototype.it=function(t,i){var n=t.target,r=this.V[0===i?1:this.V.length-2];if(n.getAttribute("aria-posinset")!==(0===i?"1":""+this.L.buffer.lines.length)&&t.relatedTarget===r){var e,s;if(0===i?(e=n,s=this.V.pop(),this.J.removeChild(s)):(e=this.V.shift(),s=n,this.J.removeChild(e)),e.removeEventListener("focus",this.tt),s.removeEventListener("focus",this.nt),0===i){var h=this.X();this.V.unshift(h),this.J.insertAdjacentElement("afterbegin",h)}else h=this.X(),this.V.push(h),this.J.appendChild(h);this.V[0].addEventListener("focus",this.tt),this.V[this.V.length-1].addEventListener("focus",this.nt),this.L.scrollLines(0===i?-1:1),this.V[0===i?1:this.V.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},i.prototype.ot=function(t){this.V[this.V.length-1].removeEventListener("focus",this.nt);for(var i=this.J.children.length;i<this.L.rows;i++)this.V[i]=this.X(),this.J.appendChild(this.V[i]);for(;this.V.length>t;)this.J.removeChild(this.V.pop());this.V[this.V.length-1].addEventListener("focus",this.nt),this.rt()},i.prototype.X=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this.dt(t),t},i.prototype.ft=function(t){for(var i=0;i<t;i++)this.ct(" ")},i.prototype.ct=function(t){var i=this;this.W<21&&(this.F.length>0?this.F.shift()!==t&&(this.G+=t):this.G+=t,"\n"===t&&(this.W++,21===this.W&&(this.ut.textContent+=s.tooMuchOutput)),h.isMac&&this.ut.textContent&&this.ut.textContent.length>0&&!this.ut.parentNode&&setTimeout((function(){i.$.appendChild(i.ut)}),0))},i.prototype.lt=function(){this.ut.textContent="",this.W=0,h.isMac&&a.removeElementFromParent(this.ut)},i.prototype.at=function(t){this.lt(),this.F.push(t)},i.prototype.ht=function(t,i){this.et.refresh(t,i,this.L.rows)},i.prototype.st=function(t,i){for(var n=this.L.buffer,r=n.lines.length.toString(),e=t;e<=i;e++){var s=n.translateBufferLineToString(n.ydisp+e,!0),h=(n.ydisp+e+1).toString(),u=this.V[e];u&&(0===s.length?u.innerText=" ":u.textContent=s,u.setAttribute("aria-posinset",h),u.setAttribute("aria-setsize",r))}this.bt()},i.prototype.rt=function(){if(this.D.dimensions.actualCellHeight){this.V.length!==this.L.rows&&this.ot(this.L.rows);for(var t=0;t<this.L.rows;t++)this.dt(this.V[t])}},i.prototype.dt=function(t){t.style.height=this.D.dimensions.actualCellHeight+"px"},i.prototype.bt=function(){0!==this.G.length&&(this.ut.textContent+=this.G,this.G="")},i}(c.Disposable);i.AccessibilityManager=l},3614:(t,i)=>{function n(t){return t.replace(/\r?\n/g,"\r")}function r(t,i){return i?"[200~"+t+"[201~":t}function e(t,i,e){t=r(t=n(t),e.decPrivateModes.bracketedPasteMode),e.triggerDataEvent(t,!0),i.value=""}function s(t,i,n){var r=n.getBoundingClientRect(),e=t.clientX-r.left-10,s=t.clientY-r.top-10;i.style.width="20px",i.style.height="20px",i.style.left=e+"px",i.style.top=s+"px",i.style.zIndex="1000",i.focus()}Object.defineProperty(i,"N",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=r,i.copyHandler=function(t,i){t.clipboardData&&t.clipboardData.setData("text/plain",i.selectionText),t.preventDefault()},i.handlePasteEvent=function(t,i,n){t.stopPropagation(),t.clipboardData&&e(t.clipboardData.getData("text/plain"),i,n)},i.paste=e,i.moveTextAreaUnderMouseCursor=s,i.rightClickHandler=function(t,i,n,r,e){s(t,i,n),e&&r.rightClickSelect(t),i.value=r.selectionText,i.select()}},4774:(t,i)=>{var n,r,e,s;function h(t){var i=t.toString(16);return i.length<2?"0"+i:i}function u(t,i){return t<i?(i+.05)/(t+.05):(t+.05)/(i+.05)}Object.defineProperty(i,"N",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=void 0,function(t){t.toCss=function(t,i,n,r){return void 0!==r?"#"+h(t)+h(i)+h(n)+h(r):"#"+h(t)+h(i)+h(n)},t.toRgba=function(t,i,n,r){return void 0===r&&(r=255),(t<<24|i<<16|n<<8|r)>>>0}}(n=i.channels||(i.channels={})),(r=i.color||(i.color={})).blend=function(t,i){var r=(255&i.rgba)/255;if(1===r)return{css:i.css,rgba:i.rgba};var e=i.rgba>>24&255,s=i.rgba>>16&255,h=i.rgba>>8&255,u=t.rgba>>24&255,o=t.rgba>>16&255,c=t.rgba>>8&255,f=u+Math.round((e-u)*r),a=o+Math.round((s-o)*r),l=c+Math.round((h-c)*r);return{css:n.toCss(f,a,l),rgba:n.toRgba(f,a,l)}},r.isOpaque=function(t){return 255==(255&t.rgba)},r.ensureContrastRatio=function(t,i,n){var r=s.ensureContrastRatio(t.rgba,i.rgba,n);if(r)return s.toColor(r>>24&255,r>>16&255,r>>8&255)},r.opaque=function(t){var i=(255|t.rgba)>>>0,r=s.toChannels(i),e=r[0],h=r[1],u=r[2];return{css:n.toCss(e,h,u),rgba:i}},r.opacity=function(t,i){var r=Math.round(255*i),e=s.toChannels(t.rgba),h=e[0],u=e[1],o=e[2];return{css:n.toCss(h,u,o,r),rgba:n.toRgba(h,u,o,r)}},(i.css||(i.css={})).toColor=function(t){switch(t.length){case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(t){function i(t,i,n){var r=t/255,e=i/255,s=n/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}t.relativeLuminance=function(t){return i(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=i}(e=i.rgb||(i.rgb={})),function(t){function i(t,i,n){for(var r=t>>24&255,s=t>>16&255,h=t>>8&255,o=i>>24&255,c=i>>16&255,f=i>>8&255,a=u(e.relativeLuminance2(o,f,c),e.relativeLuminance2(r,s,h));a<n&&(o>0||c>0||f>0);)o-=Math.max(0,Math.ceil(.1*o)),c-=Math.max(0,Math.ceil(.1*c)),f-=Math.max(0,Math.ceil(.1*f)),a=u(e.relativeLuminance2(o,f,c),e.relativeLuminance2(r,s,h));return(o<<24|c<<16|f<<8|255)>>>0}function r(t,i,n){for(var r=t>>24&255,s=t>>16&255,h=t>>8&255,o=i>>24&255,c=i>>16&255,f=i>>8&255,a=u(e.relativeLuminance2(o,f,c),e.relativeLuminance2(r,s,h));a<n&&(o<255||c<255||f<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),c=Math.min(255,c+Math.ceil(.1*(255-c))),f=Math.min(255,f+Math.ceil(.1*(255-f))),a=u(e.relativeLuminance2(o,f,c),e.relativeLuminance2(r,s,h));return(o<<24|c<<16|f<<8|255)>>>0}t.ensureContrastRatio=function(t,n,s){var h=e.relativeLuminance(t>>8),o=e.relativeLuminance(n>>8);if(u(h,o)<s)return o<h?i(t,n,s):r(t,n,s)},t.reduceLuminance=i,t.increaseLuminance=r,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,i,r){return{css:n.toCss(t,i,r),rgba:n.toRgba(t,i,r)}}}(s=i.rgba||(i.rgba={})),i.toPaddedHex=h,i.contrastRatio=u},7239:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.ColorContrastCache=void 0;var n=function(){function t(){this.wt={},this.gt={}}return t.prototype.clear=function(){this.wt={},this.gt={}},t.prototype.setCss=function(t,i,n){this.gt[t]||(this.gt[t]={}),this.gt[t][i]=n},t.prototype.getCss=function(t,i){return this.gt[t]?this.gt[t][i]:void 0},t.prototype.setColor=function(t,i,n){this.wt[t]||(this.wt[t]={}),this.wt[t][i]=n},t.prototype.getColor=function(t,i){return this.wt[t]?this.wt[t][i]:void 0},t}();i.ColorContrastCache=n},5680:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.ColorManager=i.DEFAULT_ANSI_COLORS=void 0;var r=n(4774),e=n(7239),s=r.css.toColor("#ffffff"),h=r.css.toColor("#000000"),u=r.css.toColor("#ffffff"),o=r.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var t=[r.css.toColor("#2e3436"),r.css.toColor("#cc0000"),r.css.toColor("#4e9a06"),r.css.toColor("#c4a000"),r.css.toColor("#3465a4"),r.css.toColor("#75507b"),r.css.toColor("#06989a"),r.css.toColor("#d3d7cf"),r.css.toColor("#555753"),r.css.toColor("#ef2929"),r.css.toColor("#8ae234"),r.css.toColor("#fce94f"),r.css.toColor("#729fcf"),r.css.toColor("#ad7fa8"),r.css.toColor("#34e2e2"),r.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],n=0;n<216;n++){var e=i[n/36%6|0],s=i[n/6%6|0],h=i[n%6];t.push({css:r.channels.toCss(e,s,h),rgba:r.channels.toRgba(e,s,h)})}for(n=0;n<24;n++){var u=8+10*n;t.push({css:r.channels.toCss(u,u,u),rgba:r.channels.toRgba(u,u,u)})}return t}());var f=function(){function t(t,n){this.allowTransparency=n;var f=t.createElement("canvas");f.width=1,f.height=1;var a=f.getContext("2d");if(!a)throw new Error("Could not get rendering context");this.yt=a,this.yt.globalCompositeOperation="copy",this.Ot=this.yt.createLinearGradient(0,0,1,1),this.jt=new e.ColorContrastCache,this.colors={foreground:s,background:h,cursor:u,cursorAccent:o,selectionTransparent:c,selectionOpaque:r.color.blend(h,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this.jt}}return t.prototype.onOptionsChange=function(t){"minimumContrastRatio"===t&&this.jt.clear()},t.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this._t(t.foreground,s),this.colors.background=this._t(t.background,h),this.colors.cursor=this._t(t.cursor,u,!0),this.colors.cursorAccent=this._t(t.cursorAccent,o,!0),this.colors.selectionTransparent=this._t(t.selection,c,!0),this.colors.selectionOpaque=r.color.blend(this.colors.background,this.colors.selectionTransparent),r.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=r.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._t(t.black,i.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._t(t.red,i.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._t(t.green,i.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._t(t.yellow,i.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._t(t.blue,i.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._t(t.magenta,i.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._t(t.cyan,i.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._t(t.white,i.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._t(t.brightBlack,i.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._t(t.brightRed,i.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._t(t.brightGreen,i.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._t(t.brightYellow,i.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._t(t.brightBlue,i.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._t(t.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._t(t.brightCyan,i.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._t(t.brightWhite,i.DEFAULT_ANSI_COLORS[15]),this.jt.clear()},t.prototype._t=function(t,i,n){if(void 0===n&&(n=this.allowTransparency),void 0===t)return i;if(this.yt.fillStyle=this.Ot,this.yt.fillStyle=t,"string"!=typeof this.yt.fillStyle)return i;this.yt.fillRect(0,0,1,1);var e=this.yt.getImageData(0,0,1,1).data;if(255!==e[3]){if(!n)return i;var s=this.yt.fillStyle.substring(5,this.yt.fillStyle.length-1).split(",").map((function(t){return Number(t)})),h=s[0],u=s[1],o=s[2],c=s[3],f=Math.round(255*c);return{rgba:r.channels.toRgba(h,u,o,f),css:t}}return{css:this.yt.fillStyle,rgba:r.channels.toRgba(e[0],e[1],e[2],e[3])}},t}();i.ColorManager=f},9631:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var r=0,e=i;r<e.length;r++){var s=e[r];null===(t=null==s?void 0:s.parentElement)||void 0===t||t.removeChild(s)}}},3656:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(t,i,n,r){t.addEventListener(i,n,r);var e=!1;return{dispose:function(){e||(e=!0,t.removeEventListener(i,n,r))}}}},3551:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.MouseZone=i.Linkifier=void 0;var s=n(8460),h=n(2585),u=function(){function t(t,i,n){this.qt=t,this.xt=i,this.At=n,this.St=[],this.Rt=0,this.Et=new s.EventEmitter,this.Ct=new s.EventEmitter,this.Tt=new s.EventEmitter,this.It={start:void 0,end:void 0}}return Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this.Et.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this.Ct.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLinkTooltip",{get:function(){return this.Tt.event},enumerable:!1,configurable:!0}),t.prototype.attachToDom=function(t,i){this.Ut=t,this.Bt=i},t.prototype.linkifyRows=function(i,n){var r=this;this.Bt&&(void 0===this.It.start||void 0===this.It.end?(this.It.start=i,this.It.end=n):(this.It.start=Math.min(this.It.start,i),this.It.end=Math.max(this.It.end,n)),this.Bt.clearAll(i,n),this.Pt&&clearTimeout(this.Pt),this.Pt=setTimeout((function(){return r.Nt()}),t.Lt))},t.prototype.Nt=function(){this.Pt=void 0;var t=this.qt.buffer;if(void 0!==this.It.start&&void 0!==this.It.end){var i=t.ydisp+this.It.start;if(!(i>=t.lines.length)){for(var n=t.ydisp+Math.min(this.It.end,this.qt.rows)+1,r=Math.ceil(2e3/this.qt.cols),e=this.qt.buffer.iterator(!1,i,n,r,r);e.hasNext();)for(var s=e.next(),h=0;h<this.St.length;h++)this.Dt(s.range.first,s.content,this.St[h]);this.It.start=void 0,this.It.end=void 0}}else this.xt.debug("_rowToLinkify was unset before _linkifyRows was called")},t.prototype.registerLinkMatcher=function(t,i,n){if(void 0===n&&(n={}),!i)throw new Error("handler must be defined");var r={id:this.Rt++,regex:t,handler:i,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this.Wt(r),r.id},t.prototype.Wt=function(t){if(0!==this.St.length){for(var i=this.St.length-1;i>=0;i--)if(t.priority<=this.St[i].priority)return void this.St.splice(i+1,0,t);this.St.splice(0,0,t)}else this.St.push(t)},t.prototype.deregisterLinkMatcher=function(t){for(var i=0;i<this.St.length;i++)if(this.St[i].id===t)return this.St.splice(i,1),!0;return!1},t.prototype.Dt=function(t,i,n){for(var r,e=this,s=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),h=-1,u=function(){var u=r["number"!=typeof n.matchIndex?0:n.matchIndex];if(!u)return o.xt.debug("match found without corresponding matchIndex",r,n),"break";if(h=i.indexOf(u,h+1),s.lastIndex=h+u.length,h<0)return"break";var c=o.qt.buffer.stringIndexToBufferIndex(t,h);if(c[0]<0)return"break";var f=o.qt.buffer.lines.get(c[0]);if(!f)return"break";var a=f.getFg(c[1]),l=a?a>>9&511:void 0;n.validationCallback?n.validationCallback(u,(function(t){e.Pt||t&&e.Ft(c[1],c[0]-e.qt.buffer.ydisp,u,n,l)})):o.Ft(c[1],c[0]-o.qt.buffer.ydisp,u,n,l)},o=this;null!==(r=s.exec(i))&&"break"!==u(););},t.prototype.Ft=function(t,i,n,r,e){var s=this;if(this.Bt&&this.Ut){var h=this.At.getStringCellWidth(n),u=t%this.qt.cols,c=i+Math.floor(t/this.qt.cols),f=(u+h)%this.qt.cols,a=c+Math.floor((u+h)/this.qt.cols);0===f&&(f=this.qt.cols,a--),this.Bt.add(new o(u+1,c+1,f+1,a+1,(function(t){if(r.handler)return r.handler(t,n);var i=window.open();i&&(i.opener=null,i.location.href=n)}),(function(){s.Et.fire(s.Kt(u,c,f,a,e)),s.Ut.classList.add("xterm-cursor-pointer")}),(function(t){s.Tt.fire(s.Kt(u,c,f,a,e)),r.hoverTooltipCallback&&r.hoverTooltipCallback(t,n,{start:{x:u,y:c},end:{x:f,y:a}})}),(function(){s.Ct.fire(s.Kt(u,c,f,a,e)),s.Ut.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()}),(function(t){return!r.willLinkActivate||r.willLinkActivate(t,n)})))}},t.prototype.Kt=function(t,i,n,r,e){return{x1:t,y1:i,x2:n,y2:r,cols:this.qt.cols,fg:e}},t.Lt=200,t=r([e(0,h.IBufferService),e(1,h.ILogService),e(2,h.IUnicodeService)],t)}();i.Linkifier=u;var o=function(t,i,n,r,e,s,h,u,o){this.x1=t,this.y1=i,this.x2=n,this.y2=r,this.clickCallback=e,this.hoverCallback=s,this.tooltipCallback=h,this.leaveCallback=u,this.willLinkActivate=o};i.MouseZone=o},6465:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.Linkifier2=void 0;var u=n(2585),o=n(8460),c=n(844),f=n(3656),a=function(t){function i(i){var n=t.call(this)||this;return n.qt=i,n.Ht=[],n.zt=[],n.Gt=!0,n.$t=-1,n.Et=n.register(new o.EventEmitter),n.Ct=n.register(new o.EventEmitter),n.register(c.getDisposeArrayDisposable(n.zt)),n}return e(i,t),Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this.Et.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this.Ct.event},enumerable:!1,configurable:!0}),i.prototype.registerLinkProvider=function(t){var i=this;return this.Ht.push(t),{dispose:function(){var n=i.Ht.indexOf(t);-1!==n&&i.Ht.splice(n,1)}}},i.prototype.attachToDom=function(t,i,n){var r=this;this.Ut=t,this.Yt=i,this.D=n,this.register(f.addDisposableDomListener(this.Ut,"mouseleave",(function(){r.Gt=!0,r.Jt()}))),this.register(f.addDisposableDomListener(this.Ut,"mousemove",this.Vt.bind(this))),this.register(f.addDisposableDomListener(this.Ut,"click",this.Qt.bind(this)))},i.prototype.Vt=function(t){if(this.Xt=t,this.Ut&&this.Yt){var i=this.Zt(t,this.Ut,this.Yt);if(i){this.Gt=!1;for(var n=t.composedPath(),r=0;r<n.length;r++){var e=n[r];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this.ti&&i.x===this.ti.x&&i.y===this.ti.y||(this.ii(i),this.ti=i)}}},i.prototype.ii=function(t){if(this.$t!==t.y)return this.Jt(),void this.ni(t,!1);this.ri&&this.ei(this.ri.link,t)||(this.Jt(),this.ni(t,!0))},i.prototype.ni=function(t,i){var n,r=this;this.si&&i||(null===(n=this.si)||void 0===n||n.forEach((function(t){null==t||t.forEach((function(t){t.link.dispose&&t.link.dispose()}))})),this.si=new Map,this.$t=t.y);var e=!1;this.Ht.forEach((function(n,s){var h;i?(null===(h=r.si)||void 0===h?void 0:h.get(s))&&(e=r.hi(s,t,e)):n.provideLinks(t.y,(function(i){var n,h;if(!r.Gt){var u=null==i?void 0:i.map((function(t){return{link:t}}));null===(n=r.si)||void 0===n||n.set(s,u),e=r.hi(s,t,e),(null===(h=r.si)||void 0===h?void 0:h.size)===r.Ht.length&&r.ui(t.y,r.si)}}))}))},i.prototype.ui=function(t,i){for(var n=new Set,r=0;r<i.size;r++){var e=i.get(r);if(e)for(var s=0;s<e.length;s++)for(var h=e[s],u=h.link.range.start.y<t?0:h.link.range.start.x,o=h.link.range.end.y>t?this.qt.cols:h.link.range.end.x,c=u;c<=o;c++){if(n.has(c)){e.splice(s--,1);break}n.add(c)}}},i.prototype.hi=function(t,i,n){var r,e=this;if(!this.si)return n;for(var s=this.si.get(t),h=!1,u=0;u<t;u++)this.si.has(u)&&!this.si.get(u)||(h=!0);if(!h&&s){var o=s.find((function(t){return e.ei(t.link,i)}));o&&(n=!0,this.oi(o))}if(this.si.size===this.Ht.length&&!n)for(u=0;u<this.si.size;u++){var c=null===(r=this.si.get(u))||void 0===r?void 0:r.find((function(t){return e.ei(t.link,i)}));if(c){n=!0,this.oi(c);break}}return n},i.prototype.Qt=function(t){if(this.Ut&&this.Yt&&this.ri){var i=this.Zt(t,this.Ut,this.Yt);i&&this.ei(this.ri.link,i)&&this.ri.link.activate(t,this.ri.link.text)}},i.prototype.Jt=function(t,i){this.Ut&&this.ri&&this.Xt&&(!t||!i||this.ri.link.range.start.y>=t&&this.ri.link.range.end.y<=i)&&(this.ci(this.Ut,this.ri.link,this.Xt),this.ri=void 0,c.disposeArray(this.zt))},i.prototype.oi=function(t){var i=this;if(this.Ut&&this.Xt&&this.Yt){var n=this.Zt(this.Xt,this.Ut,this.Yt);n&&this.ei(t.link,n)&&(this.ri=t,this.ri.state={decorations:{underline:void 0===t.link.decorations||t.link.decorations.underline,pointerCursor:void 0===t.link.decorations||t.link.decorations.pointerCursor},isHovered:!0},this.fi(this.Ut,t.link,this.Xt),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var t,n;return null===(n=null===(t=i.ri)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.pointerCursor},set:function(t){var n,r;(null===(n=i.ri)||void 0===n?void 0:n.state)&&i.ri.state.decorations.pointerCursor!==t&&(i.ri.state.decorations.pointerCursor=t,i.ri.state.isHovered&&(null===(r=i.Ut)||void 0===r||r.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:function(){var t,n;return null===(n=null===(t=i.ri)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.underline},set:function(n){var r,e,s;(null===(r=i.ri)||void 0===r?void 0:r.state)&&(null===(s=null===(e=i.ri)||void 0===e?void 0:e.state)||void 0===s?void 0:s.decorations.underline)!==n&&(i.ri.state.decorations.underline=n,i.ri.state.isHovered&&i.ai(t.link,n))}}}),this.D&&this.zt.push(this.D.onRenderedBufferChange((function(t){var n=0===t.start?0:t.start+1+i.qt.buffer.ydisp;i.Jt(n,t.end+1+i.qt.buffer.ydisp)}))))}},i.prototype.fi=function(t,i,n){var r;(null===(r=this.ri)||void 0===r?void 0:r.state)&&(this.ri.state.isHovered=!0,this.ri.state.decorations.underline&&this.ai(i,!0),this.ri.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)},i.prototype.ai=function(t,i){var n=t.range,r=this.qt.buffer.ydisp,e=this.li(n.start.x-1,n.start.y-r-1,n.end.x,n.end.y-r-1,void 0);(i?this.Et:this.Ct).fire(e)},i.prototype.ci=function(t,i,n){var r;(null===(r=this.ri)||void 0===r?void 0:r.state)&&(this.ri.state.isHovered=!1,this.ri.state.decorations.underline&&this.ai(i,!1),this.ri.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)},i.prototype.ei=function(t,i){var n=t.range.start.y===t.range.end.y,r=t.range.start.y<i.y,e=t.range.end.y>i.y;return(n&&t.range.start.x<=i.x&&t.range.end.x>=i.x||r&&t.range.end.x>=i.x||e&&t.range.start.x<=i.x||r&&e)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},i.prototype.Zt=function(t,i,n){var r=n.getCoords(t,i,this.qt.cols,this.qt.rows);if(r)return{x:r[0],y:r[1]+this.qt.buffer.ydisp}},i.prototype.li=function(t,i,n,r,e){return{x1:t,y1:i,x2:n,y2:r,cols:this.qt.cols,fg:e}},s([h(0,u.IBufferService)],i)}(c.Disposable);i.Linkifier2=a},9042:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.MouseZoneManager=void 0;var u=n(844),o=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,r,e,s,h){var u=t.call(this)||this;return u.Ut=i,u.vi=n,u.qt=r,u.Yt=e,u.di=s,u.bi=h,u.wi=[],u.mi=!1,u.gi=[void 0,void 0],u.pi=0,u.register(o.addDisposableDomListener(u.Ut,"mousedown",(function(t){return u.yi(t)}))),u.Oi=function(t){return u.Vt(t)},u.ji=function(t){return u._i(t)},u.ki=function(t){return u.Qt(t)},u}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),this.Mi()},i.prototype.add=function(t){this.wi.push(t),1===this.wi.length&&this.qi()},i.prototype.clearAll=function(t,i){if(0!==this.wi.length){t&&i||(t=0,i=this.qt.rows-1);for(var n=0;n<this.wi.length;n++){var r=this.wi[n];(r.y1>t&&r.y1<=i+1||r.y2>t&&r.y2<=i+1||r.y1<t&&r.y2>i+1)&&(this.xi&&this.xi===r&&(this.xi.leaveCallback(),this.xi=void 0),this.wi.splice(n--,1))}0===this.wi.length&&this.Mi()}},i.prototype.qi=function(){this.mi||(this.mi=!0,this.Ut.addEventListener("mousemove",this.Oi),this.Ut.addEventListener("mouseleave",this.ji),this.Ut.addEventListener("click",this.ki))},i.prototype.Mi=function(){this.mi&&(this.mi=!1,this.Ut.removeEventListener("mousemove",this.Oi),this.Ut.removeEventListener("mouseleave",this.ji),this.Ut.removeEventListener("click",this.ki))},i.prototype.Vt=function(t){this.gi[0]===t.pageX&&this.gi[1]===t.pageY||(this.ii(t),this.gi=[t.pageX,t.pageY])},i.prototype.ii=function(t){var i=this,n=this.Ai(t);n!==this.xi&&(this.xi&&(this.xi.leaveCallback(),this.xi=void 0,this.Si&&clearTimeout(this.Si)),n&&(this.xi=n,n.hoverCallback&&n.hoverCallback(t),this.Si=window.setTimeout((function(){return i.Ri(t)}),this.bi.options.linkTooltipHoverDuration)))},i.prototype.Ri=function(t){this.Si=void 0;var i=this.Ai(t);i&&i.tooltipCallback&&i.tooltipCallback(t)},i.prototype.yi=function(t){if(this.pi=this.Ei(),this.mi){var i=this.Ai(t);(null==i?void 0:i.willLinkActivate(t))&&(t.preventDefault(),t.stopImmediatePropagation())}},i.prototype._i=function(t){this.xi&&(this.xi.leaveCallback(),this.xi=void 0,this.Si&&clearTimeout(this.Si))},i.prototype.Qt=function(t){var i=this.Ai(t),n=this.Ei();i&&n===this.pi&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},i.prototype.Ei=function(){var t=this.di.selectionText;return t?t.length:0},i.prototype.Ai=function(t){var i=this.Yt.getCoords(t,this.vi,this.qt.cols,this.qt.rows);if(i)for(var n=i[0],r=i[1],e=0;e<this.wi.length;e++){var s=this.wi[e];if(s.y1===s.y2){if(r===s.y1&&n>=s.x1&&n<s.x2)return s}else if(r===s.y1&&n>=s.x1||r===s.y2&&n<s.x2||r>s.y1&&r<s.y2)return s}},s([h(2,f.IBufferService),h(3,c.IMouseService),h(4,c.ISelectionService),h(5,f.IOptionsService)],i)}(u.Disposable);i.MouseZoneManager=a},6193:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.RenderDebouncer=void 0;var n=function(){function t(t){this.Ci=t}return t.prototype.dispose=function(){this.Ti&&(window.cancelAnimationFrame(this.Ti),this.Ti=void 0)},t.prototype.refresh=function(t,i,n){var r=this;this.Ii=n,t=void 0!==t?t:0,i=void 0!==i?i:this.Ii-1,this.Ui=void 0!==this.Ui?Math.min(this.Ui,t):t,this.Bi=void 0!==this.Bi?Math.max(this.Bi,i):i,this.Ti||(this.Ti=window.requestAnimationFrame((function(){return r.Pi()})))},t.prototype.Pi=function(){if(void 0!==this.Ui&&void 0!==this.Bi&&void 0!==this.Ii){var t=Math.max(this.Ui,0),i=Math.min(this.Bi,this.Ii-1);this.Ui=void 0,this.Bi=void 0,this.Ti=void 0,this.Ci(t,i)}},t}();i.RenderDebouncer=n},5596:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.ScreenDprMonitor=void 0;var s=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Ni=window.devicePixelRatio,i}return e(i,t),i.prototype.setListener=function(t){var i=this;this.Li&&this.clearListener(),this.Li=t,this.Di=function(){i.Li&&(i.Li(window.devicePixelRatio,i.Ni),i.Wi())},this.Wi()},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearListener()},i.prototype.Wi=function(){var t;this.Di&&(null===(t=this.Fi)||void 0===t||t.removeListener(this.Di),this.Ni=window.devicePixelRatio,this.Fi=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this.Fi.addListener(this.Di))},i.prototype.clearListener=function(){this.Fi&&this.Li&&this.Di&&(this.Fi.removeListener(this.Di),this.Fi=void 0,this.Li=void 0,this.Di=void 0)},i}(n(844).Disposable);i.ScreenDprMonitor=s},3236:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.Terminal=void 0;var s=n(2950),h=n(1680),u=n(3614),o=n(2584),c=n(5435),f=n(3525),a=n(3551),l=n(9312),v=n(6114),d=n(3656),b=n(9042),w=n(357),m=n(6954),g=n(4567),p=n(1296),y=n(7399),O=n(8460),j=n(8437),_=n(5680),k=n(3230),M=n(4725),q=n(428),x=n(8934),A=n(6465),S=n(5114),R=n(8969),E=n(4774),C="undefined"!=typeof window?window.document:null,T=function(t){function i(i){void 0===i&&(i={});var n=t.call(this,i)||this;return n.browser=v,n.Ki=!1,n.Hi=new O.EventEmitter,n.at=new O.EventEmitter,n.zi=new O.EventEmitter,n.Gi=new O.EventEmitter,n.$i=new O.EventEmitter,n.Yi=new O.EventEmitter,n.Ji=new O.EventEmitter,n.Vi=new O.EventEmitter,n.Qi=new O.EventEmitter,n.Xi(),n.linkifier=n.Zi.createInstance(a.Linkifier),n.linkifier2=n.register(n.Zi.createInstance(A.Linkifier2)),n.register(n.tn.onRequestBell((function(){return n.bell()}))),n.register(n.tn.onRequestRefreshRows((function(t,i){return n.refresh(t,i)}))),n.register(n.tn.onRequestReset((function(){return n.reset()}))),n.register(n.tn.onRequestScroll((function(t,i){return n.scroll(t,i||void 0)}))),n.register(n.tn.onRequestWindowsOptionsReport((function(t){return n.nn(t)}))),n.register(n.tn.onAnsiColorChange((function(t){return n.rn(t)}))),n.register(O.forwardEvent(n.tn.onCursorMove,n.Hi)),n.register(O.forwardEvent(n.tn.onTitleChange,n.$i)),n.register(O.forwardEvent(n.tn.onA11yChar,n.Vi)),n.register(O.forwardEvent(n.tn.onA11yTab,n.Qi)),n.register(n.qt.onResize((function(t){return n.en(t.cols,t.rows)}))),n}return e(i,t),Object.defineProperty(i.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this.Hi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this.at.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this.zi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this.Gi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this.$i.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onFocus",{get:function(){return this.Yi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBlur",{get:function(){return this.Ji.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this.Vi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this.Qi.event},enumerable:!1,configurable:!0}),i.prototype.rn=function(t){var i,n,r=this;this.sn&&(t.colors.forEach((function(t){var i=E.rgba.toColor(t.red,t.green,t.blue);r.sn.colors.ansi[t.colorIndex]=i})),null===(i=this.D)||void 0===i||i.setColors(this.sn.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this.sn.colors))},i.prototype.dispose=function(){var i,n,r;this.hn||(t.prototype.dispose.call(this),null===(i=this.D)||void 0===i||i.dispose(),this.un=void 0,this.write=function(){},null===(r=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===r||r.removeChild(this.element))},i.prototype.Xi=function(){t.prototype.Xi.call(this),this.un=void 0},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},i.prototype.cn=function(i){var n,r,e,s;switch(t.prototype.cn.call(this,i),i){case"fontFamily":case"fontSize":null===(n=this.D)||void 0===n||n.clear(),null===(r=this.fn)||void 0===r||r.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this.D&&(this.D.clear(),this.D.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this.D&&(this.D.setRenderer(this.an()),this.D.onResize(this.cols,this.rows));break;case"scrollback":null===(e=this.viewport)||void 0===e||e.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this.ln&&this.D&&(this.ln=new g.AccessibilityManager(this,this.D)):(null===(s=this.ln)||void 0===s||s.dispose(),this.ln=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this.vn(this.optionsService.options.theme)}},i.prototype.dn=function(t){this.bn.decPrivateModes.sendFocus&&this.bn.triggerDataEvent(o.C0.ESC+"[I"),this.updateCursorStyle(t),this.element.classList.add("focus"),this.wn(),this.Yi.fire()},i.prototype.blur=function(){var t;return null===(t=this.textarea)||void 0===t?void 0:t.blur()},i.prototype.mn=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.bn.decPrivateModes.sendFocus&&this.bn.triggerDataEvent(o.C0.ESC+"[O"),this.element.classList.remove("focus"),this.Ji.fire()},i.prototype.gn=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this.pn.isComposing){var t=Math.ceil(this.fn.height*this.optionsService.options.lineHeight),i=this.qt.buffer.y*t,n=this.qt.buffer.x*this.fn.width;this.textarea.style.left=n+"px",this.textarea.style.top=i+"px",this.textarea.style.width=this.fn.width+"px",this.textarea.style.height=t+"px",this.textarea.style.lineHeight=t+"px",this.textarea.style.zIndex="-5"}},i.prototype.yn=function(){var t=this;this.On(),this.register(d.addDisposableDomListener(this.element,"copy",(function(i){t.hasSelection()&&u.copyHandler(i,t.di)})));var i=function(i){return u.handlePasteEvent(i,t.textarea,t.bn)};this.register(d.addDisposableDomListener(this.textarea,"paste",i)),this.register(d.addDisposableDomListener(this.element,"paste",i)),v.isFirefox?this.register(d.addDisposableDomListener(this.element,"mousedown",(function(i){2===i.button&&u.rightClickHandler(i,t.textarea,t.screenElement,t.di,t.options.rightClickSelectsWord)}))):this.register(d.addDisposableDomListener(this.element,"contextmenu",(function(i){u.rightClickHandler(i,t.textarea,t.screenElement,t.di,t.options.rightClickSelectsWord)}))),v.isLinux&&this.register(d.addDisposableDomListener(this.element,"auxclick",(function(i){1===i.button&&u.moveTextAreaUnderMouseCursor(i,t.textarea,t.screenElement)})))},i.prototype.On=function(){var t=this;this.register(d.addDisposableDomListener(this.textarea,"keyup",(function(i){return t.jn(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keydown",(function(i){return t._n(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keypress",(function(i){return t.kn(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"compositionstart",(function(){return t.pn.compositionstart()}))),this.register(d.addDisposableDomListener(this.textarea,"compositionupdate",(function(i){return t.pn.compositionupdate(i)}))),this.register(d.addDisposableDomListener(this.textarea,"compositionend",(function(){return t.pn.compositionend()}))),this.register(this.onRender((function(){return t.pn.updateCompositionElements()}))),this.register(this.onRender((function(i){return t.Mn(i.start,i.end)})))},i.prototype.open=function(t){var i=this;if(!t)throw new Error("Terminal requires a parent element.");C.body.contains(t)||this.xt.debug("Terminal.open was called on an element that was not attached to the DOM"),this.qn=t.ownerDocument,this.element=this.qn.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","document"),t.appendChild(this.element);var n=C.createDocumentFragment();this.xn=C.createElement("div"),this.xn.classList.add("xterm-viewport"),n.appendChild(this.xn),this.An=C.createElement("div"),this.An.classList.add("xterm-scroll-area"),this.xn.appendChild(this.An),this.screenElement=C.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.Sn=C.createElement("div"),this.Sn.classList.add("xterm-helpers"),this.screenElement.appendChild(this.Sn),n.appendChild(this.screenElement),this.textarea=C.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",b.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(d.addDisposableDomListener(this.textarea,"focus",(function(t){return i.dn(t)}))),this.register(d.addDisposableDomListener(this.textarea,"blur",(function(){return i.mn()}))),this.Sn.appendChild(this.textarea);var r=this.Zi.createInstance(S.CoreBrowserService,this.textarea);this.Zi.setService(M.ICoreBrowserService,r),this.fn=this.Zi.createInstance(q.CharSizeService,this.qn,this.Sn),this.Zi.setService(M.ICharSizeService,this.fn),this.Rn=C.createElement("div"),this.Rn.classList.add("composition-view"),this.pn=this.Zi.createInstance(s.CompositionHelper,this.textarea,this.Rn),this.Sn.appendChild(this.Rn),this.element.appendChild(n),this.En=this.options.theme||this.En,this.sn=new _.ColorManager(C,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(t){return i.sn.onOptionsChange(t)}))),this.sn.setTheme(this.En);var e=this.an();this.D=this.register(this.Zi.createInstance(k.RenderService,e,this.rows,this.screenElement)),this.Zi.setService(M.IRenderService,this.D),this.register(this.D.onRenderedBufferChange((function(t){return i.zi.fire(t)}))),this.onResize((function(t){return i.D.resize(t.cols,t.rows)})),this.Cn=this.Zi.createInstance(w.SoundService),this.Zi.setService(M.ISoundService,this.Cn),this.Yt=this.Zi.createInstance(x.MouseService),this.Zi.setService(M.IMouseService,this.Yt),this.viewport=this.Zi.createInstance(h.Viewport,(function(t,n){return i.scrollLines(t,n)}),this.xn,this.An),this.viewport.onThemeChange(this.sn.colors),this.register(this.tn.onRequestSyncScrollBar((function(){return i.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){i.D.onCursorMove(),i.gn()}))),this.register(this.onResize((function(){return i.D.onResize(i.cols,i.rows)}))),this.register(this.onBlur((function(){return i.D.onBlur()}))),this.register(this.onFocus((function(){return i.D.onFocus()}))),this.register(this.D.onDimensionsChange((function(){return i.viewport.syncScrollArea()}))),this.di=this.register(this.Zi.createInstance(l.SelectionService,this.element,this.screenElement)),this.Zi.setService(M.ISelectionService,this.di),this.register(this.di.onRequestScrollLines((function(t){return i.scrollLines(t.amount,t.suppressScrollEvent)}))),this.register(this.di.onSelectionChange((function(){return i.Gi.fire()}))),this.register(this.di.onRequestRedraw((function(t){return i.D.onSelectionChanged(t.start,t.end,t.columnSelectMode)}))),this.register(this.di.onLinuxMouseSelection((function(t){i.textarea.value=t,i.textarea.focus(),i.textarea.select()}))),this.register(this.onScroll((function(){i.viewport.syncScrollArea(),i.di.refresh()}))),this.register(d.addDisposableDomListener(this.xn,"scroll",(function(){return i.di.refresh()}))),this.Bt=this.Zi.createInstance(m.MouseZoneManager,this.element,this.screenElement),this.register(this.Bt),this.register(this.onScroll((function(){return i.Bt.clearAll()}))),this.linkifier.attachToDom(this.element,this.Bt),this.linkifier2.attachToDom(this.element,this.Yt,this.D),this.register(d.addDisposableDomListener(this.element,"mousedown",(function(t){return i.di.onMouseDown(t)}))),this.Tn.areMouseEventsActive?(this.di.disable(),this.element.classList.add("enable-mouse-events")):this.di.enable(),this.options.screenReaderMode&&(this.ln=new g.AccessibilityManager(this,this.D)),this.fn.measure(),this.refresh(0,this.rows-1),this.yn(),this.bindMouse()},i.prototype.an=function(){switch(this.options.rendererType){case"canvas":return this.Zi.createInstance(f.Renderer,this.sn.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this.Zi.createInstance(p.DomRenderer,this.sn.colors,this.element,this.screenElement,this.xn,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},i.prototype.vn=function(t){var i,n,r;this.En=t,null===(i=this.sn)||void 0===i||i.setTheme(t),null===(n=this.D)||void 0===n||n.setColors(this.sn.colors),null===(r=this.viewport)||void 0===r||r.onThemeChange(this.sn.colors)},i.prototype.bindMouse=function(){var t=this,i=this,n=this.element;function r(t){var n,r,e=i.Yt.getRawByteCoords(t,i.screenElement,i.cols,i.rows);if(!e)return!1;switch(t.overrideType||t.type){case"mousemove":r=32,void 0===t.buttons?(n=3,void 0!==t.button&&(n=t.button<3?t.button:3)):n=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":r=0,n=t.button<3?t.button:3;break;case"mousedown":r=1,n=t.button<3?t.button:3;break;case"wheel":0!==t.deltaY&&(r=t.deltaY<0?0:1),n=4;break;default:return!1}return!(void 0===r||void 0===n||n>4)&&i.Tn.triggerMouseEvent({col:e.x-33,row:e.y-33,button:n,action:r,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}var e={mouseup:null,wheel:null,mousedrag:null,mousemove:null},s=function(i){return r(i),i.buttons||(t.qn.removeEventListener("mouseup",e.mouseup),e.mousedrag&&t.qn.removeEventListener("mousemove",e.mousedrag)),t.cancel(i)},h=function(i){return r(i),i.preventDefault(),t.cancel(i)},u=function(t){t.buttons&&r(t)},c=function(t){t.buttons||r(t)};this.register(this.Tn.onProtocolChange((function(i){i?("debug"===t.optionsService.options.logLevel&&t.xt.debug("Binding to mouse events:",t.Tn.explainEvents(i)),t.element.classList.add("enable-mouse-events"),t.di.disable()):(t.xt.debug("Unbinding from mouse events."),t.element.classList.remove("enable-mouse-events"),t.di.enable()),8&i?e.mousemove||(n.addEventListener("mousemove",c),e.mousemove=c):(n.removeEventListener("mousemove",e.mousemove),e.mousemove=null),16&i?e.wheel||(n.addEventListener("wheel",h,{passive:!1}),e.wheel=h):(n.removeEventListener("wheel",e.wheel),e.wheel=null),2&i?e.mouseup||(e.mouseup=s):(t.qn.removeEventListener("mouseup",e.mouseup),e.mouseup=null),4&i?e.mousedrag||(e.mousedrag=u):(t.qn.removeEventListener("mousemove",e.mousedrag),e.mousedrag=null)}))),this.Tn.activeProtocol=this.Tn.activeProtocol,this.register(d.addDisposableDomListener(n,"mousedown",(function(i){if(i.preventDefault(),t.focus(),t.Tn.areMouseEventsActive&&!t.di.shouldForceSelection(i))return r(i),e.mouseup&&t.qn.addEventListener("mouseup",e.mouseup),e.mousedrag&&t.qn.addEventListener("mousemove",e.mousedrag),t.cancel(i)}))),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(e.wheel);else if(!t.buffer.hasScrollback){var n=t.viewport.getLinesScrolled(i);if(0===n)return;for(var r=o.C0.ESC+(t.bn.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B"),s="",h=0;h<Math.abs(n);h++)s+=r;t.bn.triggerDataEvent(s,!0)}}),{passive:!0})),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(!e.wheel)return t.viewport.onWheel(i)?void 0:t.cancel(i)}),{passive:!1})),this.register(d.addDisposableDomListener(n,"touchstart",(function(i){if(!t.Tn.areMouseEventsActive)return t.viewport.onTouchStart(i),t.cancel(i)}),{passive:!0})),this.register(d.addDisposableDomListener(n,"touchmove",(function(i){if(!t.Tn.areMouseEventsActive)return t.viewport.onTouchMove(i)?void 0:t.cancel(i)}),{passive:!1}))},i.prototype.refresh=function(t,i){var n;null===(n=this.D)||void 0===n||n.refreshRows(t,i)},i.prototype.Mn=function(t,i){var n;null===(n=this.linkifier)||void 0===n||n.linkifyRows(t,i)},i.prototype.updateCursorStyle=function(t){this.di&&this.di.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},i.prototype.wn=function(){this.bn.isCursorInitialized||(this.bn.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},i.prototype.scrollLines=function(i,n){t.prototype.scrollLines.call(this,i,n),this.refresh(0,this.rows-1)},i.prototype.paste=function(t){u.paste(t,this.textarea,this.bn)},i.prototype.attachCustomKeyEventHandler=function(t){this.un=t},i.prototype.registerLinkMatcher=function(t,i,n){var r=this.linkifier.registerLinkMatcher(t,i,n);return this.refresh(0,this.rows-1),r},i.prototype.deregisterLinkMatcher=function(t){this.linkifier.deregisterLinkMatcher(t)&&this.refresh(0,this.rows-1)},i.prototype.registerLinkProvider=function(t){return this.linkifier2.registerLinkProvider(t)},i.prototype.registerCharacterJoiner=function(t){var i=this.D.registerCharacterJoiner(t);return this.refresh(0,this.rows-1),i},i.prototype.deregisterCharacterJoiner=function(t){this.D.deregisterCharacterJoiner(t)&&this.refresh(0,this.rows-1)},Object.defineProperty(i.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),i.prototype.addMarker=function(t){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)},i.prototype.hasSelection=function(){return!!this.di&&this.di.hasSelection},i.prototype.select=function(t,i,n){this.di.setSelection(t,i,n)},i.prototype.getSelection=function(){return this.di?this.di.selectionText:""},i.prototype.getSelectionPosition=function(){if(this.di&&this.di.hasSelection)return{startColumn:this.di.selectionStart[0],startRow:this.di.selectionStart[1],endColumn:this.di.selectionEnd[0],endRow:this.di.selectionEnd[1]}},i.prototype.clearSelection=function(){var t;null===(t=this.di)||void 0===t||t.clearSelection()},i.prototype.selectAll=function(){var t;null===(t=this.di)||void 0===t||t.selectAll()},i.prototype.selectLines=function(t,i){var n;null===(n=this.di)||void 0===n||n.selectLines(t,i)},i.prototype._n=function(t){if(this.Ki=!1,this.un&&!1===this.un(t))return!1;if(!this.pn.keydown(t))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var i=y.evaluateKeyboardEvent(t,this.bn.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),3===i.type||2===i.type){var n=this.rows-1;return this.scrollLines(2===i.type?-n:n),this.cancel(t,!0)}return 1===i.type&&this.selectAll(),!!this.In(this.browser,t)||(i.cancel&&this.cancel(t,!0),!i.key||(i.key!==o.C0.ETX&&i.key!==o.C0.CR||(this.textarea.value=""),this.at.fire({key:i.key,domEvent:t}),this.wn(),this.bn.triggerDataEvent(i.key,!0),this.optionsService.options.screenReaderMode?void(this.Ki=!0):this.cancel(t,!0)))},i.prototype.In=function(t,i){var n=t.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||t.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey;return"keypress"===i.type?n:n&&(!i.keyCode||i.keyCode>47)},i.prototype.jn=function(t){this.un&&!1===this.un(t)||(function(t){return 16===t.keyCode||17===t.keyCode||18===t.keyCode}(t)||this.focus(),this.updateCursorStyle(t))},i.prototype.kn=function(t){var i;if(this.Ki)return!1;if(this.un&&!1===this.un(t))return!1;if(this.cancel(t),t.charCode)i=t.charCode;else if(null===t.which||void 0===t.which)i=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;i=t.which}return!(!i||(t.altKey||t.ctrlKey||t.metaKey)&&!this.In(this.browser,t)||(i=String.fromCharCode(i),this.at.fire({key:i,domEvent:t}),this.wn(),this.bn.triggerDataEvent(i,!0),0))},i.prototype.bell=function(){this.Un()&&this.Cn.playBellSound()},i.prototype.resize=function(i,n){i!==this.cols||n!==this.rows?t.prototype.resize.call(this,i,n):this.fn&&!this.fn.hasValidSize&&this.fn.measure()},i.prototype.en=function(t,i){var n,r;null===(n=this.fn)||void 0===n||n.measure(),null===(r=this.viewport)||void 0===r||r.syncScrollArea(!0)},i.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this.Bn.fire(this.buffer.ydisp)}},i.prototype.reset=function(){var i,n;this.options.rows=this.rows,this.options.cols=this.cols;var r=this.un;this.Xi(),t.prototype.reset.call(this),null===(i=this.di)||void 0===i||i.reset(),this.un=r,this.refresh(0,this.rows-1),null===(n=this.viewport)||void 0===n||n.syncScrollArea()},i.prototype.nn=function(t){if(this.D)switch(t){case c.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var i=this.D.dimensions.scaledCanvasWidth.toFixed(0),n=this.D.dimensions.scaledCanvasHeight.toFixed(0);this.bn.triggerDataEvent(o.C0.ESC+"[4;"+n+";"+i+"t");break;case c.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var r=this.D.dimensions.scaledCellWidth.toFixed(0),e=this.D.dimensions.scaledCellHeight.toFixed(0);this.bn.triggerDataEvent(o.C0.ESC+"[6;"+e+";"+r+"t")}},i.prototype.cancel=function(t,i){if(this.options.cancelEvents||i)return t.preventDefault(),t.stopPropagation(),!1},i.prototype.Pn=function(){return!1},i.prototype.Un=function(){return"sound"===this.options.bellStyle},i}(R.CoreTerminal);i.Terminal=T},1680:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.Viewport=void 0;var u=n(844),o=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,r,e,s,h,u){var c=t.call(this)||this;return c.Nn=i,c.xn=n,c.Ln=r,c.qt=e,c.bi=s,c.fn=h,c.D=u,c.scrollBarWidth=0,c.Dn=0,c.Wn=0,c.Fn=0,c.Kn=0,c.Hn=0,c.zn=0,c.Gn=0,c.$n=null,c.Yn=!1,c.scrollBarWidth=c.xn.offsetWidth-c.Ln.offsetWidth||15,c.register(o.addDisposableDomListener(c.xn,"scroll",c.Bn.bind(c))),setTimeout((function(){return c.syncScrollArea()}),0),c}return e(i,t),i.prototype.onThemeChange=function(t){this.xn.style.backgroundColor=t.background.css},i.prototype.Jn=function(t){var i=this;if(t)return this.Pi(),void(null!==this.$n&&cancelAnimationFrame(this.$n));null===this.$n&&(this.$n=requestAnimationFrame((function(){return i.Pi()})))},i.prototype.Pi=function(){if(this.fn.height>0){this.Dn=this.D.dimensions.scaledCellHeight/window.devicePixelRatio,this.Fn=this.xn.offsetHeight;var t=Math.round(this.Dn*this.Wn)+(this.Fn-this.D.dimensions.canvasHeight);this.Kn!==t&&(this.Kn=t,this.Ln.style.height=this.Kn+"px")}var i=this.qt.buffer.ydisp*this.Dn;this.xn.scrollTop!==i&&(this.Yn=!0,this.xn.scrollTop=i),this.$n=null},i.prototype.syncScrollArea=function(t){if(void 0===t&&(t=!1),this.Wn!==this.qt.buffer.lines.length)return this.Wn=this.qt.buffer.lines.length,void this.Jn(t);if(this.Fn===this.D.dimensions.canvasHeight){var i=this.qt.buffer.ydisp*this.Dn;this.zn===i&&this.zn===this.xn.scrollTop&&this.D.dimensions.scaledCellHeight/window.devicePixelRatio===this.Dn||this.Jn(t)}else this.Jn(t)},i.prototype.Bn=function(t){if(this.zn=this.xn.scrollTop,this.xn.offsetParent)if(this.Yn)this.Yn=!1;else{var i=Math.round(this.zn/this.Dn)-this.qt.buffer.ydisp;this.Nn(i,!0)}},i.prototype.Vn=function(t,i){var n=this.xn.scrollTop+this.Fn;return!(i<0&&0!==this.xn.scrollTop||i>0&&n<this.Kn)||(t.cancelable&&t.preventDefault(),!1)},i.prototype.onWheel=function(t){var i=this.Qn(t);return 0!==i&&(this.xn.scrollTop+=i,this.Vn(t,i))},i.prototype.Qn=function(t){if(0===t.deltaY)return 0;var i=this.Xn(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this.Dn:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this.Dn*this.qt.rows),i},i.prototype.getLinesScrolled=function(t){if(0===t.deltaY)return 0;var i=this.Xn(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this.Dn+0,this.Gn+=i,i=Math.floor(Math.abs(this.Gn))*(this.Gn>0?1:-1),this.Gn%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this.qt.rows),i},i.prototype.Xn=function(t,i){var n=this.bi.options.fastScrollModifier;return"alt"===n&&i.altKey||"ctrl"===n&&i.ctrlKey||"shift"===n&&i.shiftKey?t*this.bi.options.fastScrollSensitivity*this.bi.options.scrollSensitivity:t*this.bi.options.scrollSensitivity},i.prototype.onTouchStart=function(t){this.Hn=t.touches[0].pageY},i.prototype.onTouchMove=function(t){var i=this.Hn-t.touches[0].pageY;return this.Hn=t.touches[0].pageY,0!==i&&(this.xn.scrollTop+=i,this.Vn(t,i))},s([h(3,f.IBufferService),h(4,f.IOptionsService),h(5,c.ICharSizeService),h(6,c.IRenderService)],i)}(u.Disposable);i.Viewport=a},2950:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.CompositionHelper=void 0;var s=n(4725),h=n(2585),u=function(){function t(t,i,n,r,e,s){this.Zn=t,this.Rn=i,this.qt=n,this.bi=r,this.fn=e,this.bn=s,this.tr=!1,this.ir=!1,this.nr={start:0,end:0},this.rr=""}return Object.defineProperty(t.prototype,"isComposing",{get:function(){return this.tr},enumerable:!1,configurable:!0}),t.prototype.compositionstart=function(){this.tr=!0,this.nr.start=this.Zn.value.length,this.Rn.textContent="",this.rr="",this.Rn.classList.add("active")},t.prototype.compositionupdate=function(t){var i=this;this.Rn.textContent=t.data,this.updateCompositionElements(),setTimeout((function(){i.nr.end=i.Zn.value.length}),0)},t.prototype.compositionend=function(){this.er(!0)},t.prototype.keydown=function(t){if(this.tr||this.ir){if(229===t.keyCode)return!1;if(16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this.er(!1)}return 229!==t.keyCode||(this.sr(),!1)},t.prototype.er=function(t){var i=this;if(this.Rn.classList.remove("active"),this.tr=!1,t){var n={start:this.nr.start,end:this.nr.end};this.ir=!0,setTimeout((function(){var t;i.ir&&(i.ir=!1,n.start+=i.rr.length,(t=i.tr?i.Zn.value.substring(n.start,n.end):i.Zn.value.substring(n.start)).length>0&&i.bn.triggerDataEvent(t,!0))}),0)}else{this.ir=!1;var r=this.Zn.value.substring(this.nr.start,this.nr.end);this.bn.triggerDataEvent(r,!0)}},t.prototype.sr=function(){var t=this,i=this.Zn.value;setTimeout((function(){if(!t.tr){var n=t.Zn.value.replace(i,"");n.length>0&&(t.rr=n,t.bn.triggerDataEvent(n,!0))}}),0)},t.prototype.updateCompositionElements=function(t){var i=this;if(this.tr){if(this.qt.buffer.isCursorInViewport){var n=Math.ceil(this.fn.height*this.bi.options.lineHeight),r=this.qt.buffer.y*n,e=this.qt.buffer.x*this.fn.width;this.Rn.style.left=e+"px",this.Rn.style.top=r+"px",this.Rn.style.height=n+"px",this.Rn.style.lineHeight=n+"px",this.Rn.style.fontFamily=this.bi.options.fontFamily,this.Rn.style.fontSize=this.bi.options.fontSize+"px";var s=this.Rn.getBoundingClientRect();this.Zn.style.left=e+"px",this.Zn.style.top=r+"px",this.Zn.style.width=s.width+"px",this.Zn.style.height=s.height+"px",this.Zn.style.lineHeight=s.height+"px"}t||setTimeout((function(){return i.updateCompositionElements(!0)}),0)}},r([e(2,h.IBufferService),e(3,h.IOptionsService),e(4,s.ICharSizeService),e(5,h.ICoreService)],t)}();i.CompositionHelper=u},9806:(t,i)=>{function n(t,i){var n=i.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]}Object.defineProperty(i,"N",{value:!0}),i.getRawByteCoords=i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(t,i,r,e,s,h,u,o){if(s){var c=n(t,i);if(c)return c[0]=Math.ceil((c[0]+(o?h/2:0))/h),c[1]=Math.ceil(c[1]/u),c[0]=Math.min(Math.max(c[0],1),r+(o?1:0)),c[1]=Math.min(Math.max(c[1],1),e),c}},i.getRawByteCoords=function(t){if(t)return{x:t[0]+32,y:t[1]+32}}},9504:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.moveToCellSequence=void 0;var r=n(2584);function e(t,i,n,r){var e=t-s(n,t),u=i-s(n,i);return c(Math.abs(e-u)-function(t,i,n){for(var r=0,e=t-s(n,t),u=i-s(n,i),o=0;o<Math.abs(e-u);o++){var c="A"===h(t,i)?-1:1,f=n.buffer.lines.get(e+c*o);f&&f.isWrapped&&r++}return r}(t,i,n),o(h(t,i),r))}function s(t,i){for(var n=0,r=t.buffer.lines.get(i),e=r&&r.isWrapped;e&&i>=0&&i<t.rows;)n++,e=(r=t.buffer.lines.get(--i))&&r.isWrapped;return n}function h(t,i){return t>i?"A":"B"}function u(t,i,n,r,e,s){for(var h=t,u=i,o="";h!==n||u!==r;)h+=e?1:-1,e&&h>s.cols-1?(o+=s.buffer.translateBufferLineToString(u,!1,t,h),h=0,t=0,u++):!e&&h<0&&(o+=s.buffer.translateBufferLineToString(u,!1,0,t+1),t=h=s.cols-1,u--);return o+s.buffer.translateBufferLineToString(u,!1,t,h)}function o(t,i){var n=i?"O":"[";return r.C0.ESC+n+t}function c(t,i){t=Math.floor(t);for(var n="",r=0;r<t;r++)n+=i;return n}i.moveToCellSequence=function(t,i,n,r){var h,f=n.buffer.x,a=n.buffer.y;if(!n.buffer.hasScrollback)return function(t,i,n,r,h,f){return 0===e(i,r,h,f).length?"":c(u(t,i,t,i-s(h,i),!1,h).length,o("D",f))}(f,a,0,i,n,r)+e(a,i,n,r)+function(t,i,n,r,h,f){var a;a=e(i,r,h,f).length>0?r-s(h,r):i;var l=r,v=function(t,i,n,r,h,u){var o;return o=e(n,r,h,u).length>0?r-s(h,r):i,t<n&&o<=r||t>=n&&o<r?"C":"D"}(t,i,n,r,h,f);return c(u(t,a,n,l,"C"===v,h).length,o(v,f))}(f,a,t,i,n,r);if(a===i)return h=f>t?"D":"C",c(Math.abs(f-t),o(h,r));h=a>i?"D":"C";var l=Math.abs(a-i);return c(function(t,i){return i.cols-t}(a>i?t:f,n)+(l-1)*n.cols+1+((a>i?f:t)-1),o(h,r))}},244:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.AddonManager=void 0;var n=function(){function t(){this.hr=[]}return t.prototype.dispose=function(){for(var t=this.hr.length-1;t>=0;t--)this.hr[t].instance.dispose()},t.prototype.loadAddon=function(t,i){var n=this,r={instance:i,dispose:i.dispose,isDisposed:!1};this.hr.push(r),i.dispose=function(){return n.ur(r)},i.activate(t)},t.prototype.ur=function(t){if(!t.isDisposed){for(var i=-1,n=0;n<this.hr.length;n++)if(this.hr[n]===t){i=n;break}if(-1===i)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this.hr.splice(i,1)}},t}();i.AddonManager=n},4389:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.Terminal=void 0;var r=n(511),e=n(3236),s=n(9042),h=n(8460),u=n(244),o=function(){function t(t){this.cr=new e.Terminal(t),this.ar=new u.AddonManager}return t.prototype.lr=function(){if(!this.cr.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this.cr.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this.cr.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this.cr.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this.cr.onData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this.cr.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this.cr.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this.cr.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this.cr.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this.cr.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this.cr.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.cr.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this.lr(),this.vr||(this.vr=new l(this.cr)),this.vr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unicode",{get:function(){return this.lr(),new v(this.cr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textarea",{get:function(){return this.cr.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.cr.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.cr.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.lr(),this.dr||(this.dr=new f(this.cr)),this.dr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markers",{get:function(){return this.lr(),this.cr.markers},enumerable:!1,configurable:!0}),t.prototype.blur=function(){this.cr.blur()},t.prototype.focus=function(){this.cr.focus()},t.prototype.resize=function(t,i){this.br(t,i),this.cr.resize(t,i)},t.prototype.open=function(t){this.cr.open(t)},t.prototype.attachCustomKeyEventHandler=function(t){this.cr.attachCustomKeyEventHandler(t)},t.prototype.registerLinkMatcher=function(t,i,n){return this.lr(),this.cr.registerLinkMatcher(t,i,n)},t.prototype.deregisterLinkMatcher=function(t){this.lr(),this.cr.deregisterLinkMatcher(t)},t.prototype.registerLinkProvider=function(t){return this.lr(),this.cr.registerLinkProvider(t)},t.prototype.registerCharacterJoiner=function(t){return this.lr(),this.cr.registerCharacterJoiner(t)},t.prototype.deregisterCharacterJoiner=function(t){this.lr(),this.cr.deregisterCharacterJoiner(t)},t.prototype.registerMarker=function(t){return this.lr(),this.br(t),this.cr.addMarker(t)},t.prototype.addMarker=function(t){return this.registerMarker(t)},t.prototype.hasSelection=function(){return this.cr.hasSelection()},t.prototype.select=function(t,i,n){this.br(t,i,n),this.cr.select(t,i,n)},t.prototype.getSelection=function(){return this.cr.getSelection()},t.prototype.getSelectionPosition=function(){return this.cr.getSelectionPosition()},t.prototype.clearSelection=function(){this.cr.clearSelection()},t.prototype.selectAll=function(){this.cr.selectAll()},t.prototype.selectLines=function(t,i){this.br(t,i),this.cr.selectLines(t,i)},t.prototype.dispose=function(){this.ar.dispose(),this.cr.dispose()},t.prototype.scrollLines=function(t){this.br(t),this.cr.scrollLines(t)},t.prototype.scrollPages=function(t){this.br(t),this.cr.scrollPages(t)},t.prototype.scrollToTop=function(){this.cr.scrollToTop()},t.prototype.scrollToBottom=function(){this.cr.scrollToBottom()},t.prototype.scrollToLine=function(t){this.br(t),this.cr.scrollToLine(t)},t.prototype.clear=function(){this.cr.clear()},t.prototype.write=function(t,i){this.cr.write(t,i)},t.prototype.writeUtf8=function(t,i){this.cr.write(t,i)},t.prototype.writeln=function(t,i){this.cr.write(t),this.cr.write("\r\n",i)},t.prototype.paste=function(t){this.cr.paste(t)},t.prototype.getOption=function(t){return this.cr.optionsService.getOption(t)},t.prototype.setOption=function(t,i){this.cr.optionsService.setOption(t,i)},t.prototype.refresh=function(t,i){this.br(t,i),this.cr.refresh(t,i)},t.prototype.reset=function(){this.cr.reset()},t.prototype.loadAddon=function(t){return this.ar.loadAddon(this,t)},Object.defineProperty(t,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),t.prototype.br=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=0,r=t;n<r.length;n++){var e=r[n];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},t}();i.Terminal=o;var c=function(){function t(t,i){this.dr=t,this.type=i}return t.prototype.init=function(t){return this.dr=t,this},Object.defineProperty(t.prototype,"cursorY",{get:function(){return this.dr.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorX",{get:function(){return this.dr.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.dr.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseY",{get:function(){return this.dr.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.dr.lines.length},enumerable:!1,configurable:!0}),t.prototype.getLine=function(t){var i=this.dr.lines.get(t);if(i)return new a(i)},t.prototype.getNullCell=function(){return new r.CellData},t}(),f=function(){function t(t){var i=this;this.cr=t,this.wr=new h.EventEmitter,this.mr=new c(this.cr.buffers.normal,"normal"),this.gr=new c(this.cr.buffers.alt,"alternate"),this.cr.buffers.onBufferActivate((function(){return i.wr.fire(i.active)}))}return Object.defineProperty(t.prototype,"onBufferChange",{get:function(){return this.wr.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){if(this.cr.buffers.active===this.cr.buffers.normal)return this.normal;if(this.cr.buffers.active===this.cr.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this.mr.init(this.cr.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alternate",{get:function(){return this.gr.init(this.cr.buffers.alt)},enumerable:!1,configurable:!0}),t}(),a=function(){function t(t){this.pr=t}return Object.defineProperty(t.prototype,"isWrapped",{get:function(){return this.pr.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.pr.length},enumerable:!1,configurable:!0}),t.prototype.getCell=function(t,i){if(!(t<0||t>=this.pr.length))return i?(this.pr.loadCell(t,i),i):this.pr.loadCell(t,new r.CellData)},t.prototype.translateToString=function(t,i,n){return this.pr.translateToString(t,i,n)},t}(),l=function(){function t(t){this.cr=t}return t.prototype.registerCsiHandler=function(t,i){return this.cr.addCsiHandler(t,(function(t){return i(t.toArray())}))},t.prototype.addCsiHandler=function(t,i){return this.registerCsiHandler(t,i)},t.prototype.registerDcsHandler=function(t,i){return this.cr.addDcsHandler(t,(function(t,n){return i(t,n.toArray())}))},t.prototype.addDcsHandler=function(t,i){return this.registerDcsHandler(t,i)},t.prototype.registerEscHandler=function(t,i){return this.cr.addEscHandler(t,i)},t.prototype.addEscHandler=function(t,i){return this.registerEscHandler(t,i)},t.prototype.registerOscHandler=function(t,i){return this.cr.addOscHandler(t,i)},t.prototype.addOscHandler=function(t,i){return this.registerOscHandler(t,i)},t}(),v=function(){function t(t){this.cr=t}return t.prototype.register=function(t){this.cr.unicodeService.register(t)},Object.defineProperty(t.prototype,"versions",{get:function(){return this.cr.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this.cr.unicodeService.activeVersion},set:function(t){this.cr.unicodeService.activeVersion=t},enumerable:!1,configurable:!0}),t}()},1546:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.BaseRenderLayer=void 0;var r=n(643),e=n(8803),s=n(1420),h=n(3734),u=n(1752),o=n(4774),c=n(9631),f=function(){function t(t,i,n,r,e,s,h,u){this.yr=t,this.Or=r,this.jr=e,this._r=s,this.qt=h,this.bi=u,this.kr=0,this.Mr=0,this.qr=0,this.Ar=0,this.Sr=0,this.Rr=0,this.Er={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this.Cr=document.createElement("canvas"),this.Cr.classList.add("xterm-"+i+"-layer"),this.Cr.style.zIndex=n.toString(),this.Tr(),this.yr.appendChild(this.Cr)}return t.prototype.dispose=function(){var t;c.removeElementFromParent(this.Cr),null===(t=this.Ir)||void 0===t||t.dispose()},t.prototype.Tr=function(){this.yt=u.throwIfFalsy(this.Cr.getContext("2d",{alpha:this.Or})),this.Or||this.Ur()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(t,i){},t.prototype.onSelectionChanged=function(t,i,n){void 0===n&&(n=!1)},t.prototype.setColors=function(t){this.Br(t)},t.prototype.Pr=function(t){if(t!==this.Or){var i=this.Cr;this.Or=t,this.Cr=this.Cr.cloneNode(),this.Tr(),this.yr.replaceChild(this.Cr,i),this.Br(this.jr),this.onGridChanged(0,this.qt.rows-1)}},t.prototype.Br=function(t){this.kr<=0&&this.Mr<=0||(this.Ir=s.acquireCharAtlas(this.bi.options,this._r,t,this.kr,this.Mr),this.Ir.warmUp())},t.prototype.resize=function(t){this.qr=t.scaledCellWidth,this.Ar=t.scaledCellHeight,this.kr=t.scaledCharWidth,this.Mr=t.scaledCharHeight,this.Sr=t.scaledCharLeft,this.Rr=t.scaledCharTop,this.Cr.width=t.scaledCanvasWidth,this.Cr.height=t.scaledCanvasHeight,this.Cr.style.width=t.canvasWidth+"px",this.Cr.style.height=t.canvasHeight+"px",this.Or||this.Ur(),this.Br(this.jr)},t.prototype.Nr=function(t,i,n,r){this.yt.fillRect(t*this.qr,i*this.Ar,n*this.qr,r*this.Ar)},t.prototype.Lr=function(t,i,n){void 0===n&&(n=1),this.yt.fillRect(t*this.qr,(i+1)*this.Ar-window.devicePixelRatio-1,n*this.qr,window.devicePixelRatio)},t.prototype.Dr=function(t,i,n){this.yt.fillRect(t*this.qr,i*this.Ar,window.devicePixelRatio*n,this.Ar)},t.prototype.Wr=function(t,i,n,r){this.yt.lineWidth=window.devicePixelRatio,this.yt.strokeRect(t*this.qr+window.devicePixelRatio/2,i*this.Ar+window.devicePixelRatio/2,n*this.qr-window.devicePixelRatio,r*this.Ar-window.devicePixelRatio)},t.prototype.Ur=function(){this.Or?this.yt.clearRect(0,0,this.Cr.width,this.Cr.height):(this.yt.fillStyle=this.jr.background.css,this.yt.fillRect(0,0,this.Cr.width,this.Cr.height))},t.prototype.Fr=function(t,i,n,r){this.Or?this.yt.clearRect(t*this.qr,i*this.Ar,n*this.qr,r*this.Ar):(this.yt.fillStyle=this.jr.background.css,this.yt.fillRect(t*this.qr,i*this.Ar,n*this.qr,r*this.Ar))},t.prototype.Kr=function(t,i,n){this.yt.font=this.Hr(!1,!1),this.yt.textBaseline="middle",this.zr(n),this.yt.fillText(t.getChars(),i*this.qr+this.Sr,n*this.Ar+this.Rr+this.Mr/2)},t.prototype.Gr=function(t,i,n){var s,h,u=this.$r(t);u||t.isFgRGB()||t.isBgRGB()?this.Yr(t,i,n,u):(t.isInverse()?(s=t.isBgDefault()?e.INVERTED_DEFAULT_COLOR:t.getBgColor(),h=t.isFgDefault()?e.INVERTED_DEFAULT_COLOR:t.getFgColor()):(h=t.isBgDefault()?r.DEFAULT_COLOR:t.getBgColor(),s=t.isFgDefault()?r.DEFAULT_COLOR:t.getFgColor()),s+=this.bi.options.drawBoldTextInBrightColors&&t.isBold()&&s<8?8:0,this.Er.chars=t.getChars()||r.WHITESPACE_CELL_CHAR,this.Er.code=t.getCode()||r.WHITESPACE_CELL_CODE,this.Er.bg=h,this.Er.fg=s,this.Er.bold=!!t.isBold(),this.Er.dim=!!t.isDim(),this.Er.italic=!!t.isItalic(),this.Ir&&this.Ir.draw(this.yt,this.Er,i*this.qr+this.Sr,n*this.Ar+this.Rr)||this.Yr(t,i,n))},t.prototype.Yr=function(t,i,n,r){if(this.yt.save(),this.yt.font=this.Hr(!!t.isBold(),!!t.isItalic()),this.yt.textBaseline="middle",t.isInverse())if(r)this.yt.fillStyle=r.css;else if(t.isBgDefault())this.yt.fillStyle=o.color.opaque(this.jr.background).css;else if(t.isBgRGB())this.yt.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var s=t.getBgColor();this.bi.options.drawBoldTextInBrightColors&&t.isBold()&&s<8&&(s+=8),this.yt.fillStyle=this.jr.ansi[s].css}else if(r)this.yt.fillStyle=r.css;else if(t.isFgDefault())this.yt.fillStyle=this.jr.foreground.css;else if(t.isFgRGB())this.yt.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var u=t.getFgColor();this.bi.options.drawBoldTextInBrightColors&&t.isBold()&&u<8&&(u+=8),this.yt.fillStyle=this.jr.ansi[u].css}this.zr(n),t.isDim()&&(this.yt.globalAlpha=e.DIM_OPACITY),this.yt.fillText(t.getChars(),i*this.qr+this.Sr,n*this.Ar+this.Rr+this.Mr/2),this.yt.restore()},t.prototype.zr=function(t){this.yt.beginPath(),this.yt.rect(0,t*this.Ar,this.qt.cols*this.qr,this.Ar),this.yt.clip()},t.prototype.Hr=function(t,i){return(i?"italic":"")+" "+(t?this.bi.options.fontWeightBold:this.bi.options.fontWeight)+" "+this.bi.options.fontSize*window.devicePixelRatio+"px "+this.bi.options.fontFamily},t.prototype.$r=function(t){if(1!==this.bi.options.minimumContrastRatio){var i=this.jr.contrastCache.getColor(t.bg,t.fg);if(void 0!==i)return i||void 0;var n=t.getFgColor(),r=t.getFgColorMode(),e=t.getBgColor(),s=t.getBgColorMode(),h=!!t.isInverse(),u=!!t.isInverse();if(h){var c=n;n=e,e=c;var f=r;r=s,s=f}var a=this.Jr(s,e,h),l=this.Vr(r,n,h,u),v=o.rgba.ensureContrastRatio(a,l,this.bi.options.minimumContrastRatio);if(v){var d={css:o.channels.toCss(v>>24&255,v>>16&255,v>>8&255),rgba:v};return this.jr.contrastCache.setColor(t.bg,t.fg,d),d}this.jr.contrastCache.setColor(t.bg,t.fg,null)}},t.prototype.Jr=function(t,i,n){switch(t){case 16777216:case 33554432:return this.jr.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this.jr.foreground.rgba:this.jr.background.rgba}},t.prototype.Vr=function(t,i,n,r){switch(t){case 16777216:case 33554432:return this.bi.options.drawBoldTextInBrightColors&&r&&i<8&&(i+=8),this.jr.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this.jr.background.rgba:this.jr.foreground.rgba}},t}();i.BaseRenderLayer=f},5879:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.CharacterJoinerRegistry=i.JoinedCellData=void 0;var s=n(3734),h=n(643),u=n(511),o=function(t){function i(i,n,r){var e=t.call(this)||this;return e.content=0,e.combinedData="",e.fg=i.fg,e.bg=i.bg,e.combinedData=n,e.Qr=r,e}return e(i,t),i.prototype.isCombined=function(){return 2097152},i.prototype.getWidth=function(){return this.Qr},i.prototype.getChars=function(){return this.combinedData},i.prototype.getCode=function(){return 2097151},i.prototype.setFromCharData=function(t){throw new Error("not implemented")},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(s.AttributeData);i.JoinedCellData=o;var c=function(){function t(t){this.qt=t,this.Xr=[],this.Zr=0,this.te=new u.CellData}return t.prototype.registerCharacterJoiner=function(t){var i={id:this.Zr++,handler:t};return this.Xr.push(i),i.id},t.prototype.deregisterCharacterJoiner=function(t){for(var i=0;i<this.Xr.length;i++)if(this.Xr[i].id===t)return this.Xr.splice(i,1),!0;return!1},t.prototype.getJoinedCharacters=function(t){if(0===this.Xr.length)return[];var i=this.qt.buffer.lines.get(t);if(!i||0===i.length)return[];for(var n=[],r=i.translateToString(!0),e=0,s=0,u=0,o=i.getFg(0),c=i.getBg(0),f=0;f<i.getTrimmedLength();f++)if(i.loadCell(f,this.te),0!==this.te.getWidth()){if(this.te.fg!==o||this.te.bg!==c){if(f-e>1)for(var a=this.ie(r,u,s,i,e),l=0;l<a.length;l++)n.push(a[l]);e=f,u=s,o=this.te.fg,c=this.te.bg}s+=this.te.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this.qt.cols-e>1)for(a=this.ie(r,u,s,i,e),l=0;l<a.length;l++)n.push(a[l]);return n},t.prototype.ie=function(i,n,r,e,s){for(var h=i.substring(n,r),u=this.Xr[0].handler(h),o=1;o<this.Xr.length;o++)for(var c=this.Xr[o].handler(h),f=0;f<c.length;f++)t.ne(u,c[f]);return this.re(u,e,s),u},t.prototype.re=function(t,i,n){var r=0,e=!1,s=0,u=t[r];if(u){for(var o=n;o<this.qt.cols;o++){var c=i.getWidth(o),f=i.getString(o).length||h.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!e&&u[0]<=s&&(u[0]=o,e=!0),u[1]<=s){if(u[1]=o,!(u=t[++r]))break;u[0]<=s?(u[0]=o,e=!0):e=!1}s+=f}}u&&(u[1]=this.qt.cols)}},t.ne=function(t,i){for(var n=!1,r=0;r<t.length;r++){var e=t[r];if(n){if(i[1]<=e[0])return t[r-1][1]=i[1],t;if(i[1]<=e[1])return t[r-1][1]=Math.max(i[1],e[1]),t.splice(r,1),t;t.splice(r,1),r--}else{if(i[1]<=e[0])return t.splice(r,0,i),t;if(i[1]<=e[1])return e[0]=Math.min(i[0],e[0]),t;i[0]<e[1]&&(e[0]=Math.min(i[0],e[0]),n=!0)}}return n?t[t.length-1][1]=i[1]:t.push(i),t},t}();i.CharacterJoinerRegistry=c},2512:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.CursorRenderLayer=void 0;var s=n(1546),h=n(511),u=600,o=function(t){function i(i,n,r,e,s,u,o,c,f){var a=t.call(this,i,"cursor",n,!0,r,e,u,o)||this;return a.ee=s,a.bn=c,a.se=f,a.he=new h.CellData,a.ue={x:0,y:0,isFocused:!1,style:"",width:0},a.oe={bar:a.ce.bind(a),block:a.fe.bind(a),underline:a.ae.bind(a)},a}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this.ue={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this.le(),this.ve&&(this.ve.dispose(),this.ve=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this.ve&&this.ve.pause(),this.ee.fire({start:this.qt.buffer.y,end:this.qt.buffer.y})},i.prototype.onFocus=function(){this.ve?this.ve.resume():this.ee.fire({start:this.qt.buffer.y,end:this.qt.buffer.y})},i.prototype.onOptionsChanged=function(){var t,i=this;this.bi.options.cursorBlink?this.ve||(this.ve=new c(this.se.isFocused,(function(){i.de(!0)}))):(null===(t=this.ve)||void 0===t||t.dispose(),this.ve=void 0),this.ee.fire({start:this.qt.buffer.y,end:this.qt.buffer.y})},i.prototype.onCursorMove=function(){this.ve&&this.ve.restartBlinkAnimation()},i.prototype.onGridChanged=function(t,i){!this.ve||this.ve.isPaused?this.de(!1):this.ve.restartBlinkAnimation()},i.prototype.de=function(t){if(this.bn.isCursorInitialized&&!this.bn.isCursorHidden){var i=this.qt.buffer.ybase+this.qt.buffer.y,n=i-this.qt.buffer.ydisp;if(n<0||n>=this.qt.rows)this.le();else{var r=Math.min(this.qt.buffer.x,this.qt.cols-1);if(this.qt.buffer.lines.get(i).loadCell(r,this.he),void 0!==this.he.content){if(!this.se.isFocused){this.le(),this.yt.save(),this.yt.fillStyle=this.jr.cursor.css;var e=this.bi.options.cursorStyle;return e&&"block"!==e?this.oe[e](r,n,this.he):this.be(r,n,this.he),this.yt.restore(),this.ue.x=r,this.ue.y=n,this.ue.isFocused=!1,this.ue.style=e,void(this.ue.width=this.he.getWidth())}if(!this.ve||this.ve.isCursorVisible){if(this.ue){if(this.ue.x===r&&this.ue.y===n&&this.ue.isFocused===this.se.isFocused&&this.ue.style===this.bi.options.cursorStyle&&this.ue.width===this.he.getWidth())return;this.le()}this.yt.save(),this.oe[this.bi.options.cursorStyle||"block"](r,n,this.he),this.yt.restore(),this.ue.x=r,this.ue.y=n,this.ue.isFocused=!1,this.ue.style=this.bi.options.cursorStyle,this.ue.width=this.he.getWidth()}else this.le()}}}else this.le()},i.prototype.le=function(){this.ue&&(this.Fr(this.ue.x,this.ue.y,this.ue.width,1),this.ue={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype.ce=function(t,i,n){this.yt.save(),this.yt.fillStyle=this.jr.cursor.css,this.Dr(t,i,this.bi.options.cursorWidth),this.yt.restore()},i.prototype.fe=function(t,i,n){this.yt.save(),this.yt.fillStyle=this.jr.cursor.css,this.Nr(t,i,n.getWidth(),1),this.yt.fillStyle=this.jr.cursorAccent.css,this.Kr(n,t,i),this.yt.restore()},i.prototype.ae=function(t,i,n){this.yt.save(),this.yt.fillStyle=this.jr.cursor.css,this.Lr(t,i),this.yt.restore()},i.prototype.be=function(t,i,n){this.yt.save(),this.yt.strokeStyle=this.jr.cursor.css,this.Wr(t,i,n.getWidth(),1),this.yt.restore()},i}(s.BaseRenderLayer);i.CursorRenderLayer=o;var c=function(){function t(t,i){this.Ci=i,this.isCursorVisible=!0,t&&this.we()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this.me||this.ge)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.ge&&(window.clearInterval(this.ge),this.ge=void 0),this.me&&(window.clearTimeout(this.me),this.me=void 0),this.Ti&&(window.cancelAnimationFrame(this.Ti),this.Ti=void 0)},t.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this.pe=Date.now(),this.isCursorVisible=!0,this.Ti||(this.Ti=window.requestAnimationFrame((function(){t.Ci(),t.Ti=void 0}))))},t.prototype.we=function(t){var i=this;void 0===t&&(t=u),this.ge&&window.clearInterval(this.ge),this.me=window.setTimeout((function(){if(i.pe){var t=u-(Date.now()-i.pe);if(i.pe=void 0,t>0)return void i.we(t)}i.isCursorVisible=!1,i.Ti=window.requestAnimationFrame((function(){i.Ci(),i.Ti=void 0})),i.ge=window.setInterval((function(){if(i.pe){var t=u-(Date.now()-i.pe);return i.pe=void 0,void i.we(t)}i.isCursorVisible=!i.isCursorVisible,i.Ti=window.requestAnimationFrame((function(){i.Ci(),i.Ti=void 0}))}),u)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this.ge&&(window.clearInterval(this.ge),this.ge=void 0),this.me&&(window.clearTimeout(this.me),this.me=void 0),this.Ti&&(window.cancelAnimationFrame(this.Ti),this.Ti=void 0)},t.prototype.resume=function(){this.pause(),this.pe=void 0,this.we(),this.restartBlinkAnimation()},t}()},3700:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.GridCache=void 0;var n=function(){function t(){this.cache=[]}return t.prototype.resize=function(t,i){for(var n=0;n<t;n++){this.cache.length<=n&&this.cache.push([]);for(var r=this.cache[n].length;r<i;r++)this.cache[n].push(void 0);this.cache[n].length=i}this.cache.length=t},t.prototype.clear=function(){for(var t=0;t<this.cache.length;t++)for(var i=0;i<this.cache[t].length;i++)this.cache[t][i]=void 0},t}();i.GridCache=n},5098:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.LinkRenderLayer=void 0;var s=n(1546),h=n(8803),u=n(2040),o=function(t){function i(i,n,r,e,s,h,u,o){var c=t.call(this,i,"link",n,!0,r,e,u,o)||this;return s.onShowLinkUnderline((function(t){return c.Et(t)})),s.onHideLinkUnderline((function(t){return c.Ct(t)})),h.onShowLinkUnderline((function(t){return c.Et(t)})),h.onHideLinkUnderline((function(t){return c.Ct(t)})),c}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this.ue=void 0},i.prototype.reset=function(){this.Jt()},i.prototype.Jt=function(){if(this.ue){this.Fr(this.ue.x1,this.ue.y1,this.ue.cols-this.ue.x1,1);var t=this.ue.y2-this.ue.y1-1;t>0&&this.Fr(0,this.ue.y1+1,this.ue.cols,t),this.Fr(0,this.ue.y2,this.ue.x2,1),this.ue=void 0}},i.prototype.Et=function(t){if(t.fg===h.INVERTED_DEFAULT_COLOR?this.yt.fillStyle=this.jr.background.css:t.fg&&u.is256Color(t.fg)?this.yt.fillStyle=this.jr.ansi[t.fg].css:this.yt.fillStyle=this.jr.foreground.css,t.y1===t.y2)this.Lr(t.x1,t.y1,t.x2-t.x1);else{this.Lr(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this.Lr(0,i,t.cols);this.Lr(0,t.y2,t.x2)}this.ue=t},i.prototype.Ct=function(t){this.Jt()},i}(s.BaseRenderLayer);i.LinkRenderLayer=o},3525:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.Renderer=void 0;var u=n(9596),o=n(4149),c=n(2512),f=n(5098),a=n(5879),l=n(844),v=n(4725),d=n(2585),b=n(1420),w=n(8460),m=1,g=function(t){function i(i,n,r,e,s,h,l,v,d){var b=t.call(this)||this;b.jr=i,b.vi=n,b.qt=s,b.fn=h,b.bi=l,b.ye=m++,b.ee=new w.EventEmitter;var g=b.bi.options.allowTransparency;return b.Oe=new a.CharacterJoinerRegistry(b.qt),b.je=[new u.TextRenderLayer(b.vi,0,b.jr,b.Oe,g,b.ye,b.qt,l),new o.SelectionRenderLayer(b.vi,1,b.jr,b.ye,b.qt,l),new f.LinkRenderLayer(b.vi,2,b.jr,b.ye,r,e,b.qt,l),new c.CursorRenderLayer(b.vi,3,b.jr,b.ye,b.ee,b.qt,l,v,d)],b.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},b._e=window.devicePixelRatio,b.ke(),b.onOptionsChanged(),b}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this.ee.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){for(var i=0,n=this.je;i<n.length;i++)n[i].dispose();t.prototype.dispose.call(this),b.removeTerminalFromCache(this.ye)},i.prototype.onDevicePixelRatioChange=function(){this._e!==window.devicePixelRatio&&(this._e=window.devicePixelRatio,this.onResize(this.qt.cols,this.qt.rows))},i.prototype.setColors=function(t){this.jr=t;for(var i=0,n=this.je;i<n.length;i++){var r=n[i];r.setColors(this.jr),r.reset()}},i.prototype.onResize=function(t,i){this.ke();for(var n=0,r=this.je;n<r.length;n++)r[n].resize(this.dimensions);this.vi.style.width=this.dimensions.canvasWidth+"px",this.vi.style.height=this.dimensions.canvasHeight+"px"},i.prototype.onCharSizeChanged=function(){this.onResize(this.qt.cols,this.qt.rows)},i.prototype.onBlur=function(){this.Me((function(t){return t.onBlur()}))},i.prototype.onFocus=function(){this.Me((function(t){return t.onFocus()}))},i.prototype.onSelectionChanged=function(t,i,n){void 0===n&&(n=!1),this.Me((function(r){return r.onSelectionChanged(t,i,n)}))},i.prototype.onCursorMove=function(){this.Me((function(t){return t.onCursorMove()}))},i.prototype.onOptionsChanged=function(){this.Me((function(t){return t.onOptionsChanged()}))},i.prototype.clear=function(){this.Me((function(t){return t.reset()}))},i.prototype.Me=function(t){for(var i=0,n=this.je;i<n.length;i++)t(n[i])},i.prototype.renderRows=function(t,i){for(var n=0,r=this.je;n<r.length;n++)r[n].onGridChanged(t,i)},i.prototype.ke=function(){this.fn.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this.fn.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this.fn.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this.bi.options.lineHeight),this.dimensions.scaledCharTop=1===this.bi.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this.bi.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this.bi.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this.qt.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this.qt.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this.qt.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this.qt.cols)},i.prototype.registerCharacterJoiner=function(t){return this.Oe.registerCharacterJoiner(t)},i.prototype.deregisterCharacterJoiner=function(t){return this.Oe.deregisterCharacterJoiner(t)},s([h(4,d.IBufferService),h(5,v.ICharSizeService),h(6,d.IOptionsService),h(7,d.ICoreService),h(8,v.ICoreBrowserService)],i)}(l.Disposable);i.Renderer=g},1752:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.throwIfFalsy=void 0,i.throwIfFalsy=function(t){if(!t)throw new Error("value must not be falsy");return t}},4149:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.SelectionRenderLayer=void 0;var s=function(t){function i(i,n,r,e,s,h){var u=t.call(this,i,"selection",n,!0,r,e,s,h)||this;return u.qe(),u}return e(i,t),i.prototype.qe=function(){this.ue={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},i.prototype.resize=function(i){t.prototype.resize.call(this,i),this.qe()},i.prototype.reset=function(){this.ue.start&&this.ue.end&&(this.qe(),this.Ur())},i.prototype.onSelectionChanged=function(t,i,n){if(this.xe(t,i,n,this.qt.buffer.ydisp))if(this.Ur(),t&&i){var r=t[1]-this.qt.buffer.ydisp,e=i[1]-this.qt.buffer.ydisp,s=Math.max(r,0),h=Math.min(e,this.qt.rows-1);if(s>=this.qt.rows||h<0)this.ue.ydisp=this.qt.buffer.ydisp;else{if(this.yt.fillStyle=this.jr.selectionTransparent.css,n){var u=t[0],o=i[0]-u,c=h-s+1;this.Nr(u,s,o,c)}else{u=r===s?t[0]:0;var f=s===e?i[0]:this.qt.cols;this.Nr(u,s,f-u,1);var a=Math.max(h-s-1,0);if(this.Nr(0,s+1,this.qt.cols,a),s!==h){var l=e===h?i[0]:this.qt.cols;this.Nr(0,h,l,1)}}this.ue.start=[t[0],t[1]],this.ue.end=[i[0],i[1]],this.ue.columnSelectMode=n,this.ue.ydisp=this.qt.buffer.ydisp}}else this.qe()},i.prototype.xe=function(t,i,n,r){return!this.Ae(t,this.ue.start)||!this.Ae(i,this.ue.end)||n!==this.ue.columnSelectMode||r!==this.ue.ydisp},i.prototype.Ae=function(t,i){return!(!t||!i)&&t[0]===i[0]&&t[1]===i[1]},i}(n(1546).BaseRenderLayer);i.SelectionRenderLayer=s},9596:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.TextRenderLayer=void 0;var s=n(3700),h=n(1546),u=n(3734),o=n(643),c=n(5879),f=n(511),a=function(t){function i(i,n,r,e,h,u,o,c){var a=t.call(this,i,"text",n,h,r,u,o,c)||this;return a.Se=0,a.Re="",a.Ee={},a.te=new f.CellData,a.ue=new s.GridCache,a.Oe=e,a}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i);var n=this.Hr(!1,!1);this.Se===i.scaledCharWidth&&this.Re===n||(this.Se=i.scaledCharWidth,this.Re=n,this.Ee={}),this.ue.clear(),this.ue.resize(this.qt.cols,this.qt.rows)},i.prototype.reset=function(){this.ue.clear(),this.Ur()},i.prototype.Ce=function(t,i,n,r){for(var e=t;e<=i;e++)for(var s=e+this.qt.buffer.ydisp,h=this.qt.buffer.lines.get(s),u=n?n.getJoinedCharacters(s):[],f=0;f<this.qt.cols;f++){h.loadCell(f,this.te);var a=this.te,l=!1,v=f;if(0!==a.getWidth()){if(u.length>0&&f===u[0][0]){l=!0;var d=u.shift();a=new c.JoinedCellData(this.te,h.translateToString(!0,d[0],d[1]),d[1]-d[0]),v=d[1]-1}!l&&this.Te(a)&&v<h.length-1&&h.getCodePoint(v+1)===o.NULL_CELL_CODE&&(a.content&=-12582913,a.content|=2<<22),r(a,f,e),f=v}}},i.prototype.Ie=function(t,i){var n=this,r=this.yt,e=this.qt.cols,s=0,h=0,o=null;r.save(),this.Ce(t,i,null,(function(t,i,c){var f=null;t.isInverse()?f=t.isFgDefault()?n.jr.foreground.css:t.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":n.jr.ansi[t.getFgColor()].css:t.isBgRGB()?f="rgb("+u.AttributeData.toColorRGB(t.getBgColor()).join(",")+")":t.isBgPalette()&&(f=n.jr.ansi[t.getBgColor()].css),null===o&&(s=i,h=c),c!==h?(r.fillStyle=o||"",n.Nr(s,h,e-s,1),s=i,h=c):o!==f&&(r.fillStyle=o||"",n.Nr(s,h,i-s,1),s=i,h=c),o=f})),null!==o&&(r.fillStyle=o,this.Nr(s,h,e-s,1)),r.restore()},i.prototype.Ue=function(t,i){var n=this;this.Ce(t,i,this.Oe,(function(t,i,r){if(!t.isInvisible()&&(n.Gr(t,i,r),t.isUnderline())){if(n.yt.save(),t.isInverse())if(t.isBgDefault())n.yt.fillStyle=n.jr.background.css;else if(t.isBgRGB())n.yt.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var e=t.getBgColor();n.bi.options.drawBoldTextInBrightColors&&t.isBold()&&e<8&&(e+=8),n.yt.fillStyle=n.jr.ansi[e].css}else if(t.isFgDefault())n.yt.fillStyle=n.jr.foreground.css;else if(t.isFgRGB())n.yt.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var s=t.getFgColor();n.bi.options.drawBoldTextInBrightColors&&t.isBold()&&s<8&&(s+=8),n.yt.fillStyle=n.jr.ansi[s].css}n.Lr(i,r,t.getWidth()),n.yt.restore()}}))},i.prototype.onGridChanged=function(t,i){0!==this.ue.cache.length&&(this.Ir&&this.Ir.beginFrame(),this.Fr(0,t,this.qt.cols,i-t+1),this.Ie(t,i),this.Ue(t,i))},i.prototype.onOptionsChanged=function(){this.Pr(this.bi.options.allowTransparency)},i.prototype.Te=function(t){if(1!==t.getWidth())return!1;if(t.getCode()<256)return!1;var i=t.getChars();if(this.Ee.hasOwnProperty(i))return this.Ee[i];this.yt.save(),this.yt.font=this.Re;var n=Math.floor(this.yt.measureText(i).width)>this.Se;return this.yt.restore(),this.Ee[i]=n,n},i}(h.BaseRenderLayer);i.TextRenderLayer=a},9616:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.BaseCharAtlas=void 0;var n=function(){function t(){this.Be=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this.Be||(this.Pe(),this.Be=!0)},t.prototype.Pe=function(){},t.prototype.beginFrame=function(){},t}();i.BaseCharAtlas=n},1420:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.removeTerminalFromCache=i.acquireCharAtlas=void 0;var r=n(2040),e=n(1906),s=[];i.acquireCharAtlas=function(t,i,n,h,u){for(var o=r.generateConfig(h,u,t,n),c=0;c<s.length;c++){var f=(a=s[c]).ownedBy.indexOf(i);if(f>=0){if(r.configEquals(a.config,o))return a.atlas;1===a.ownedBy.length?(a.atlas.dispose(),s.splice(c,1)):a.ownedBy.splice(f,1);break}}for(c=0;c<s.length;c++){var a=s[c];if(r.configEquals(a.config,o))return a.ownedBy.push(i),a.atlas}var l={atlas:new e.DynamicCharAtlas(document,o),config:o,ownedBy:[i]};return s.push(l),l.atlas},i.removeTerminalFromCache=function(t){for(var i=0;i<s.length;i++){var n=s[i].ownedBy.indexOf(t);if(-1!==n){1===s[i].ownedBy.length?(s[i].atlas.dispose(),s.splice(i,1)):s[i].ownedBy.splice(n,1);break}}}},2040:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;var r=n(643);i.generateConfig=function(t,i,n,r){var e={foreground:r.foreground,background:r.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:r.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:t,scaledCharHeight:i,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,colors:e}},i.configEquals=function(t,i){for(var n=0;n<t.colors.ansi.length;n++)if(t.colors.ansi[n].rgba!==i.colors.ansi[n].rgba)return!1;return t.devicePixelRatio===i.devicePixelRatio&&t.fontFamily===i.fontFamily&&t.fontSize===i.fontSize&&t.fontWeight===i.fontWeight&&t.fontWeightBold===i.fontWeightBold&&t.allowTransparency===i.allowTransparency&&t.scaledCharWidth===i.scaledCharWidth&&t.scaledCharHeight===i.scaledCharHeight&&t.colors.foreground===i.colors.foreground&&t.colors.background===i.colors.background},i.is256Color=function(t){return t<r.DEFAULT_COLOR}},8803:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.CHAR_ATLAS_CELL_SPACING=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0,i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.CHAR_ATLAS_CELL_SPACING=1},1906:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.NoneCharAtlas=i.DynamicCharAtlas=i.getGlyphCacheKey=void 0;var s=n(8803),h=n(9616),u=n(5680),o=n(7001),c=n(6114),f=n(1752),a=n(4774),l={css:"rgba(0, 0, 0, 0)",rgba:0};function v(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}i.getGlyphCacheKey=v;var d=function(t){function i(i,n){var r=t.call(this)||this;r.Ne=n,r.Le=0,r.De=[],r.We=null,r.Fe=null,r.Ke=i.createElement("canvas"),r.Ke.width=1024,r.Ke.height=1024,r.He=f.throwIfFalsy(r.Ke.getContext("2d",{alpha:!0}));var e=i.createElement("canvas");e.width=r.Ne.scaledCharWidth,e.height=r.Ne.scaledCharHeight,r.ze=f.throwIfFalsy(e.getContext("2d",{alpha:r.Ne.allowTransparency})),r.Qr=Math.floor(1024/r.Ne.scaledCharWidth),r.Ge=Math.floor(1024/r.Ne.scaledCharHeight);var s=r.Qr*r.Ge;return r.$e=new o.LRUMap(s),r.$e.prealloc(s),r}return e(i,t),i.prototype.dispose=function(){null!==this.We&&(window.clearTimeout(this.We),this.We=null)},i.prototype.beginFrame=function(){this.Le=0},i.prototype.draw=function(t,i,n,r){if(32===i.code)return!0;if(!this.Ye(i))return!1;var e=v(i),s=this.$e.get(e);if(null!=s)return this.Je(t,s,n,r),!0;if(this.Le<100){var h;h=this.$e.size<this.$e.capacity?this.$e.size:this.$e.peek().index;var u=this.Ve(i,h);return this.$e.set(e,u),this.Je(t,u,n,r),!0}return!1},i.prototype.Ye=function(t){return t.code<256},i.prototype.Qe=function(t){return t%this.Qr*this.Ne.scaledCharWidth},i.prototype.Xe=function(t){return Math.floor(t/this.Qr)*this.Ne.scaledCharHeight},i.prototype.Je=function(t,i,n,r){if(!i.isEmpty){var e=this.Qe(i.index),s=this.Xe(i.index);t.drawImage(i.inBitmap?this.Fe:this.Ke,e,s,this.Ne.scaledCharWidth,this.Ne.scaledCharHeight,n,r,this.Ne.scaledCharWidth,this.Ne.scaledCharHeight)}},i.prototype.Ze=function(t){return t<this.Ne.colors.ansi.length?this.Ne.colors.ansi[t]:u.DEFAULT_ANSI_COLORS[t]},i.prototype.ts=function(t){return this.Ne.allowTransparency?l:t.bg===s.INVERTED_DEFAULT_COLOR?this.Ne.colors.foreground:t.bg<256?this.Ze(t.bg):this.Ne.colors.background},i.prototype.ns=function(t){return t.fg===s.INVERTED_DEFAULT_COLOR?a.color.opaque(this.Ne.colors.background):t.fg<256?this.Ze(t.fg):this.Ne.colors.foreground},i.prototype.Ve=function(t,i){this.Le++,this.ze.save();var n=this.ts(t);this.ze.globalCompositeOperation="copy",this.ze.fillStyle=n.css,this.ze.fillRect(0,0,this.Ne.scaledCharWidth,this.Ne.scaledCharHeight),this.ze.globalCompositeOperation="source-over";var r=t.bold?this.Ne.fontWeightBold:this.Ne.fontWeight,e=t.italic?"italic":"";this.ze.font=e+" "+r+" "+this.Ne.fontSize*this.Ne.devicePixelRatio+"px "+this.Ne.fontFamily,this.ze.textBaseline="middle",this.ze.fillStyle=this.ns(t).css,t.dim&&(this.ze.globalAlpha=s.DIM_OPACITY),this.ze.fillText(t.chars,0,this.Ne.scaledCharHeight/2),this.ze.restore();var h=this.ze.getImageData(0,0,this.Ne.scaledCharWidth,this.Ne.scaledCharHeight),u=!1;this.Ne.allowTransparency||(u=function(t,i){for(var n=!0,r=i.rgba>>>24,e=i.rgba>>>16&255,s=i.rgba>>>8&255,h=0;h<t.data.length;h+=4)t.data[h]===r&&t.data[h+1]===e&&t.data[h+2]===s?t.data[h+3]=0:n=!1;return n}(h,n));var o=this.Qe(i),c=this.Xe(i);this.He.putImageData(h,o,c);var f={index:i,isEmpty:u,inBitmap:!1};return this.rs(f),f},i.prototype.rs=function(t){var i=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this.De.push(t),null===this.We&&(this.We=window.setTimeout((function(){return i.es()}),100)))},i.prototype.es=function(){var t=this,i=this.De;this.De=[],window.createImageBitmap(this.Ke).then((function(n){t.Fe=n;for(var r=0;r<i.length;r++)i[r].inBitmap=!0})),this.We=null},i}(h.BaseCharAtlas);i.DynamicCharAtlas=d;var b=function(t){function i(i,n){return t.call(this)||this}return e(i,t),i.prototype.draw=function(t,i,n,r){return!1},i}(h.BaseCharAtlas);i.NoneCharAtlas=b},7001:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.LRUMap=void 0;var n=function(){function t(t){this.capacity=t,this.ss={},this.hs=null,this.us=null,this.os=[],this.size=0}return t.prototype.cs=function(t){var i=t.prev,n=t.next;t===this.hs&&(this.hs=n),t===this.us&&(this.us=i),null!==i&&(i.next=n),null!==n&&(n.prev=i)},t.prototype.fs=function(t){var i=this.us;null!==i&&(i.next=t),t.prev=i,t.next=null,this.us=t,null===this.hs&&(this.hs=t)},t.prototype.prealloc=function(t){for(var i=this.os,n=0;n<t;n++)i.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(t){var i=this.ss[t];return void 0!==i?(this.cs(i),this.fs(i),i.value):null},t.prototype.peekValue=function(t){var i=this.ss[t];return void 0!==i?i.value:null},t.prototype.peek=function(){var t=this.hs;return null===t?null:t.value},t.prototype.set=function(t,i){var n=this.ss[t];if(void 0!==n)n=this.ss[t],this.cs(n),n.value=i;else if(this.size>=this.capacity)n=this.hs,this.cs(n),delete this.ss[n.key],n.key=t,n.value=i,this.ss[t]=n;else{var r=this.os;r.length>0?((n=r.pop()).key=t,n.value=i):n={prev:null,next:null,key:t,value:i},this.ss[t]=n,this.size++}this.fs(n)},t}();i.LRUMap=n},1296:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.DomRenderer=void 0;var u=n(3787),o=n(8803),c=n(844),f=n(4725),a=n(2585),l=n(8460),v=n(4774),d=n(9631),b="xterm-dom-renderer-owner-",w="xterm-fg-",m="xterm-bg-",g="xterm-focus",p=1,y=function(t){function i(i,n,r,e,s,h,o,c,f){var a=t.call(this)||this;return a.jr=i,a.Ut=n,a.vi=r,a.xn=e,a.ls=s,a.vs=h,a.fn=o,a.bi=c,a.qt=f,a.ds=p++,a.V=[],a.J=document.createElement("div"),a.J.classList.add("xterm-rows"),a.J.style.lineHeight="normal",a.J.setAttribute("aria-hidden","true"),a.bs(a.qt.cols,a.qt.rows),a.ws=document.createElement("div"),a.ws.classList.add("xterm-selection"),a.ws.setAttribute("aria-hidden","true"),a.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},a.ke(),a.gs(),a.ps=new u.DomRendererRowFactory(document,a.bi,a.jr),a.Ut.classList.add(b+a.ds),a.vi.appendChild(a.J),a.vi.appendChild(a.ws),a.ls.onShowLinkUnderline((function(t){return a.ys(t)})),a.ls.onHideLinkUnderline((function(t){return a.Os(t)})),a.vs.onShowLinkUnderline((function(t){return a.ys(t)})),a.vs.onHideLinkUnderline((function(t){return a.Os(t)})),a}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return(new l.EventEmitter).event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.Ut.classList.remove(b+this.ds),d.removeElementFromParent(this.J,this.ws,this.js,this._s),t.prototype.dispose.call(this)},i.prototype.ke=function(){this.dimensions.scaledCharWidth=this.fn.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this.fn.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this.bi.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this.bi.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this.qt.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this.qt.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this.qt.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this.qt.rows;for(var t=0,i=this.V;t<i.length;t++){var n=i[t];n.style.width=this.dimensions.canvasWidth+"px",n.style.height=this.dimensions.actualCellHeight+"px",n.style.lineHeight=this.dimensions.actualCellHeight+"px",n.style.overflow="hidden"}this._s||(this._s=document.createElement("style"),this.vi.appendChild(this._s));var r=this.ks+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._s.textContent=r,this.ws.style.height=this.xn.style.height,this.vi.style.width=this.dimensions.canvasWidth+"px",this.vi.style.height=this.dimensions.canvasHeight+"px"},i.prototype.setColors=function(t){this.jr=t,this.gs()},i.prototype.gs=function(){var t=this;this.js||(this.js=document.createElement("style"),this.vi.appendChild(this.js));var i=this.ks+" .xterm-rows { color: "+this.jr.foreground.css+"; font-family: "+this.bi.options.fontFamily+"; font-size: "+this.bi.options.fontSize+"px;}";i+=this.ks+" span:not(."+u.BOLD_CLASS+") { font-weight: "+this.bi.options.fontWeight+";}"+this.ks+" span."+u.BOLD_CLASS+" { font-weight: "+this.bi.options.fontWeightBold+";}"+this.ks+" span."+u.ITALIC_CLASS+" { font-style: italic;}",i+="@keyframes blink_box_shadow_"+this.ds+" { 50% {  box-shadow: none; }}",i+="@keyframes blink_block_"+this.ds+" { 0% {  background-color: "+this.jr.cursor.css+";  color: "+this.jr.cursorAccent.css+"; } 50% {  background-color: "+this.jr.cursorAccent.css+";  color: "+this.jr.cursor.css+"; }}",i+=this.ks+" .xterm-rows:not(.xterm-focus) ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this.jr.cursor.css+"; outline-offset: -1px;}"+this.ks+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_BLINK_CLASS+":not(."+u.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this.ds+" 1s step-end infinite;}"+this.ks+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_BLINK_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this.ds+" 1s step-end infinite;}"+this.ks+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this.jr.cursor.css+"; color: "+this.jr.cursorAccent.css+";}"+this.ks+" .xterm-rows ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this.bi.options.cursorWidth+"px 0 0 "+this.jr.cursor.css+" inset;}"+this.ks+" .xterm-rows ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this.jr.cursor.css+" inset;}",i+=this.ks+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this.ks+" .xterm-selection div { position: absolute; background-color: "+this.jr.selectionTransparent.css+";}",this.jr.ansi.forEach((function(n,r){i+=t.ks+" ."+w+r+" { color: "+n.css+"; }"+t.ks+" ."+m+r+" { background-color: "+n.css+"; }"})),i+=this.ks+" ."+w+o.INVERTED_DEFAULT_COLOR+" { color: "+v.color.opaque(this.jr.background).css+"; }"+this.ks+" ."+m+o.INVERTED_DEFAULT_COLOR+" { background-color: "+this.jr.foreground.css+"; }",this.js.textContent=i},i.prototype.onDevicePixelRatioChange=function(){this.ke()},i.prototype.bs=function(t,i){for(var n=this.V.length;n<=i;n++){var r=document.createElement("div");this.J.appendChild(r),this.V.push(r)}for(;this.V.length>i;)this.J.removeChild(this.V.pop())},i.prototype.onResize=function(t,i){this.bs(t,i),this.ke()},i.prototype.onCharSizeChanged=function(){this.ke()},i.prototype.onBlur=function(){this.J.classList.remove(g)},i.prototype.onFocus=function(){this.J.classList.add(g)},i.prototype.onSelectionChanged=function(t,i,n){for(;this.ws.children.length;)this.ws.removeChild(this.ws.children[0]);if(t&&i){var r=t[1]-this.qt.buffer.ydisp,e=i[1]-this.qt.buffer.ydisp,s=Math.max(r,0),h=Math.min(e,this.qt.rows-1);if(!(s>=this.qt.rows||h<0)){var u=document.createDocumentFragment();if(n)u.appendChild(this.Ms(s,t[0],i[0],h-s+1));else{var o=r===s?t[0]:0,c=s===e?i[0]:this.qt.cols;u.appendChild(this.Ms(s,o,c));var f=h-s-1;if(u.appendChild(this.Ms(s+1,0,this.qt.cols,f)),s!==h){var a=e===h?i[0]:this.qt.cols;u.appendChild(this.Ms(h,0,a))}}this.ws.appendChild(u)}}},i.prototype.Ms=function(t,i,n,r){void 0===r&&(r=1);var e=document.createElement("div");return e.style.height=r*this.dimensions.actualCellHeight+"px",e.style.top=t*this.dimensions.actualCellHeight+"px",e.style.left=i*this.dimensions.actualCellWidth+"px",e.style.width=this.dimensions.actualCellWidth*(n-i)+"px",e},i.prototype.onCursorMove=function(){},i.prototype.onOptionsChanged=function(){this.ke(),this.gs()},i.prototype.clear=function(){for(var t=0,i=this.V;t<i.length;t++)i[t].innerText=""},i.prototype.renderRows=function(t,i){for(var n=this.qt.buffer.ybase+this.qt.buffer.y,r=Math.min(this.qt.buffer.x,this.qt.cols-1),e=this.bi.options.cursorBlink,s=t;s<=i;s++){var h=this.V[s];h.innerText="";var u=s+this.qt.buffer.ydisp,o=this.qt.buffer.lines.get(u),c=this.bi.options.cursorStyle;h.appendChild(this.ps.createRow(o,u===n,c,r,e,this.dimensions.actualCellWidth,this.qt.cols))}},Object.defineProperty(i.prototype,"ks",{get:function(){return"."+b+this.ds},enumerable:!1,configurable:!0}),i.prototype.registerCharacterJoiner=function(t){return-1},i.prototype.deregisterCharacterJoiner=function(t){return!1},i.prototype.ys=function(t){this.qs(t.x1,t.x2,t.y1,t.y2,t.cols,!0)},i.prototype.Os=function(t){this.qs(t.x1,t.x2,t.y1,t.y2,t.cols,!1)},i.prototype.qs=function(t,i,n,r,e,s){for(;t!==i||n!==r;){var h=this.V[n];if(!h)return;var u=h.children[t];u&&(u.style.textDecoration=s?"underline":"none"),++t>=e&&(t=0,n++)}},s([h(6,f.ICharSizeService),h(7,a.IOptionsService),h(8,a.IBufferService)],i)}(c.Disposable);i.DomRenderer=y},3787:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;var r=n(8803),e=n(643),s=n(511),h=n(4774);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var u=function(){function t(t,i,n){this.qn=t,this.bi=i,this.jr=n,this.te=new s.CellData}return t.prototype.setColors=function(t){this.jr=t},t.prototype.createRow=function(t,n,s,u,c,f,a){for(var l=this.qn.createDocumentFragment(),v=0,d=Math.min(t.length,a)-1;d>=0;d--)if(t.loadCell(d,this.te).getCode()!==e.NULL_CELL_CODE||n&&d===u){v=d+1;break}for(d=0;d<v;d++){t.loadCell(d,this.te);var b=this.te.getWidth();if(0!==b){var w=this.qn.createElement("span");if(b>1&&(w.style.width=f*b+"px"),n&&d===u)switch(w.classList.add(i.CURSOR_CLASS),c&&w.classList.add(i.CURSOR_BLINK_CLASS),s){case"bar":w.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":w.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:w.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}this.te.isBold()&&w.classList.add(i.BOLD_CLASS),this.te.isItalic()&&w.classList.add(i.ITALIC_CLASS),this.te.isDim()&&w.classList.add(i.DIM_CLASS),this.te.isUnderline()&&w.classList.add(i.UNDERLINE_CLASS),this.te.isInvisible()?w.textContent=e.WHITESPACE_CELL_CHAR:w.textContent=this.te.getChars()||e.WHITESPACE_CELL_CHAR;var m=this.te.getFgColor(),g=this.te.getFgColorMode(),p=this.te.getBgColor(),y=this.te.getBgColorMode(),O=!!this.te.isInverse();if(O){var j=m;m=p,p=j;var _=g;g=y,y=_}switch(g){case 16777216:case 33554432:this.te.isBold()&&m<8&&this.bi.options.drawBoldTextInBrightColors&&(m+=8),this.xs(w,this.jr.background,this.jr.ansi[m])||w.classList.add("xterm-fg-"+m);break;case 50331648:var k=h.rgba.toColor(m>>16&255,m>>8&255,255&m);this.xs(w,this.jr.background,k)||this.As(w,"color:#"+o(m.toString(16),"0",6));break;case 0:default:this.xs(w,this.jr.background,this.jr.foreground)||O&&w.classList.add("xterm-fg-"+r.INVERTED_DEFAULT_COLOR)}switch(y){case 16777216:case 33554432:w.classList.add("xterm-bg-"+p);break;case 50331648:this.As(w,"background-color:#"+o(p.toString(16),"0",6));break;case 0:default:O&&w.classList.add("xterm-bg-"+r.INVERTED_DEFAULT_COLOR)}l.appendChild(w)}}return l},t.prototype.xs=function(t,i,n){if(1===this.bi.options.minimumContrastRatio)return!1;var r=this.jr.contrastCache.getColor(this.te.bg,this.te.fg);return void 0===r&&(r=h.color.ensureContrastRatio(i,n,this.bi.options.minimumContrastRatio),this.jr.contrastCache.setColor(this.te.bg,this.te.fg,null!=r?r:null)),!!r&&(this.As(t,"color:"+r.css),!0)},t.prototype.As=function(t,i){t.setAttribute("style",""+(t.getAttribute("style")||"")+i+";")},t}();function o(t,i,n){for(;t.length<n;)t=i+t;return t}i.DomRendererRowFactory=u},456:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.SelectionModel=void 0;var n=function(){function t(t){this.qt=t,this.isSelectAllActive=!1,this.selectionStartLength=0}return t.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this.qt.cols,this.qt.buffer.ybase+this.qt.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var t=this.selectionStart[0]+this.selectionStartLength;return t>this.qt.cols?[t%this.qt.cols,this.selectionStart[1]+Math.floor(t/this.qt.cols)]:[t,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var t=this.selectionStart,i=this.selectionEnd;return!(!t||!i)&&(t[1]>i[1]||t[1]===i[1]&&t[0]>i[0])},t.prototype.onTrim=function(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},t}();i.SelectionModel=n},428:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.CharSizeService=void 0;var s=n(2585),h=n(8460),u=function(){function t(t,i,n){this.bi=n,this.width=0,this.height=0,this.Ss=new h.EventEmitter,this.Rs=new o(t,i,this.bi)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this.Ss.event},enumerable:!1,configurable:!0}),t.prototype.measure=function(){var t=this.Rs.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this.Ss.fire())},r([e(2,s.IOptionsService)],t)}();i.CharSizeService=u;var o=function(){function t(t,i,n){this.qn=t,this.Es=i,this.bi=n,this.Cs={width:0,height:0},this.Ts=this.qn.createElement("span"),this.Ts.classList.add("xterm-char-measure-element"),this.Ts.textContent="W",this.Ts.setAttribute("aria-hidden","true"),this.Es.appendChild(this.Ts)}return t.prototype.measure=function(){this.Ts.style.fontFamily=this.bi.options.fontFamily,this.Ts.style.fontSize=this.bi.options.fontSize+"px";var t=this.Ts.getBoundingClientRect();return 0!==t.width&&0!==t.height&&(this.Cs.width=t.width,this.Cs.height=Math.ceil(t.height)),this.Cs},t}()},5114:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.CoreBrowserService=void 0;var n=function(){function t(t){this.Zn=t}return Object.defineProperty(t.prototype,"isFocused",{get:function(){return(this.Zn.getRootNode?this.Zn.getRootNode():document).activeElement===this.Zn&&document.hasFocus()},enumerable:!1,configurable:!0}),t}();i.CoreBrowserService=n},8934:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.MouseService=void 0;var s=n(4725),h=n(9806),u=function(){function t(t,i){this.D=t,this.fn=i}return t.prototype.getCoords=function(t,i,n,r,e){return h.getCoords(t,i,n,r,this.fn.hasValidSize,this.D.dimensions.actualCellWidth,this.D.dimensions.actualCellHeight,e)},t.prototype.getRawByteCoords=function(t,i,n,r){var e=this.getCoords(t,i,n,r);return h.getRawByteCoords(e)},r([e(0,s.IRenderService),e(1,s.ICharSizeService)],t)}();i.MouseService=u},3230:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.RenderService=void 0;var u=n(6193),o=n(8460),c=n(844),f=n(5596),a=n(3656),l=n(2585),v=n(4725),d=function(t){function i(i,n,r,e,s,h){var c=t.call(this)||this;if(c.Is=i,c.Ii=n,c.fn=s,c.Us=!1,c.Bs=!1,c.Ps=!0,c.Ns=!1,c.Ls=0,c.Ds=0,c.Ws={start:void 0,end:void 0,columnSelectMode:!1},c.Fs=new o.EventEmitter,c.zi=new o.EventEmitter,c.Ks=new o.EventEmitter,c.register({dispose:function(){return c.Is.dispose()}}),c.Hs=new u.RenderDebouncer((function(t,i){return c.st(t,i)})),c.register(c.Hs),c.vt=new f.ScreenDprMonitor,c.vt.setListener((function(){return c.onDevicePixelRatioChange()})),c.register(c.vt),c.register(h.onResize((function(t){return c.zs()}))),c.register(e.onOptionChange((function(){return c.Is.onOptionsChanged()}))),c.register(c.fn.onCharSizeChange((function(){return c.onCharSizeChanged()}))),c.Is.onRequestRedraw((function(t){return c.refreshRows(t.start,t.end,!0)})),c.register(a.addDisposableDomListener(window,"resize",(function(){return c.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var l=new IntersectionObserver((function(t){return c.Gs(t[t.length-1])}),{threshold:0});l.observe(r),c.register({dispose:function(){return l.disconnect()}})}return c}return e(i,t),Object.defineProperty(i.prototype,"onDimensionsChange",{get:function(){return this.Fs.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRenderedBufferChange",{get:function(){return this.zi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRefreshRequest",{get:function(){return this.Ks.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this.Is.dimensions},enumerable:!1,configurable:!0}),i.prototype.Gs=function(t){this.Us=void 0===t.isIntersecting?0===t.intersectionRatio:!t.isIntersecting,this.Us||this.fn.hasValidSize||this.fn.measure(),!this.Us&&this.Bs&&(this.refreshRows(0,this.Ii-1),this.Bs=!1)},i.prototype.refreshRows=function(t,i,n){void 0===n&&(n=!1),this.Us?this.Bs=!0:(n||(this.Ps=!1),this.Hs.refresh(t,i,this.Ii))},i.prototype.st=function(t,i){this.Is.renderRows(t,i),this.Ns&&(this.Is.onSelectionChanged(this.Ws.start,this.Ws.end,this.Ws.columnSelectMode),this.Ns=!1),this.Ps||this.zi.fire({start:t,end:i}),this.Ps=!0},i.prototype.resize=function(t,i){this.Ii=i,this.$s()},i.prototype.changeOptions=function(){this.Is.onOptionsChanged(),this.refreshRows(0,this.Ii-1),this.$s()},i.prototype.$s=function(){this.Is.dimensions.canvasWidth===this.Ls&&this.Is.dimensions.canvasHeight===this.Ds||this.Fs.fire(this.Is.dimensions)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.setRenderer=function(t){var i=this;this.Is.dispose(),this.Is=t,this.Is.onRequestRedraw((function(t){return i.refreshRows(t.start,t.end,!0)})),this.Ns=!0,this.zs()},i.prototype.zs=function(){this.Us?this.Bs=!0:this.refreshRows(0,this.Ii-1)},i.prototype.setColors=function(t){this.Is.setColors(t),this.zs()},i.prototype.onDevicePixelRatioChange=function(){this.Is.onDevicePixelRatioChange(),this.refreshRows(0,this.Ii-1)},i.prototype.onResize=function(t,i){this.Is.onResize(t,i),this.zs()},i.prototype.onCharSizeChanged=function(){this.Is.onCharSizeChanged()},i.prototype.onBlur=function(){this.Is.onBlur()},i.prototype.onFocus=function(){this.Is.onFocus()},i.prototype.onSelectionChanged=function(t,i,n){this.Ws.start=t,this.Ws.end=i,this.Ws.columnSelectMode=n,this.Is.onSelectionChanged(t,i,n)},i.prototype.onCursorMove=function(){this.Is.onCursorMove()},i.prototype.clear=function(){this.Is.clear()},i.prototype.registerCharacterJoiner=function(t){return this.Is.registerCharacterJoiner(t)},i.prototype.deregisterCharacterJoiner=function(t){return this.Is.deregisterCharacterJoiner(t)},s([h(3,l.IOptionsService),h(4,v.ICharSizeService),h(5,l.IBufferService)],i)}(c.Disposable);i.RenderService=d},9312:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.SelectionService=void 0;var u=n(6114),o=n(456),c=n(511),f=n(8460),a=n(4725),l=n(2585),v=n(9806),d=n(9504),b=n(844),w=String.fromCharCode(160),m=new RegExp(w,"g"),g=function(t){function i(i,n,r,e,s,h,u){var a=t.call(this)||this;return a.Ut=i,a.vi=n,a.qt=r,a.bn=e,a.Yt=s,a.bi=h,a.D=u,a.Ys=0,a.Js=!0,a.te=new c.CellData,a.Vs=0,a.Qs=!1,a.Xs=void 0,a.Zs=void 0,a.th=a.register(new f.EventEmitter),a.ih=a.register(new f.EventEmitter),a.Gi=a.register(new f.EventEmitter),a.nh=a.register(new f.EventEmitter),a.Oi=function(t){return a.Vt(t)},a.rh=function(t){return a.eh(t)},a.bn.onUserInput((function(){a.hasSelection&&a.clearSelection()})),a.sh=a.qt.buffer.lines.onTrim((function(t){return a.hh(t)})),a.register(a.qt.buffers.onBufferActivate((function(t){return a.uh(t)}))),a.enable(),a.oh=new o.SelectionModel(a.qt),a.fh=0,a}return e(i,t),Object.defineProperty(i.prototype,"onLinuxMouseSelection",{get:function(){return this.th.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this.ih.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this.Gi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestScrollLines",{get:function(){return this.nh.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.ah()},i.prototype.reset=function(){this.clearSelection()},i.prototype.disable=function(){this.clearSelection(),this.Js=!1},i.prototype.enable=function(){this.Js=!0},Object.defineProperty(i.prototype,"selectionStart",{get:function(){return this.oh.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionEnd",{get:function(){return this.oh.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasSelection",{get:function(){var t=this.oh.finalSelectionStart,i=this.oh.finalSelectionEnd;return!(!t||!i||t[0]===i[0]&&t[1]===i[1])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionText",{get:function(){var t=this.oh.finalSelectionStart,i=this.oh.finalSelectionEnd;if(!t||!i)return"";var n=this.qt.buffer,r=[];if(3===this.fh){if(t[0]===i[0])return"";for(var e=t[1];e<=i[1];e++){var s=n.translateBufferLineToString(e,!0,t[0],i[0]);r.push(s)}}else{var h=t[1]===i[1]?i[0]:void 0;for(r.push(n.translateBufferLineToString(t[1],!0,t[0],h)),e=t[1]+1;e<=i[1]-1;e++){var o=n.lines.get(e);s=n.translateBufferLineToString(e,!0),o&&o.isWrapped?r[r.length-1]+=s:r.push(s)}t[1]!==i[1]&&(o=n.lines.get(i[1]),s=n.translateBufferLineToString(i[1],!0,0,i[0]),o&&o.isWrapped?r[r.length-1]+=s:r.push(s))}return r.map((function(t){return t.replace(m," ")})).join(u.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),i.prototype.clearSelection=function(){this.oh.clearSelection(),this.ah(),this.refresh(),this.Gi.fire()},i.prototype.refresh=function(t){var i=this;this.$n||(this.$n=window.requestAnimationFrame((function(){return i.Jn()}))),u.isLinux&&t&&this.selectionText.length&&this.th.fire(this.selectionText)},i.prototype.Jn=function(){this.$n=void 0,this.ih.fire({start:this.oh.finalSelectionStart,end:this.oh.finalSelectionEnd,columnSelectMode:3===this.fh})},i.prototype.lh=function(t){var i=this.dh(t),n=this.oh.finalSelectionStart,r=this.oh.finalSelectionEnd;return!!(n&&r&&i)&&this.bh(i,n,r)},i.prototype.bh=function(t,i,n){return t[1]>i[1]&&t[1]<n[1]||i[1]===n[1]&&t[1]===i[1]&&t[0]>=i[0]&&t[0]<n[0]||i[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||i[1]<n[1]&&t[1]===i[1]&&t[0]>=i[0]},i.prototype.wh=function(t){var i=this.dh(t);i&&(this.mh(i,!1),this.oh.selectionEnd=void 0,this.refresh(!0))},i.prototype.selectAll=function(){this.oh.isSelectAllActive=!0,this.refresh(),this.Gi.fire()},i.prototype.selectLines=function(t,i){this.oh.clearSelection(),t=Math.max(t,0),i=Math.min(i,this.qt.buffer.lines.length-1),this.oh.selectionStart=[0,t],this.oh.selectionEnd=[this.qt.cols,i],this.refresh(),this.Gi.fire()},i.prototype.hh=function(t){this.oh.onTrim(t)&&this.refresh()},i.prototype.dh=function(t){var i=this.Yt.getCoords(t,this.vi,this.qt.cols,this.qt.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this.qt.buffer.ydisp,i},i.prototype.gh=function(t){var i=v.getCoordsRelativeToElement(t,this.vi)[1],n=this.D.dimensions.canvasHeight;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-50),50),(i/=50)/Math.abs(i)+Math.round(14*i))},i.prototype.shouldForceSelection=function(t){return u.isMac?t.altKey&&this.bi.options.macOptionClickForcesSelection:t.shiftKey},i.prototype.onMouseDown=function(t){if(this.Vs=t.timeStamp,(2!==t.button||!this.hasSelection)&&0===t.button){if(!this.Js){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this.Ys=0,this.Js&&t.shiftKey?this.ph(t):1===t.detail?this.yh(t):2===t.detail?this.Oh(t):3===t.detail&&this.jh(t),this._h(),this.refresh(!0)}},i.prototype._h=function(){var t=this;this.vi.ownerDocument&&(this.vi.ownerDocument.addEventListener("mousemove",this.Oi),this.vi.ownerDocument.addEventListener("mouseup",this.rh)),this.kh=window.setInterval((function(){return t.Mh()}),50)},i.prototype.ah=function(){this.vi.ownerDocument&&(this.vi.ownerDocument.removeEventListener("mousemove",this.Oi),this.vi.ownerDocument.removeEventListener("mouseup",this.rh)),clearInterval(this.kh),this.kh=void 0},i.prototype.ph=function(t){this.oh.selectionStart&&(this.oh.selectionEnd=this.dh(t))},i.prototype.yh=function(t){if(this.oh.selectionStartLength=0,this.oh.isSelectAllActive=!1,this.fh=this.shouldColumnSelect(t)?3:0,this.oh.selectionStart=this.dh(t),this.oh.selectionStart){this.oh.selectionEnd=void 0;var i=this.qt.buffer.lines.get(this.oh.selectionStart[1]);i&&i.length!==this.oh.selectionStart[0]&&0===i.hasWidth(this.oh.selectionStart[0])&&this.oh.selectionStart[0]++}},i.prototype.Oh=function(t){var i=this.dh(t);i&&(this.fh=1,this.mh(i,!0))},i.prototype.jh=function(t){var i=this.dh(t);i&&(this.fh=2,this.qh(i[1]))},i.prototype.shouldColumnSelect=function(t){return t.altKey&&!(u.isMac&&this.bi.options.macOptionClickForcesSelection)},i.prototype.Vt=function(t){if(t.stopImmediatePropagation(),this.oh.selectionStart){var i=this.oh.selectionEnd?[this.oh.selectionEnd[0],this.oh.selectionEnd[1]]:null;if(this.oh.selectionEnd=this.dh(t),this.oh.selectionEnd){2===this.fh?this.oh.selectionEnd[1]<this.oh.selectionStart[1]?this.oh.selectionEnd[0]=0:this.oh.selectionEnd[0]=this.qt.cols:1===this.fh&&this.xh(this.oh.selectionEnd),this.Ys=this.gh(t),3!==this.fh&&(this.Ys>0?this.oh.selectionEnd[0]=this.qt.cols:this.Ys<0&&(this.oh.selectionEnd[0]=0));var n=this.qt.buffer;if(this.oh.selectionEnd[1]<n.lines.length){var r=n.lines.get(this.oh.selectionEnd[1]);r&&0===r.hasWidth(this.oh.selectionEnd[0])&&this.oh.selectionEnd[0]++}i&&i[0]===this.oh.selectionEnd[0]&&i[1]===this.oh.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},i.prototype.Mh=function(){if(this.oh.selectionEnd&&this.oh.selectionStart&&this.Ys){this.nh.fire({amount:this.Ys,suppressScrollEvent:!1});var t=this.qt.buffer;this.Ys>0?(3!==this.fh&&(this.oh.selectionEnd[0]=this.qt.cols),this.oh.selectionEnd[1]=Math.min(t.ydisp+this.qt.rows,t.lines.length-1)):(3!==this.fh&&(this.oh.selectionEnd[0]=0),this.oh.selectionEnd[1]=t.ydisp),this.refresh()}},i.prototype.eh=function(t){var i=t.timeStamp-this.Vs;if(this.ah(),this.selectionText.length<=1&&i<500&&t.altKey&&this.bi.getOption("altClickMovesCursor")){if(this.qt.buffer.ybase===this.qt.buffer.ydisp){var n=this.Yt.getCoords(t,this.Ut,this.qt.cols,this.qt.rows,!1);if(n&&void 0!==n[0]&&void 0!==n[1]){var r=d.moveToCellSequence(n[0]-1,n[1]-1,this.qt,this.bn.decPrivateModes.applicationCursorKeys);this.bn.triggerDataEvent(r,!0)}}}else this.Ah()},i.prototype.Ah=function(){var t=this.oh.finalSelectionStart,i=this.oh.finalSelectionEnd,n=!(!t||!i||t[0]===i[0]&&t[1]===i[1]);n?t&&i&&(this.Xs&&this.Zs&&t[0]===this.Xs[0]&&t[1]===this.Xs[1]&&i[0]===this.Zs[0]&&i[1]===this.Zs[1]||this.Sh(t,i,n)):this.Qs&&this.Sh(t,i,n)},i.prototype.Sh=function(t,i,n){this.Xs=t,this.Zs=i,this.Qs=n,this.Gi.fire()},i.prototype.uh=function(t){var i=this;this.clearSelection(),this.sh.dispose(),this.sh=t.activeBuffer.lines.onTrim((function(t){return i.hh(t)}))},i.prototype.Rh=function(t,i){for(var n=i[0],r=0;i[0]>=r;r++){var e=t.loadCell(r,this.te).getChars().length;0===this.te.getWidth()?n--:e>1&&i[0]!==r&&(n+=e-1)}return n},i.prototype.setSelection=function(t,i,n){this.oh.clearSelection(),this.ah(),this.oh.selectionStart=[t,i],this.oh.selectionStartLength=n,this.refresh()},i.prototype.rightClickSelect=function(t){this.lh(t)||(this.wh(t),this.Ah())},i.prototype.Eh=function(t,i,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),!(t[0]>=this.qt.cols)){var e=this.qt.buffer,s=e.lines.get(t[1]);if(s){var h=e.translateBufferLineToString(t[1],!1),u=this.Rh(s,t),o=u,c=t[0]-u,f=0,a=0,l=0,v=0;if(" "===h.charAt(u)){for(;u>0&&" "===h.charAt(u-1);)u--;for(;o<h.length&&" "===h.charAt(o+1);)o++}else{var d=t[0],b=t[0];0===s.getWidth(d)&&(f++,d--),2===s.getWidth(b)&&(a++,b++);var w=s.getString(b).length;for(w>1&&(v+=w-1,o+=w-1);d>0&&u>0&&!this.Ch(s.loadCell(d-1,this.te));){s.loadCell(d-1,this.te);var m=this.te.getChars().length;0===this.te.getWidth()?(f++,d--):m>1&&(l+=m-1,u-=m-1),u--,d--}for(;b<s.length&&o+1<h.length&&!this.Ch(s.loadCell(b+1,this.te));){s.loadCell(b+1,this.te);var g=this.te.getChars().length;2===this.te.getWidth()?(a++,b++):g>1&&(v+=g-1,o+=g-1),o++,b++}}o++;var p=u+c-f+l,y=Math.min(this.qt.cols,o-u+f+a-l-v);if(i||""!==h.slice(u,o).trim()){if(n&&0===p&&32!==s.getCodePoint(0)){var O=e.lines.get(t[1]-1);if(O&&s.isWrapped&&32!==O.getCodePoint(this.qt.cols-1)){var j=this.Eh([this.qt.cols-1,t[1]-1],!1,!0,!1);if(j){var _=this.qt.cols-j.start;p-=_,y+=_}}}if(r&&p+y===this.qt.cols&&32!==s.getCodePoint(this.qt.cols-1)){var k=e.lines.get(t[1]+1);if(k&&k.isWrapped&&32!==k.getCodePoint(0)){var M=this.Eh([0,t[1]+1],!1,!1,!0);M&&(y+=M.length)}}return{start:p,length:y}}}}},i.prototype.mh=function(t,i){var n=this.Eh(t,i);if(n){for(;n.start<0;)n.start+=this.qt.cols,t[1]--;this.oh.selectionStart=[n.start,t[1]],this.oh.selectionStartLength=n.length}},i.prototype.xh=function(t){var i=this.Eh(t,!0);if(i){for(var n=t[1];i.start<0;)i.start+=this.qt.cols,n--;if(!this.oh.areSelectionValuesReversed())for(;i.start+i.length>this.qt.cols;)i.length-=this.qt.cols,n++;this.oh.selectionEnd=[this.oh.areSelectionValuesReversed()?i.start:i.start+i.length,n]}},i.prototype.Ch=function(t){return 0!==t.getWidth()&&this.bi.options.wordSeparator.indexOf(t.getChars())>=0},i.prototype.qh=function(t){var i=this.qt.buffer.getWrappedRangeForLine(t);this.oh.selectionStart=[0,i.first],this.oh.selectionEnd=[this.qt.cols,i.last],this.oh.selectionStartLength=0},s([h(2,l.IBufferService),h(3,l.ICoreService),h(4,a.IMouseService),h(5,l.IOptionsService),h(6,a.IRenderService)],i)}(b.Disposable);i.SelectionService=g},4725:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.ISoundService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;var r=n(8343);i.ICharSizeService=r.createDecorator("CharSizeService"),i.ICoreBrowserService=r.createDecorator("CoreBrowserService"),i.IMouseService=r.createDecorator("MouseService"),i.IRenderService=r.createDecorator("RenderService"),i.ISelectionService=r.createDecorator("SelectionService"),i.ISoundService=r.createDecorator("SoundService")},357:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.SoundService=void 0;var s=n(2585),h=function(){function t(t){this.bi=t}return Object.defineProperty(t,"audioContext",{get:function(){if(!t.Th){var i=window.AudioContext||window.webkitAudioContext;if(!i)return null;t.Th=new i}return t.Th},enumerable:!1,configurable:!0}),t.prototype.playBellSound=function(){var i=t.audioContext;if(i){var n=i.createBufferSource();i.decodeAudioData(this.Ih(this.Uh(this.bi.options.bellSound)),(function(t){n.buffer=t,n.connect(i.destination),n.start(0)}))}},t.prototype.Ih=function(t){for(var i=window.atob(t),n=i.length,r=new Uint8Array(n),e=0;e<n;e++)r[e]=i.charCodeAt(e);return r.buffer},t.prototype.Uh=function(t){return t.split(",")[1]},t=r([e(0,s.IOptionsService)],t)}();i.SoundService=h},6349:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.CircularList=void 0;var r=n(8460),e=function(){function t(t){this.Bh=t,this.onDeleteEmitter=new r.EventEmitter,this.onInsertEmitter=new r.EventEmitter,this.onTrimEmitter=new r.EventEmitter,this.Ph=new Array(this.Bh),this.Nh=0,this.Lh=0}return Object.defineProperty(t.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.Bh},set:function(t){if(this.Bh!==t){for(var i=new Array(t),n=0;n<Math.min(t,this.length);n++)i[n]=this.Ph[this.Dh(n)];this.Ph=i,this.Bh=t,this.Nh=0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.Lh},set:function(t){if(t>this.Lh)for(var i=this.Lh;i<t;i++)this.Ph[i]=void 0;this.Lh=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.Ph[this.Dh(t)]},t.prototype.set=function(t,i){this.Ph[this.Dh(t)]=i},t.prototype.push=function(t){this.Ph[this.Dh(this.Lh)]=t,this.Lh===this.Bh?(this.Nh=++this.Nh%this.Bh,this.onTrimEmitter.fire(1)):this.Lh++},t.prototype.recycle=function(){if(this.Lh!==this.Bh)throw new Error("Can only recycle when the buffer is full");return this.Nh=++this.Nh%this.Bh,this.onTrimEmitter.fire(1),this.Ph[this.Dh(this.Lh-1)]},Object.defineProperty(t.prototype,"isFull",{get:function(){return this.Lh===this.Bh},enumerable:!1,configurable:!0}),t.prototype.pop=function(){return this.Ph[this.Dh(this.Lh---1)]},t.prototype.splice=function(t,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(i){for(var e=t;e<this.Lh-i;e++)this.Ph[this.Dh(e)]=this.Ph[this.Dh(e+i)];this.Lh-=i,this.onDeleteEmitter.fire({index:t,amount:i})}for(e=this.Lh-1;e>=t;e--)this.Ph[this.Dh(e+n.length)]=this.Ph[this.Dh(e)];for(e=0;e<n.length;e++)this.Ph[this.Dh(t+e)]=n[e];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this.Lh+n.length>this.Bh){var s=this.Lh+n.length-this.Bh;this.Nh+=s,this.Lh=this.Bh,this.onTrimEmitter.fire(s)}else this.Lh+=n.length},t.prototype.trimStart=function(t){t>this.Lh&&(t=this.Lh),this.Nh+=t,this.Lh-=t,this.onTrimEmitter.fire(t)},t.prototype.shiftElements=function(t,i,n){if(!(i<=0)){if(t<0||t>=this.Lh)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(var r=i-1;r>=0;r--)this.set(t+r+n,this.get(t+r));var e=t+i+n-this.Lh;if(e>0)for(this.Lh+=e;this.Lh>this.Bh;)this.Lh--,this.Nh++,this.onTrimEmitter.fire(1)}else for(r=0;r<i;r++)this.set(t+r+n,this.get(t+r))}},t.prototype.Dh=function(t){return(this.Nh+t)%this.Bh},t}();i.CircularList=e},1439:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.clone=void 0,i.clone=function t(i,n){if(void 0===n&&(n=5),"object"!=typeof i)return i;var r=Array.isArray(i)?[]:{};for(var e in i)r[e]=n<=1?i[e]:i[e]?t(i[e],n-1):i[e];return r}},8969:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.CoreTerminal=void 0;var s=n(844),h=n(2585),u=n(4348),o=n(7866),c=n(744),f=n(7302),a=n(6975),l=n(8460),v=n(1753),d=n(3730),b=n(1480),w=n(7994),m=n(9282),g=n(5435),p=n(5981),y=function(t){function i(i){var n=t.call(this)||this;return n.Wh=new l.EventEmitter,n.Fh=new l.EventEmitter,n.Kh=new l.EventEmitter,n.ot=new l.EventEmitter,n.Bn=new l.EventEmitter,n.Zi=new u.InstantiationService,n.optionsService=new f.OptionsService(i),n.Zi.setService(h.IOptionsService,n.optionsService),n.qt=n.register(n.Zi.createInstance(c.BufferService)),n.Zi.setService(h.IBufferService,n.qt),n.xt=n.Zi.createInstance(o.LogService),n.Zi.setService(h.ILogService,n.xt),n.bn=n.register(n.Zi.createInstance(a.CoreService,(function(){return n.scrollToBottom()}))),n.Zi.setService(h.ICoreService,n.bn),n.Tn=n.Zi.createInstance(v.CoreMouseService),n.Zi.setService(h.ICoreMouseService,n.Tn),n.Hh=n.Zi.createInstance(d.DirtyRowService),n.Zi.setService(h.IDirtyRowService,n.Hh),n.unicodeService=n.Zi.createInstance(b.UnicodeService),n.Zi.setService(h.IUnicodeService,n.unicodeService),n.zh=n.Zi.createInstance(w.CharsetService),n.Zi.setService(h.ICharsetService,n.zh),n.tn=new g.InputHandler(n.qt,n.zh,n.bn,n.Hh,n.xt,n.optionsService,n.Tn,n.unicodeService),n.register(l.forwardEvent(n.tn.onLineFeed,n.Kh)),n.register(n.tn),n.register(l.forwardEvent(n.qt.onResize,n.ot)),n.register(l.forwardEvent(n.bn.onData,n.Fh)),n.register(l.forwardEvent(n.bn.onBinary,n.Wh)),n.register(n.optionsService.onOptionChange((function(t){return n.cn(t)}))),n.Gh=new p.WriteBuffer((function(t){return n.tn.parse(t)})),n}return e(i,t),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this.Wh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this.Fh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this.Kh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this.ot.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this.Bn.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this.qt.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this.qt.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffers",{get:function(){return this.qt.buffers},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){var i;this.hn||(t.prototype.dispose.call(this),null===(i=this.$h)||void 0===i||i.dispose(),this.$h=void 0)},i.prototype.write=function(t,i){this.Gh.write(t,i)},i.prototype.writeSync=function(t){this.Gh.writeSync(t)},i.prototype.resize=function(t,i){isNaN(t)||isNaN(i)||(t=Math.max(t,c.MINIMUM_COLS),i=Math.max(i,c.MINIMUM_ROWS),this.qt.resize(t,i))},i.prototype.scroll=function(t,i){void 0===i&&(i=!1);var n,r=this.qt.buffer;(n=this.Yh)&&n.length===this.cols&&n.getFg(0)===t.fg&&n.getBg(0)===t.bg||(n=r.getBlankLine(t,i),this.Yh=n),n.isWrapped=i;var e=r.ybase+r.scrollTop,s=r.ybase+r.scrollBottom;if(0===r.scrollTop){var h=r.lines.isFull;s===r.lines.length-1?h?r.lines.recycle().copyFrom(n):r.lines.push(n.clone()):r.lines.splice(s+1,0,n.clone()),h?this.qt.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.qt.isUserScrolling||r.ydisp++)}else{var u=s-e+1;r.lines.shiftElements(e+1,u-1,-1),r.lines.set(s,n.clone())}this.qt.isUserScrolling||(r.ydisp=r.ybase),this.Hh.markRangeDirty(r.scrollTop,r.scrollBottom),this.Bn.fire(r.ydisp)},i.prototype.scrollLines=function(t,i){var n=this.qt.buffer;if(t<0){if(0===n.ydisp)return;this.qt.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.qt.isUserScrolling=!1);var r=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),r!==n.ydisp&&(i||this.Bn.fire(n.ydisp))},i.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.qt.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.qt.buffer.ybase-this.qt.buffer.ydisp)},i.prototype.scrollToLine=function(t){var i=t-this.qt.buffer.ydisp;0!==i&&this.scrollLines(i)},i.prototype.addEscHandler=function(t,i){return this.tn.addEscHandler(t,i)},i.prototype.addDcsHandler=function(t,i){return this.tn.addDcsHandler(t,i)},i.prototype.addCsiHandler=function(t,i){return this.tn.addCsiHandler(t,i)},i.prototype.addOscHandler=function(t,i){return this.tn.addOscHandler(t,i)},i.prototype.Xi=function(){this.optionsService.options.windowsMode&&this.Jh()},i.prototype.reset=function(){this.tn.reset(),this.qt.reset(),this.zh.reset(),this.bn.reset(),this.Tn.reset()},i.prototype.cn=function(t){var i;switch(t){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this.Jh():(null===(i=this.$h)||void 0===i||i.dispose(),this.$h=void 0)}},i.prototype.Jh=function(){var t=this;if(!this.$h){var i=[];i.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this.qt))),i.push(this.addCsiHandler({final:"H"},(function(){return m.updateWindowsModeWrappedState(t.qt),!1}))),this.$h={dispose:function(){for(var t=0,n=i;t<n.length;t++)n[t].dispose()}}}},i}(s.Disposable);i.CoreTerminal=y},8460:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.forwardEvent=i.EventEmitter=void 0;var n=function(){function t(){this.Vh=[],this.Qh=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this.Xh||(this.Xh=function(i){return t.Vh.push(i),{dispose:function(){if(!t.Qh)for(var n=0;n<t.Vh.length;n++)if(t.Vh[n]===i)return void t.Vh.splice(n,1)}}}),this.Xh},enumerable:!1,configurable:!0}),t.prototype.fire=function(t,i){for(var n=[],r=0;r<this.Vh.length;r++)n.push(this.Vh[r]);for(r=0;r<n.length;r++)n[r].call(void 0,t,i)},t.prototype.dispose=function(){this.Vh&&(this.Vh.length=0),this.Qh=!0},t}();i.EventEmitter=n,i.forwardEvent=function(t,i){return t((function(t){return i.fire(t)}))}},5435:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;var s,h=n(2584),u=n(7116),o=n(2015),c=n(844),f=n(8273),a=n(482),l=n(8437),v=n(8460),d=n(643),b=n(511),w=n(3734),m=n(6242),g=n(6351),p={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function O(t,i){if(t>24)return i.setWinLines||!1;switch(t){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}!function(t){t[t.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",t[t.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(s=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));var j=function(){function t(t,i,n,r){this.qt=t,this.bn=i,this.xt=n,this.bi=r,this.Zh=new Uint32Array(0)}return t.prototype.hook=function(t){this.Zh=new Uint32Array(0)},t.prototype.put=function(t,i,n){this.Zh=f.concat(this.Zh,t.subarray(i,n))},t.prototype.unhook=function(t){if(!t)return this.Zh=new Uint32Array(0),!0;var i=a.utf32ToString(this.Zh);switch(this.Zh=new Uint32Array(0),i){case'"q':this.bn.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this.bn.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var n=this.qt.buffer.scrollTop+1+";"+(this.qt.buffer.scrollBottom+1)+"r";this.bn.triggerDataEvent(h.C0.ESC+"P1$r"+n+h.C0.ESC+"\\");break;case"m":this.bn.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var r={block:2,underline:4,bar:6}[this.bi.options.cursorStyle];r-=this.bi.options.cursorBlink?1:0,this.bn.triggerDataEvent(h.C0.ESC+"P1$r"+r+" q"+h.C0.ESC+"\\");break;default:this.xt.debug("Unknown DCS $q %s",i),this.bn.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},t}(),_=function(t){function i(i,n,r,e,s,c,f,d,w){void 0===w&&(w=new o.EscapeSequenceParser);var g=t.call(this)||this;g.qt=i,g.zh=n,g.bn=r,g.Hh=e,g.xt=s,g.bi=c,g.Tn=f,g.At=d,g.vr=w,g.tu=new Uint32Array(4096),g.iu=new a.StringToUtf32,g.nu=new a.Utf8ToUtf32,g.te=new b.CellData,g.ru="",g.eu="",g.su=[],g.hu=[],g.uu=l.DEFAULT_ATTR_DATA.clone(),g.ou=l.DEFAULT_ATTR_DATA.clone(),g.cu=new v.EventEmitter,g.fu=new v.EventEmitter,g.au=new v.EventEmitter,g.lu=new v.EventEmitter,g.vu=new v.EventEmitter,g.du=new v.EventEmitter,g.bu=new v.EventEmitter,g.wu=new v.EventEmitter,g.Hi=new v.EventEmitter,g.Kh=new v.EventEmitter,g.Bn=new v.EventEmitter,g.$i=new v.EventEmitter,g.mu=new v.EventEmitter,g.register(g.vr),g.vr.setCsiHandlerFallback((function(t,i){g.xt.debug("Unknown CSI code: ",{identifier:g.vr.identToString(t),params:i.toArray()})})),g.vr.setEscHandlerFallback((function(t){g.xt.debug("Unknown ESC code: ",{identifier:g.vr.identToString(t)})})),g.vr.setExecuteHandlerFallback((function(t){g.xt.debug("Unknown EXECUTE code: ",{code:t})})),g.vr.setOscHandlerFallback((function(t,i,n){g.xt.debug("Unknown OSC code: ",{identifier:t,action:i,data:n})})),g.vr.setDcsHandlerFallback((function(t,i,n){"HOOK"===i&&(n=n.toArray()),g.xt.debug("Unknown DCS code: ",{identifier:g.vr.identToString(t),action:i,payload:n})})),g.vr.setPrintHandler((function(t,i,n){return g.print(t,i,n)})),g.vr.registerCsiHandler({final:"@"},(function(t){return g.insertChars(t)})),g.vr.registerCsiHandler({intermediates:" ",final:"@"},(function(t){return g.scrollLeft(t)})),g.vr.registerCsiHandler({final:"A"},(function(t){return g.cursorUp(t)})),g.vr.registerCsiHandler({intermediates:" ",final:"A"},(function(t){return g.scrollRight(t)})),g.vr.registerCsiHandler({final:"B"},(function(t){return g.cursorDown(t)})),g.vr.registerCsiHandler({final:"C"},(function(t){return g.cursorForward(t)})),g.vr.registerCsiHandler({final:"D"},(function(t){return g.cursorBackward(t)})),g.vr.registerCsiHandler({final:"E"},(function(t){return g.cursorNextLine(t)})),g.vr.registerCsiHandler({final:"F"},(function(t){return g.cursorPrecedingLine(t)})),g.vr.registerCsiHandler({final:"G"},(function(t){return g.cursorCharAbsolute(t)})),g.vr.registerCsiHandler({final:"H"},(function(t){return g.cursorPosition(t)})),g.vr.registerCsiHandler({final:"I"},(function(t){return g.cursorForwardTab(t)})),g.vr.registerCsiHandler({final:"J"},(function(t){return g.eraseInDisplay(t)})),g.vr.registerCsiHandler({prefix:"?",final:"J"},(function(t){return g.eraseInDisplay(t)})),g.vr.registerCsiHandler({final:"K"},(function(t){return g.eraseInLine(t)})),g.vr.registerCsiHandler({prefix:"?",final:"K"},(function(t){return g.eraseInLine(t)})),g.vr.registerCsiHandler({final:"L"},(function(t){return g.insertLines(t)})),g.vr.registerCsiHandler({final:"M"},(function(t){return g.deleteLines(t)})),g.vr.registerCsiHandler({final:"P"},(function(t){return g.deleteChars(t)})),g.vr.registerCsiHandler({final:"S"},(function(t){return g.scrollUp(t)})),g.vr.registerCsiHandler({final:"T"},(function(t){return g.scrollDown(t)})),g.vr.registerCsiHandler({final:"X"},(function(t){return g.eraseChars(t)})),g.vr.registerCsiHandler({final:"Z"},(function(t){return g.cursorBackwardTab(t)})),g.vr.registerCsiHandler({final:"`"},(function(t){return g.charPosAbsolute(t)})),g.vr.registerCsiHandler({final:"a"},(function(t){return g.hPositionRelative(t)})),g.vr.registerCsiHandler({final:"b"},(function(t){return g.repeatPrecedingCharacter(t)})),g.vr.registerCsiHandler({final:"c"},(function(t){return g.sendDeviceAttributesPrimary(t)})),g.vr.registerCsiHandler({prefix:">",final:"c"},(function(t){return g.sendDeviceAttributesSecondary(t)})),g.vr.registerCsiHandler({final:"d"},(function(t){return g.linePosAbsolute(t)})),g.vr.registerCsiHandler({final:"e"},(function(t){return g.vPositionRelative(t)})),g.vr.registerCsiHandler({final:"f"},(function(t){return g.hVPosition(t)})),g.vr.registerCsiHandler({final:"g"},(function(t){return g.tabClear(t)})),g.vr.registerCsiHandler({final:"h"},(function(t){return g.setMode(t)})),g.vr.registerCsiHandler({prefix:"?",final:"h"},(function(t){return g.setModePrivate(t)})),g.vr.registerCsiHandler({final:"l"},(function(t){return g.resetMode(t)})),g.vr.registerCsiHandler({prefix:"?",final:"l"},(function(t){return g.resetModePrivate(t)})),g.vr.registerCsiHandler({final:"m"},(function(t){return g.charAttributes(t)})),g.vr.registerCsiHandler({final:"n"},(function(t){return g.deviceStatus(t)})),g.vr.registerCsiHandler({prefix:"?",final:"n"},(function(t){return g.deviceStatusPrivate(t)})),g.vr.registerCsiHandler({intermediates:"!",final:"p"},(function(t){return g.softReset(t)})),g.vr.registerCsiHandler({intermediates:" ",final:"q"},(function(t){return g.setCursorStyle(t)})),g.vr.registerCsiHandler({final:"r"},(function(t){return g.setScrollRegion(t)})),g.vr.registerCsiHandler({final:"s"},(function(t){return g.saveCursor(t)})),g.vr.registerCsiHandler({final:"t"},(function(t){return g.windowOptions(t)})),g.vr.registerCsiHandler({final:"u"},(function(t){return g.restoreCursor(t)})),g.vr.registerCsiHandler({intermediates:"'",final:"}"},(function(t){return g.insertColumns(t)})),g.vr.registerCsiHandler({intermediates:"'",final:"~"},(function(t){return g.deleteColumns(t)})),g.vr.setExecuteHandler(h.C0.BEL,(function(){return g.bell()})),g.vr.setExecuteHandler(h.C0.LF,(function(){return g.lineFeed()})),g.vr.setExecuteHandler(h.C0.VT,(function(){return g.lineFeed()})),g.vr.setExecuteHandler(h.C0.FF,(function(){return g.lineFeed()})),g.vr.setExecuteHandler(h.C0.CR,(function(){return g.carriageReturn()})),g.vr.setExecuteHandler(h.C0.BS,(function(){return g.backspace()})),g.vr.setExecuteHandler(h.C0.HT,(function(){return g.tab()})),g.vr.setExecuteHandler(h.C0.SO,(function(){return g.shiftOut()})),g.vr.setExecuteHandler(h.C0.SI,(function(){return g.shiftIn()})),g.vr.setExecuteHandler(h.C1.IND,(function(){return g.index()})),g.vr.setExecuteHandler(h.C1.NEL,(function(){return g.nextLine()})),g.vr.setExecuteHandler(h.C1.HTS,(function(){return g.tabSet()})),g.vr.registerOscHandler(0,new m.OscHandler((function(t){return g.setTitle(t),g.setIconName(t),!0}))),g.vr.registerOscHandler(1,new m.OscHandler((function(t){return g.setIconName(t)}))),g.vr.registerOscHandler(2,new m.OscHandler((function(t){return g.setTitle(t)}))),g.vr.registerOscHandler(4,new m.OscHandler((function(t){return g.setAnsiColor(t)}))),g.vr.registerEscHandler({final:"7"},(function(){return g.saveCursor()})),g.vr.registerEscHandler({final:"8"},(function(){return g.restoreCursor()})),g.vr.registerEscHandler({final:"D"},(function(){return g.index()})),g.vr.registerEscHandler({final:"E"},(function(){return g.nextLine()})),g.vr.registerEscHandler({final:"H"},(function(){return g.tabSet()})),g.vr.registerEscHandler({final:"M"},(function(){return g.reverseIndex()})),g.vr.registerEscHandler({final:"="},(function(){return g.keypadApplicationMode()})),g.vr.registerEscHandler({final:">"},(function(){return g.keypadNumericMode()})),g.vr.registerEscHandler({final:"c"},(function(){return g.fullReset()})),g.vr.registerEscHandler({final:"n"},(function(){return g.setgLevel(2)})),g.vr.registerEscHandler({final:"o"},(function(){return g.setgLevel(3)})),g.vr.registerEscHandler({final:"|"},(function(){return g.setgLevel(3)})),g.vr.registerEscHandler({final:"}"},(function(){return g.setgLevel(2)})),g.vr.registerEscHandler({final:"~"},(function(){return g.setgLevel(1)})),g.vr.registerEscHandler({intermediates:"%",final:"@"},(function(){return g.selectDefaultCharset()})),g.vr.registerEscHandler({intermediates:"%",final:"G"},(function(){return g.selectDefaultCharset()}));var p=function(t){y.vr.registerEscHandler({intermediates:"(",final:t},(function(){return g.selectCharset("("+t)})),y.vr.registerEscHandler({intermediates:")",final:t},(function(){return g.selectCharset(")"+t)})),y.vr.registerEscHandler({intermediates:"*",final:t},(function(){return g.selectCharset("*"+t)})),y.vr.registerEscHandler({intermediates:"+",final:t},(function(){return g.selectCharset("+"+t)})),y.vr.registerEscHandler({intermediates:"-",final:t},(function(){return g.selectCharset("-"+t)})),y.vr.registerEscHandler({intermediates:".",final:t},(function(){return g.selectCharset("."+t)})),y.vr.registerEscHandler({intermediates:"/",final:t},(function(){return g.selectCharset("/"+t)}))},y=this;for(var O in u.CHARSETS)p(O);return g.vr.registerEscHandler({intermediates:"#",final:"8"},(function(){return g.screenAlignmentPattern()})),g.vr.setErrorHandler((function(t){return g.xt.error("Parsing error: ",t),t})),g.vr.registerDcsHandler({intermediates:"$",final:"q"},new j(g.qt,g.bn,g.xt,g.bi)),g}return e(i,t),Object.defineProperty(i.prototype,"onRequestBell",{get:function(){return this.cu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRefreshRows",{get:function(){return this.fu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestReset",{get:function(){return this.au.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestScroll",{get:function(){return this.lu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestSyncScrollBar",{get:function(){return this.vu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestWindowsOptionsReport",{get:function(){return this.du.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this.bu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this.wu.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this.Hi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this.Kh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this.Bn.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this.$i.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onAnsiColorChange",{get:function(){return this.mu.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.parse=function(t){var i=this.qt.buffer,n=i.x,r=i.y;if(this.xt.debug("parsing data",t),this.tu.length<t.length&&this.tu.length<y&&(this.tu=new Uint32Array(Math.min(t.length,y))),this.Hh.clearRange(),t.length>y)for(var e=0;e<t.length;e+=y){var s=e+y<t.length?e+y:t.length,h="string"==typeof t?this.iu.decode(t.substring(e,s),this.tu):this.nu.decode(t.subarray(e,s),this.tu);this.vr.parse(this.tu,h)}else h="string"==typeof t?this.iu.decode(t,this.tu):this.nu.decode(t,this.tu),this.vr.parse(this.tu,h);(i=this.qt.buffer).x===n&&i.y===r||this.Hi.fire(),this.fu.fire(this.Hh.start,this.Hh.end)},i.prototype.print=function(t,i,n){var r,e,s=this.qt.buffer,h=this.zh.charset,u=this.bi.options.screenReaderMode,o=this.qt.cols,c=this.bn.decPrivateModes.wraparound,f=this.bn.modes.insertMode,l=this.uu,v=s.lines.get(s.ybase+s.y);this.Hh.markDirty(s.y),s.x&&n-i>0&&2===v.getWidth(s.x-1)&&v.setCellFromCodePoint(s.x-1,0,1,l.fg,l.bg,l.extended);for(var b=i;b<n;++b){if(r=t[b],e=this.At.wcwidth(r),r<127&&h){var w=h[String.fromCharCode(r)];w&&(r=w.charCodeAt(0))}if(u&&this.bu.fire(a.stringFromCodePoint(r)),e||!s.x){if(s.x+e-1>=o)if(c){for(;s.x<o;)v.setCellFromCodePoint(s.x++,0,1,l.fg,l.bg,l.extended);s.x=0,s.y++,s.y===s.scrollBottom+1?(s.y--,this.lu.fire(this.gu(),!0)):(s.y>=this.qt.rows&&(s.y=this.qt.rows-1),s.lines.get(s.ybase+s.y).isWrapped=!0),v=s.lines.get(s.ybase+s.y)}else if(s.x=o-1,2===e)continue;if(f&&(v.insertCells(s.x,e,s.getNullCell(l),l),2===v.getWidth(o-1)&&v.setCellFromCodePoint(o-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,l.fg,l.bg,l.extended)),v.setCellFromCodePoint(s.x++,r,e,l.fg,l.bg,l.extended),e>0)for(;--e;)v.setCellFromCodePoint(s.x++,0,0,l.fg,l.bg,l.extended)}else v.getWidth(s.x-1)?v.addCodepointToCell(s.x-1,r):v.addCodepointToCell(s.x-2,r)}n-i>0&&(v.loadCell(s.x-1,this.te),2===this.te.getWidth()||this.te.getCode()>65535?this.vr.precedingCodepoint=0:this.te.isCombined()?this.vr.precedingCodepoint=this.te.getChars().charCodeAt(0):this.vr.precedingCodepoint=this.te.content),s.x<o&&n-i>0&&0===v.getWidth(s.x)&&!v.hasContent(s.x)&&v.setCellFromCodePoint(s.x,0,1,l.fg,l.bg,l.extended),this.Hh.markDirty(s.y)},i.prototype.addCsiHandler=function(t,i){var n=this;return"t"!==t.final||t.prefix||t.intermediates?this.vr.registerCsiHandler(t,i):this.vr.registerCsiHandler(t,(function(t){return!O(t.params[0],n.bi.options.windowOptions)||i(t)}))},i.prototype.addDcsHandler=function(t,i){return this.vr.registerDcsHandler(t,new g.DcsHandler(i))},i.prototype.addEscHandler=function(t,i){return this.vr.registerEscHandler(t,i)},i.prototype.addOscHandler=function(t,i){return this.vr.registerOscHandler(t,new m.OscHandler(i))},i.prototype.bell=function(){return this.cu.fire(),!0},i.prototype.lineFeed=function(){var t=this.qt.buffer;return this.Hh.markDirty(t.y),this.bi.options.convertEol&&(t.x=0),t.y++,t.y===t.scrollBottom+1?(t.y--,this.lu.fire(this.gu())):t.y>=this.qt.rows&&(t.y=this.qt.rows-1),t.x>=this.qt.cols&&t.x--,this.Hh.markDirty(t.y),this.Kh.fire(),!0},i.prototype.carriageReturn=function(){return this.qt.buffer.x=0,!0},i.prototype.backspace=function(){var t,i=this.qt.buffer;if(!this.bn.decPrivateModes.reverseWraparound)return this.pu(),i.x>0&&i.x--,!0;if(this.pu(this.qt.cols),i.x>0)i.x--;else if(0===i.x&&i.y>i.scrollTop&&i.y<=i.scrollBottom&&(null===(t=i.lines.get(i.ybase+i.y))||void 0===t?void 0:t.isWrapped)){i.lines.get(i.ybase+i.y).isWrapped=!1,i.y--,i.x=this.qt.cols-1;var n=i.lines.get(i.ybase+i.y);n.hasWidth(i.x)&&!n.hasContent(i.x)&&i.x--}return this.pu(),!0},i.prototype.tab=function(){if(this.qt.buffer.x>=this.qt.cols)return!0;var t=this.qt.buffer.x;return this.qt.buffer.x=this.qt.buffer.nextStop(),this.bi.options.screenReaderMode&&this.wu.fire(this.qt.buffer.x-t),!0},i.prototype.shiftOut=function(){return this.zh.setgLevel(1),!0},i.prototype.shiftIn=function(){return this.zh.setgLevel(0),!0},i.prototype.pu=function(t){void 0===t&&(t=this.qt.cols-1),this.qt.buffer.x=Math.min(t,Math.max(0,this.qt.buffer.x)),this.qt.buffer.y=this.bn.decPrivateModes.origin?Math.min(this.qt.buffer.scrollBottom,Math.max(this.qt.buffer.scrollTop,this.qt.buffer.y)):Math.min(this.qt.rows-1,Math.max(0,this.qt.buffer.y)),this.Hh.markDirty(this.qt.buffer.y)},i.prototype.yu=function(t,i){this.Hh.markDirty(this.qt.buffer.y),this.bn.decPrivateModes.origin?(this.qt.buffer.x=t,this.qt.buffer.y=this.qt.buffer.scrollTop+i):(this.qt.buffer.x=t,this.qt.buffer.y=i),this.pu(),this.Hh.markDirty(this.qt.buffer.y)},i.prototype.Ou=function(t,i){this.pu(),this.yu(this.qt.buffer.x+t,this.qt.buffer.y+i)},i.prototype.cursorUp=function(t){var i=this.qt.buffer.y-this.qt.buffer.scrollTop;return i>=0?this.Ou(0,-Math.min(i,t.params[0]||1)):this.Ou(0,-(t.params[0]||1)),!0},i.prototype.cursorDown=function(t){var i=this.qt.buffer.scrollBottom-this.qt.buffer.y;return i>=0?this.Ou(0,Math.min(i,t.params[0]||1)):this.Ou(0,t.params[0]||1),!0},i.prototype.cursorForward=function(t){return this.Ou(t.params[0]||1,0),!0},i.prototype.cursorBackward=function(t){return this.Ou(-(t.params[0]||1),0),!0},i.prototype.cursorNextLine=function(t){return this.cursorDown(t),this.qt.buffer.x=0,!0},i.prototype.cursorPrecedingLine=function(t){return this.cursorUp(t),this.qt.buffer.x=0,!0},i.prototype.cursorCharAbsolute=function(t){return this.yu((t.params[0]||1)-1,this.qt.buffer.y),!0},i.prototype.cursorPosition=function(t){return this.yu(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0},i.prototype.charPosAbsolute=function(t){return this.yu((t.params[0]||1)-1,this.qt.buffer.y),!0},i.prototype.hPositionRelative=function(t){return this.Ou(t.params[0]||1,0),!0},i.prototype.linePosAbsolute=function(t){return this.yu(this.qt.buffer.x,(t.params[0]||1)-1),!0},i.prototype.vPositionRelative=function(t){return this.Ou(0,t.params[0]||1),!0},i.prototype.hVPosition=function(t){return this.cursorPosition(t),!0},i.prototype.tabClear=function(t){var i=t.params[0];return 0===i?delete this.qt.buffer.tabs[this.qt.buffer.x]:3===i&&(this.qt.buffer.tabs={}),!0},i.prototype.cursorForwardTab=function(t){if(this.qt.buffer.x>=this.qt.cols)return!0;for(var i=t.params[0]||1;i--;)this.qt.buffer.x=this.qt.buffer.nextStop();return!0},i.prototype.cursorBackwardTab=function(t){if(this.qt.buffer.x>=this.qt.cols)return!0;for(var i=t.params[0]||1,n=this.qt.buffer;i--;)n.x=n.prevStop();return!0},i.prototype.ju=function(t,i,n,r){void 0===r&&(r=!1);var e=this.qt.buffer.lines.get(this.qt.buffer.ybase+t);e.replaceCells(i,n,this.qt.buffer.getNullCell(this.gu()),this.gu()),r&&(e.isWrapped=!1)},i.prototype._u=function(t){var i=this.qt.buffer.lines.get(this.qt.buffer.ybase+t);i.fill(this.qt.buffer.getNullCell(this.gu())),i.isWrapped=!1},i.prototype.eraseInDisplay=function(t){var i;switch(this.pu(),t.params[0]){case 0:for(i=this.qt.buffer.y,this.Hh.markDirty(i),this.ju(i++,this.qt.buffer.x,this.qt.cols,0===this.qt.buffer.x);i<this.qt.rows;i++)this._u(i);this.Hh.markDirty(i);break;case 1:for(i=this.qt.buffer.y,this.Hh.markDirty(i),this.ju(i,0,this.qt.buffer.x+1,!0),this.qt.buffer.x+1>=this.qt.cols&&(this.qt.buffer.lines.get(i+1).isWrapped=!1);i--;)this._u(i);this.Hh.markDirty(0);break;case 2:for(i=this.qt.rows,this.Hh.markDirty(i-1);i--;)this._u(i);this.Hh.markDirty(0);break;case 3:var n=this.qt.buffer.lines.length-this.qt.rows;n>0&&(this.qt.buffer.lines.trimStart(n),this.qt.buffer.ybase=Math.max(this.qt.buffer.ybase-n,0),this.qt.buffer.ydisp=Math.max(this.qt.buffer.ydisp-n,0),this.Bn.fire(0))}return!0},i.prototype.eraseInLine=function(t){switch(this.pu(),t.params[0]){case 0:this.ju(this.qt.buffer.y,this.qt.buffer.x,this.qt.cols);break;case 1:this.ju(this.qt.buffer.y,0,this.qt.buffer.x+1);break;case 2:this.ju(this.qt.buffer.y,0,this.qt.cols)}return this.Hh.markDirty(this.qt.buffer.y),!0},i.prototype.insertLines=function(t){this.pu();var i=t.params[0]||1,n=this.qt.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;for(var r=n.ybase+n.y,e=this.qt.rows-1-n.scrollBottom,s=this.qt.rows-1+n.ybase-e+1;i--;)n.lines.splice(s-1,1),n.lines.splice(r,0,n.getBlankLine(this.gu()));return this.Hh.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.deleteLines=function(t){this.pu();var i=t.params[0]||1,n=this.qt.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;var r,e=n.ybase+n.y;for(r=this.qt.rows-1-n.scrollBottom,r=this.qt.rows-1+n.ybase-r;i--;)n.lines.splice(e,1),n.lines.splice(r,0,n.getBlankLine(this.gu()));return this.Hh.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.insertChars=function(t){this.pu();var i=this.qt.buffer.lines.get(this.qt.buffer.ybase+this.qt.buffer.y);return i&&(i.insertCells(this.qt.buffer.x,t.params[0]||1,this.qt.buffer.getNullCell(this.gu()),this.gu()),this.Hh.markDirty(this.qt.buffer.y)),!0},i.prototype.deleteChars=function(t){this.pu();var i=this.qt.buffer.lines.get(this.qt.buffer.ybase+this.qt.buffer.y);return i&&(i.deleteCells(this.qt.buffer.x,t.params[0]||1,this.qt.buffer.getNullCell(this.gu()),this.gu()),this.Hh.markDirty(this.qt.buffer.y)),!0},i.prototype.scrollUp=function(t){for(var i=t.params[0]||1,n=this.qt.buffer;i--;)n.lines.splice(n.ybase+n.scrollTop,1),n.lines.splice(n.ybase+n.scrollBottom,0,n.getBlankLine(this.gu()));return this.Hh.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollDown=function(t){for(var i=t.params[0]||1,n=this.qt.buffer;i--;)n.lines.splice(n.ybase+n.scrollBottom,1),n.lines.splice(n.ybase+n.scrollTop,0,n.getBlankLine(l.DEFAULT_ATTR_DATA));return this.Hh.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollLeft=function(t){var i=this.qt.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,r=i.scrollTop;r<=i.scrollBottom;++r){var e=i.lines.get(i.ybase+r);e.deleteCells(0,n,i.getNullCell(this.gu()),this.gu()),e.isWrapped=!1}return this.Hh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.scrollRight=function(t){var i=this.qt.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,r=i.scrollTop;r<=i.scrollBottom;++r){var e=i.lines.get(i.ybase+r);e.insertCells(0,n,i.getNullCell(this.gu()),this.gu()),e.isWrapped=!1}return this.Hh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.insertColumns=function(t){var i=this.qt.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,r=i.scrollTop;r<=i.scrollBottom;++r){var e=this.qt.buffer.lines.get(i.ybase+r);e.insertCells(i.x,n,i.getNullCell(this.gu()),this.gu()),e.isWrapped=!1}return this.Hh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.deleteColumns=function(t){var i=this.qt.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,r=i.scrollTop;r<=i.scrollBottom;++r){var e=i.lines.get(i.ybase+r);e.deleteCells(i.x,n,i.getNullCell(this.gu()),this.gu()),e.isWrapped=!1}return this.Hh.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.eraseChars=function(t){this.pu();var i=this.qt.buffer.lines.get(this.qt.buffer.ybase+this.qt.buffer.y);return i&&(i.replaceCells(this.qt.buffer.x,this.qt.buffer.x+(t.params[0]||1),this.qt.buffer.getNullCell(this.gu()),this.gu()),this.Hh.markDirty(this.qt.buffer.y)),!0},i.prototype.repeatPrecedingCharacter=function(t){if(!this.vr.precedingCodepoint)return!0;for(var i=t.params[0]||1,n=new Uint32Array(i),r=0;r<i;++r)n[r]=this.vr.precedingCodepoint;return this.print(n,0,n.length),!0},i.prototype.sendDeviceAttributesPrimary=function(t){return t.params[0]>0||(this.ku("xterm")||this.ku("rxvt-unicode")||this.ku("screen")?this.bn.triggerDataEvent(h.C0.ESC+"[?1;2c"):this.ku("linux")&&this.bn.triggerDataEvent(h.C0.ESC+"[?6c")),!0},i.prototype.sendDeviceAttributesSecondary=function(t){return t.params[0]>0||(this.ku("xterm")?this.bn.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this.ku("rxvt-unicode")?this.bn.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this.ku("linux")?this.bn.triggerDataEvent(t.params[0]+"c"):this.ku("screen")&&this.bn.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},i.prototype.ku=function(t){return 0===(this.bi.options.termName+"").indexOf(t)},i.prototype.setMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this.bn.modes.insertMode=!0}return!0},i.prototype.setModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this.bn.decPrivateModes.applicationCursorKeys=!0;break;case 2:this.zh.setgCharset(0,u.DEFAULT_CHARSET),this.zh.setgCharset(1,u.DEFAULT_CHARSET),this.zh.setgCharset(2,u.DEFAULT_CHARSET),this.zh.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this.bi.options.windowOptions.setWinLines&&(this.qt.resize(132,this.qt.rows),this.au.fire());break;case 6:this.bn.decPrivateModes.origin=!0,this.yu(0,0);break;case 7:this.bn.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this.bn.decPrivateModes.reverseWraparound=!0;break;case 66:this.xt.debug("Serial port requested application keypad."),this.bn.decPrivateModes.applicationKeypad=!0,this.vu.fire();break;case 9:this.Tn.activeProtocol="X10";break;case 1e3:this.Tn.activeProtocol="VT200";break;case 1002:this.Tn.activeProtocol="DRAG";break;case 1003:this.Tn.activeProtocol="ANY";break;case 1004:this.bn.decPrivateModes.sendFocus=!0;break;case 1005:this.xt.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this.Tn.activeEncoding="SGR";break;case 1015:this.xt.debug("DECSET 1015 not supported (see #2507)");break;case 25:this.bn.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this.qt.buffers.activateAltBuffer(this.gu()),this.bn.isCursorInitialized=!0,this.fu.fire(0,this.qt.rows-1),this.vu.fire();break;case 2004:this.bn.decPrivateModes.bracketedPasteMode=!0}return!0},i.prototype.resetMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this.bn.modes.insertMode=!1}return!0},i.prototype.resetModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this.bn.decPrivateModes.applicationCursorKeys=!1;break;case 3:this.bi.options.windowOptions.setWinLines&&(this.qt.resize(80,this.qt.rows),this.au.fire());break;case 6:this.bn.decPrivateModes.origin=!1,this.yu(0,0);break;case 7:this.bn.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this.bn.decPrivateModes.reverseWraparound=!1;break;case 66:this.xt.debug("Switching back to normal keypad."),this.bn.decPrivateModes.applicationKeypad=!1,this.vu.fire();break;case 9:case 1e3:case 1002:case 1003:this.Tn.activeProtocol="NONE";break;case 1004:this.bn.decPrivateModes.sendFocus=!1;break;case 1005:this.xt.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this.Tn.activeEncoding="DEFAULT";break;case 1015:this.xt.debug("DECRST 1015 not supported (see #2507)");break;case 25:this.bn.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this.qt.buffers.activateNormalBuffer(),1049===t.params[i]&&this.restoreCursor(),this.bn.isCursorInitialized=!0,this.fu.fire(0,this.qt.rows-1),this.vu.fire();break;case 2004:this.bn.decPrivateModes.bracketedPasteMode=!1}return!0},i.prototype.Mu=function(t,i,n,r,e){return 2===i?(t|=50331648,t&=-16777216,t|=w.AttributeData.fromColorRGB([n,r,e])):5===i&&(t&=-50331904,t|=33554432|255&n),t},i.prototype.qu=function(t,i,n){var r=[0,0,-1,0,0,0],e=0,s=0;do{if(r[s+e]=t.params[i+s],t.hasSubParams(i+s)){var h=t.getSubParams(i+s),u=0;do{5===r[1]&&(e=1),r[s+u+1+e]=h[u]}while(++u<h.length&&u+s+1+e<r.length);break}if(5===r[1]&&s+e>=2||2===r[1]&&s+e>=5)break;r[1]&&(e=1)}while(++s+i<t.length&&s+e<r.length);for(u=2;u<r.length;++u)-1===r[u]&&(r[u]=0);switch(r[0]){case 38:n.fg=this.Mu(n.fg,r[1],r[3],r[4],r[5]);break;case 48:n.bg=this.Mu(n.bg,r[1],r[3],r[4],r[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this.Mu(n.extended.underlineColor,r[1],r[3],r[4],r[5])}return s},i.prototype.xu=function(t,i){i.extended=i.extended.clone(),(!~t||t>5)&&(t=1),i.extended.underlineStyle=t,i.fg|=268435456,0===t&&(i.fg&=-268435457),i.updateExtended()},i.prototype.charAttributes=function(t){if(1===t.length&&0===t.params[0])return this.uu.fg=l.DEFAULT_ATTR_DATA.fg,this.uu.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var i,n=t.length,r=this.uu,e=0;e<n;e++)(i=t.params[e])>=30&&i<=37?(r.fg&=-50331904,r.fg|=16777216|i-30):i>=40&&i<=47?(r.bg&=-50331904,r.bg|=16777216|i-40):i>=90&&i<=97?(r.fg&=-50331904,r.fg|=16777224|i-90):i>=100&&i<=107?(r.bg&=-50331904,r.bg|=16777224|i-100):0===i?(r.fg=l.DEFAULT_ATTR_DATA.fg,r.bg=l.DEFAULT_ATTR_DATA.bg):1===i?r.fg|=134217728:3===i?r.bg|=67108864:4===i?(r.fg|=268435456,this.xu(t.hasSubParams(e)?t.getSubParams(e)[0]:1,r)):5===i?r.fg|=536870912:7===i?r.fg|=67108864:8===i?r.fg|=1073741824:2===i?r.bg|=134217728:21===i?this.xu(2,r):22===i?(r.fg&=-134217729,r.bg&=-134217729):23===i?r.bg&=-67108865:24===i?r.fg&=-268435457:25===i?r.fg&=-536870913:27===i?r.fg&=-67108865:28===i?r.fg&=-1073741825:39===i?(r.fg&=-67108864,r.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(r.bg&=-67108864,r.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?e+=this.qu(t,e,r):59===i?(r.extended=r.extended.clone(),r.extended.underlineColor=-1,r.updateExtended()):100===i?(r.fg&=-67108864,r.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,r.bg&=-67108864,r.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this.xt.debug("Unknown SGR attribute: %d.",i);return!0},i.prototype.deviceStatus=function(t){switch(t.params[0]){case 5:this.bn.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var i=this.qt.buffer.y+1,n=this.qt.buffer.x+1;this.bn.triggerDataEvent(h.C0.ESC+"["+i+";"+n+"R")}return!0},i.prototype.deviceStatusPrivate=function(t){switch(t.params[0]){case 6:var i=this.qt.buffer.y+1,n=this.qt.buffer.x+1;this.bn.triggerDataEvent(h.C0.ESC+"[?"+i+";"+n+"R")}return!0},i.prototype.softReset=function(t){return this.bn.isCursorHidden=!1,this.vu.fire(),this.qt.buffer.scrollTop=0,this.qt.buffer.scrollBottom=this.qt.rows-1,this.uu=l.DEFAULT_ATTR_DATA.clone(),this.bn.reset(),this.zh.reset(),this.qt.buffer.savedX=0,this.qt.buffer.savedY=this.qt.buffer.ybase,this.qt.buffer.savedCurAttrData.fg=this.uu.fg,this.qt.buffer.savedCurAttrData.bg=this.uu.bg,this.qt.buffer.savedCharset=this.zh.charset,this.bn.decPrivateModes.origin=!1,!0},i.prototype.setCursorStyle=function(t){var i=t.params[0]||1;switch(i){case 1:case 2:this.bi.options.cursorStyle="block";break;case 3:case 4:this.bi.options.cursorStyle="underline";break;case 5:case 6:this.bi.options.cursorStyle="bar"}var n=i%2==1;return this.bi.options.cursorBlink=n,!0},i.prototype.setScrollRegion=function(t){var i,n=t.params[0]||1;return(t.length<2||(i=t.params[1])>this.qt.rows||0===i)&&(i=this.qt.rows),i>n&&(this.qt.buffer.scrollTop=n-1,this.qt.buffer.scrollBottom=i-1,this.yu(0,0)),!0},i.prototype.windowOptions=function(t){if(!O(t.params[0],this.bi.options.windowOptions))return!0;var i=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:2!==i&&this.du.fire(s.GET_WIN_SIZE_PIXELS);break;case 16:this.du.fire(s.GET_CELL_SIZE_PIXELS);break;case 18:this.qt&&this.bn.triggerDataEvent(h.C0.ESC+"[8;"+this.qt.rows+";"+this.qt.cols+"t");break;case 22:0!==i&&2!==i||(this.su.push(this.ru),this.su.length>10&&this.su.shift()),0!==i&&1!==i||(this.hu.push(this.eu),this.hu.length>10&&this.hu.shift());break;case 23:0!==i&&2!==i||this.su.length&&this.setTitle(this.su.pop()),0!==i&&1!==i||this.hu.length&&this.setIconName(this.hu.pop())}return!0},i.prototype.saveCursor=function(t){return this.qt.buffer.savedX=this.qt.buffer.x,this.qt.buffer.savedY=this.qt.buffer.ybase+this.qt.buffer.y,this.qt.buffer.savedCurAttrData.fg=this.uu.fg,this.qt.buffer.savedCurAttrData.bg=this.uu.bg,this.qt.buffer.savedCharset=this.zh.charset,!0},i.prototype.restoreCursor=function(t){return this.qt.buffer.x=this.qt.buffer.savedX||0,this.qt.buffer.y=Math.max(this.qt.buffer.savedY-this.qt.buffer.ybase,0),this.uu.fg=this.qt.buffer.savedCurAttrData.fg,this.uu.bg=this.qt.buffer.savedCurAttrData.bg,this.zh.charset=this.Au,this.qt.buffer.savedCharset&&(this.zh.charset=this.qt.buffer.savedCharset),this.pu(),!0},i.prototype.setTitle=function(t){return this.ru=t,this.$i.fire(t),!0},i.prototype.setIconName=function(t){return this.eu=t,!0},i.prototype.Su=function(t){for(var i,n={colors:[]},r=/(\d+);rgb:([0-9a-f]{2})\/([0-9a-f]{2})\/([0-9a-f]{2})/gi;null!==(i=r.exec(t));)n.colors.push({colorIndex:parseInt(i[1]),red:parseInt(i[2],16),green:parseInt(i[3],16),blue:parseInt(i[4],16)});return 0===n.colors.length?null:n},i.prototype.setAnsiColor=function(t){var i=this.Su(t);return i?this.mu.fire(i):this.xt.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+t),!0},i.prototype.nextLine=function(){return this.qt.buffer.x=0,this.index(),!0},i.prototype.keypadApplicationMode=function(){return this.xt.debug("Serial port requested application keypad."),this.bn.decPrivateModes.applicationKeypad=!0,this.vu.fire(),!0},i.prototype.keypadNumericMode=function(){return this.xt.debug("Switching back to normal keypad."),this.bn.decPrivateModes.applicationKeypad=!1,this.vu.fire(),!0},i.prototype.selectDefaultCharset=function(){return this.zh.setgLevel(0),this.zh.setgCharset(0,u.DEFAULT_CHARSET),!0},i.prototype.selectCharset=function(t){return 2!==t.length?(this.selectDefaultCharset(),!0):("/"===t[0]||this.zh.setgCharset(p[t[0]],u.CHARSETS[t[1]]||u.DEFAULT_CHARSET),!0)},i.prototype.index=function(){this.pu();var t=this.qt.buffer;return this.qt.buffer.y++,t.y===t.scrollBottom+1?(t.y--,this.lu.fire(this.gu())):t.y>=this.qt.rows&&(t.y=this.qt.rows-1),this.pu(),!0},i.prototype.tabSet=function(){return this.qt.buffer.tabs[this.qt.buffer.x]=!0,!0},i.prototype.reverseIndex=function(){this.pu();var t=this.qt.buffer;if(t.y===t.scrollTop){var i=t.scrollBottom-t.scrollTop;t.lines.shiftElements(t.ybase+t.y,i,1),t.lines.set(t.ybase+t.y,t.getBlankLine(this.gu())),this.Hh.markRangeDirty(t.scrollTop,t.scrollBottom)}else t.y--,this.pu();return!0},i.prototype.fullReset=function(){return this.vr.reset(),this.au.fire(),!0},i.prototype.reset=function(){this.uu=l.DEFAULT_ATTR_DATA.clone(),this.ou=l.DEFAULT_ATTR_DATA.clone()},i.prototype.gu=function(){return this.ou.bg&=-67108864,this.ou.bg|=67108863&this.uu.bg,this.ou},i.prototype.setgLevel=function(t){return this.zh.setgLevel(t),!0},i.prototype.screenAlignmentPattern=function(){var t=new b.CellData;t.content=1<<22|"E".charCodeAt(0),t.fg=this.uu.fg,t.bg=this.uu.bg;var i=this.qt.buffer;this.yu(0,0);for(var n=0;n<this.qt.rows;++n){var r=i.ybase+i.y+n,e=i.lines.get(r);e&&(e.fill(t),e.isWrapped=!1)}return this.Hh.markAllDirty(),this.yu(0,0),!0},i}(c.Disposable);i.InputHandler=_},844:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.Disposable=void 0;var n=function(){function t(){this.Ru=[],this.hn=!1}return t.prototype.dispose=function(){this.hn=!0;for(var t=0,i=this.Ru;t<i.length;t++)i[t].dispose();this.Ru.length=0},t.prototype.register=function(t){return this.Ru.push(t),t},t.prototype.unregister=function(t){var i=this.Ru.indexOf(t);-1!==i&&this.Ru.splice(i,1)},t}();function r(t){for(var i=0,n=t;i<n.length;i++)n[i].dispose();t.length=0}i.Disposable=n,i.disposeArray=r,i.getDisposeArrayDisposable=function(t){return{dispose:function(){return r(t)}}}},6114:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.isSafari=i.isFirefox=void 0;var n="undefined"==typeof navigator,r=n?"node":navigator.userAgent,e=n?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(e),i.isIpad="iPad"===e,i.isIphone="iPhone"===e,i.isWindows=["Windows","Win16","Win32","WinCE"].includes(e),i.isLinux=e.indexOf("Linux")>=0},8273:(t,i)=>{function n(t,i,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),n>=t.length)return t;n=(t.length+n)%t.length,r=r>=t.length?t.length:(t.length+r)%t.length;for(var e=n;e<r;++e)t[e]=i;return t}Object.defineProperty(i,"N",{value:!0}),i.concat=i.fillFallback=i.fill=void 0,i.fill=function(t,i,r,e){return t.fill?t.fill(i,r,e):n(t,i,r,e)},i.fillFallback=n,i.concat=function(t,i){var n=new t.constructor(t.length+i.length);return n.set(t),n.set(i,t.length),n}},9282:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.updateWindowsModeWrappedState=void 0;var r=n(643);i.updateWindowsModeWrappedState=function(t){var i=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1),n=null==i?void 0:i.get(t.cols-1),e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);e&&n&&(e.isWrapped=n[r.CHAR_DATA_CODE_INDEX]!==r.NULL_CELL_CODE&&n[r.CHAR_DATA_CODE_INDEX]!==r.WHITESPACE_CELL_CODE)}},3734:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;var n=function(){function t(){this.fg=0,this.bg=0,this.extended=new r}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var i=new t;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},t.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},t.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},t.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},t.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},t.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},t.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},t.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},t}();i.AttributeData=n;var r=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=-1),this.underlineStyle=t,this.underlineColor=i}return t.prototype.clone=function(){return new t(this.underlineStyle,this.underlineColor)},t.prototype.isEmpty=function(){return 0===this.underlineStyle},t}();i.ExtendedAttrs=r},9092:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;var r=n(6349),e=n(8437),s=n(511),h=n(643),u=n(4634),o=n(4863),c=n(7116),f=n(3734);i.MAX_BUFFER_SIZE=4294967295;var a=function(){function t(t,i,n){this.Eu=t,this.bi=i,this.qt=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=e.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this.Cu=s.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this.Tu=s.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this.Iu=this.qt.cols,this.Uu=this.qt.rows,this.lines=new r.CircularList(this.Bu(this.Uu)),this.scrollTop=0,this.scrollBottom=this.Uu-1,this.setupTabStops()}return t.prototype.getNullCell=function(t){return t?(this.Cu.fg=t.fg,this.Cu.bg=t.bg,this.Cu.extended=t.extended):(this.Cu.fg=0,this.Cu.bg=0,this.Cu.extended=new f.ExtendedAttrs),this.Cu},t.prototype.getWhitespaceCell=function(t){return t?(this.Tu.fg=t.fg,this.Tu.bg=t.bg,this.Tu.extended=t.extended):(this.Tu.fg=0,this.Tu.bg=0,this.Tu.extended=new f.ExtendedAttrs),this.Tu},t.prototype.getBlankLine=function(t,i){return new e.BufferLine(this.qt.cols,this.getNullCell(t),i)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this.Eu&&this.lines.maxLength>this.Uu},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this.Uu},enumerable:!1,configurable:!0}),t.prototype.Bu=function(t){if(!this.Eu)return t;var n=t+this.bi.options.scrollback;return n>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:n},t.prototype.fillViewportRows=function(t){if(0===this.lines.length){void 0===t&&(t=e.DEFAULT_ATTR_DATA);for(var i=this.Uu;i--;)this.lines.push(this.getBlankLine(t))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new r.CircularList(this.Bu(this.Uu)),this.scrollTop=0,this.scrollBottom=this.Uu-1,this.setupTabStops()},t.prototype.resize=function(t,i){var n=this.getNullCell(e.DEFAULT_ATTR_DATA),r=this.Bu(i);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this.Iu<t)for(var s=0;s<this.lines.length;s++)this.lines.get(s).resize(t,n);var h=0;if(this.Uu<i)for(var u=this.Uu;u<i;u++)this.lines.length<i+this.ybase&&(this.bi.options.windowsMode?this.lines.push(new e.BufferLine(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new e.BufferLine(t,n)));else for(u=this.Uu;u>i;u--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){var o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this.Pu&&(this.Nu(t,i),this.Iu>t))for(s=0;s<this.lines.length;s++)this.lines.get(s).resize(t,n);this.Iu=t,this.Uu=i},Object.defineProperty(t.prototype,"Pu",{get:function(){return this.Eu&&!this.bi.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype.Nu=function(t,i){this.Iu!==t&&(t>this.Iu?this.Lu(t,i):this.Du(t,i))},t.prototype.Lu=function(t,i){var n=u.reflowLargerGetLinesToRemove(this.lines,this.Iu,t,this.ybase+this.y,this.getNullCell(e.DEFAULT_ATTR_DATA));if(n.length>0){var r=u.reflowLargerCreateNewLayout(this.lines,n);u.reflowLargerApplyNewLayout(this.lines,r.layout),this.Wu(t,i,r.countRemoved)}},t.prototype.Wu=function(t,i,n){for(var r=this.getNullCell(e.DEFAULT_ATTR_DATA),s=n;s-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new e.BufferLine(t,r))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)},t.prototype.Du=function(t,i){for(var n=this.getNullCell(e.DEFAULT_ATTR_DATA),r=[],s=0,h=this.lines.length-1;h>=0;h--){var o=this.lines.get(h);if(!(!o||!o.isWrapped&&o.getTrimmedLength()<=t)){for(var c=[o];o.isWrapped&&h>0;)o=this.lines.get(--h),c.unshift(o);var f=this.ybase+this.y;if(!(f>=h&&f<h+c.length)){var a,l=c[c.length-1].getTrimmedLength(),v=u.reflowSmallerGetNewLineLengths(c,this.Iu,t),d=v.length-c.length;a=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+d):Math.max(0,this.lines.length-this.lines.maxLength+d);for(var b=[],w=0;w<d;w++){var m=this.getBlankLine(e.DEFAULT_ATTR_DATA,!0);b.push(m)}b.length>0&&(r.push({start:h+c.length+s,newLines:b}),s+=b.length),c.push.apply(c,b);var g=v.length-1,p=v[g];0===p&&(p=v[--g]);for(var y=c.length-d-1,O=l;y>=0;){var j=Math.min(O,p);if(c[g].copyCellsFrom(c[y],O-j,p-j,j,!0),0==(p-=j)&&(p=v[--g]),0==(O-=j)){y--;var _=Math.max(y,0);O=u.getWrappedLineTrimmedLength(c,_,this.Iu)}}for(w=0;w<c.length;w++)v[w]<t&&c[w].setCell(v[w],n);for(var k=d-a;k-- >0;)0===this.ybase?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+s)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+d,this.ybase+i-1)}}}if(r.length>0){var M=[],q=[];for(w=0;w<this.lines.length;w++)q.push(this.lines.get(w));var x=this.lines.length,A=x-1,S=0,R=r[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+s);var E=0;for(w=Math.min(this.lines.maxLength-1,x+s-1);w>=0;w--)if(R&&R.start>A+E){for(var C=R.newLines.length-1;C>=0;C--)this.lines.set(w--,R.newLines[C]);w++,M.push({index:A+1,amount:R.newLines.length}),E+=R.newLines.length,R=r[++S]}else this.lines.set(w,q[A--]);var T=0;for(w=M.length-1;w>=0;w--)M[w].index+=T,this.lines.onInsertEmitter.fire(M[w]),T+=M[w].amount;var I=Math.max(0,x+s-this.lines.maxLength);I>0&&this.lines.onTrimEmitter.fire(I)}},t.prototype.stringIndexToBufferIndex=function(t,i,n){for(void 0===n&&(n=!1);i;){var r=this.lines.get(t);if(!r)return[-1,-1];for(var e=n?r.getTrimmedLength():r.length,s=0;s<e;++s)if(r.get(s)[h.CHAR_DATA_WIDTH_INDEX]&&(i-=r.get(s)[h.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,s];t++}return[t,0]},t.prototype.translateBufferLineToString=function(t,i,n,r){void 0===n&&(n=0);var e=this.lines.get(t);return e?e.translateToString(i,n,r):""},t.prototype.getWrappedRangeForLine=function(t){for(var i=t,n=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}},t.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this.Iu;t+=this.bi.options.tabStopWidth)this.tabs[t]=!0},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this.Iu?this.Iu-1:t<0?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.Iu;);return t>=this.Iu?this.Iu-1:t<0?0:t},t.prototype.addMarker=function(t){var i=this,n=new o.Marker(t);return this.markers.push(n),n.register(this.lines.onTrim((function(t){n.line-=t,n.line<0&&n.dispose()}))),n.register(this.lines.onInsert((function(t){n.line>=t.index&&(n.line+=t.amount)}))),n.register(this.lines.onDelete((function(t){n.line>=t.index&&n.line<t.index+t.amount&&n.dispose(),n.line>t.index&&(n.line-=t.amount)}))),n.register(n.onDispose((function(){return i.Fu(n)}))),n},t.prototype.Fu=function(t){this.markers.splice(this.markers.indexOf(t),1)},t.prototype.iterator=function(t,i,n,r,e){return new l(this,t,i,n,r,e)},t}();i.Buffer=a;var l=function(){function t(t,i,n,r,e,s){void 0===n&&(n=0),void 0===r&&(r=t.lines.length),void 0===e&&(e=0),void 0===s&&(s=0),this.dr=t,this.Ku=i,this.Nh=n,this.Hu=r,this.zu=e,this.Gu=s,this.Nh<0&&(this.Nh=0),this.Hu>this.dr.lines.length&&(this.Hu=this.dr.lines.length),this.$u=this.Nh}return t.prototype.hasNext=function(){return this.$u<this.Hu},t.prototype.next=function(){var t=this.dr.getWrappedRangeForLine(this.$u);t.first<this.Nh-this.zu&&(t.first=this.Nh-this.zu),t.last>this.Hu+this.Gu&&(t.last=this.Hu+this.Gu),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this.dr.lines.length);for(var i="",n=t.first;n<=t.last;++n)i+=this.dr.translateBufferLineToString(n,this.Ku);return this.$u=t.last+1,{range:t,content:i}},t}();i.BufferStringIterator=l},8437:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;var r=n(482),e=n(643),s=n(511),h=n(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var u=function(){function t(t,i,n){void 0===n&&(n=!1),this.isWrapped=n,this.Yu={},this.Ju={},this.Zh=new Uint32Array(3*t);for(var r=i||s.CellData.fromCharData([0,e.NULL_CELL_CHAR,e.NULL_CELL_WIDTH,e.NULL_CELL_CODE]),h=0;h<t;++h)this.setCell(h,r);this.length=t}return t.prototype.get=function(t){var i=this.Zh[3*t+0],n=2097151&i;return[this.Zh[3*t+1],2097152&i?this.Yu[t]:n?r.stringFromCodePoint(n):"",i>>22,2097152&i?this.Yu[t].charCodeAt(this.Yu[t].length-1):n]},t.prototype.set=function(t,i){this.Zh[3*t+1]=i[e.CHAR_DATA_ATTR_INDEX],i[e.CHAR_DATA_CHAR_INDEX].length>1?(this.Yu[t]=i[1],this.Zh[3*t+0]=2097152|t|i[e.CHAR_DATA_WIDTH_INDEX]<<22):this.Zh[3*t+0]=i[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[e.CHAR_DATA_WIDTH_INDEX]<<22},t.prototype.getWidth=function(t){return this.Zh[3*t+0]>>22},t.prototype.hasWidth=function(t){return 12582912&this.Zh[3*t+0]},t.prototype.getFg=function(t){return this.Zh[3*t+1]},t.prototype.getBg=function(t){return this.Zh[3*t+2]},t.prototype.hasContent=function(t){return 4194303&this.Zh[3*t+0]},t.prototype.getCodePoint=function(t){var i=this.Zh[3*t+0];return 2097152&i?this.Yu[t].charCodeAt(this.Yu[t].length-1):2097151&i},t.prototype.isCombined=function(t){return 2097152&this.Zh[3*t+0]},t.prototype.getString=function(t){var i=this.Zh[3*t+0];return 2097152&i?this.Yu[t]:2097151&i?r.stringFromCodePoint(2097151&i):""},t.prototype.loadCell=function(t,i){var n=3*t;return i.content=this.Zh[n+0],i.fg=this.Zh[n+1],i.bg=this.Zh[n+2],2097152&i.content&&(i.combinedData=this.Yu[t]),268435456&i.bg&&(i.extended=this.Ju[t]),i},t.prototype.setCell=function(t,i){2097152&i.content&&(this.Yu[t]=i.combinedData),268435456&i.bg&&(this.Ju[t]=i.extended),this.Zh[3*t+0]=i.content,this.Zh[3*t+1]=i.fg,this.Zh[3*t+2]=i.bg},t.prototype.setCellFromCodePoint=function(t,i,n,r,e,s){268435456&e&&(this.Ju[t]=s),this.Zh[3*t+0]=i|n<<22,this.Zh[3*t+1]=r,this.Zh[3*t+2]=e},t.prototype.addCodepointToCell=function(t,i){var n=this.Zh[3*t+0];2097152&n?this.Yu[t]+=r.stringFromCodePoint(i):(2097151&n?(this.Yu[t]=r.stringFromCodePoint(2097151&n)+r.stringFromCodePoint(i),n&=-2097152,n|=2097152):n=i|1<<22,this.Zh[3*t+0]=n)},t.prototype.insertCells=function(t,i,n,r){if((t%=this.length)&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs),i<this.length-t){for(var e=new s.CellData,u=this.length-t-i-1;u>=0;--u)this.setCell(t+i+u,this.loadCell(t+u,e));for(u=0;u<i;++u)this.setCell(t+u,n)}else for(u=t;u<this.length;++u)this.setCell(u,n);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs)},t.prototype.deleteCells=function(t,i,n,r){if(t%=this.length,i<this.length-t){for(var e=new s.CellData,u=0;u<this.length-t-i;++u)this.setCell(t+u,this.loadCell(t+i+u,e));for(u=this.length-i;u<this.length;++u)this.setCell(u,n)}else for(u=t;u<this.length;++u)this.setCell(u,n);t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs),0!==this.getWidth(t)||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs)},t.prototype.replaceCells=function(t,i,n,r){for(t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs),i<this.length&&2===this.getWidth(i-1)&&this.setCellFromCodePoint(i,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new h.ExtendedAttrs);t<i&&t<this.length;)this.setCell(t++,n)},t.prototype.resize=function(t,i){if(t!==this.length){if(t>this.length){var n=new Uint32Array(3*t);this.length&&(3*t<this.Zh.length?n.set(this.Zh.subarray(0,3*t)):n.set(this.Zh)),this.Zh=n;for(var r=this.length;r<t;++r)this.setCell(r,i)}else if(t){(n=new Uint32Array(3*t)).set(this.Zh.subarray(0,3*t)),this.Zh=n;var e=Object.keys(this.Yu);for(r=0;r<e.length;r++){var s=parseInt(e[r],10);s>=t&&delete this.Yu[s]}}else this.Zh=new Uint32Array(0),this.Yu={};this.length=t}},t.prototype.fill=function(t){this.Yu={},this.Ju={};for(var i=0;i<this.length;++i)this.setCell(i,t)},t.prototype.copyFrom=function(t){for(var i in this.length!==t.length?this.Zh=new Uint32Array(t.Zh):this.Zh.set(t.Zh),this.length=t.length,this.Yu={},t.Yu)this.Yu[i]=t.Yu[i];for(var i in this.Ju={},t.Ju)this.Ju[i]=t.Ju[i];this.isWrapped=t.isWrapped},t.prototype.clone=function(){var i=new t(0);for(var n in i.Zh=new Uint32Array(this.Zh),i.length=this.length,this.Yu)i.Yu[n]=this.Yu[n];for(var n in this.Ju)i.Ju[n]=this.Ju[n];return i.isWrapped=this.isWrapped,i},t.prototype.getTrimmedLength=function(){for(var t=this.length-1;t>=0;--t)if(4194303&this.Zh[3*t+0])return t+(this.Zh[3*t+0]>>22);return 0},t.prototype.copyCellsFrom=function(t,i,n,r,e){var s=t.Zh;if(e)for(var h=r-1;h>=0;h--)for(var u=0;u<3;u++)this.Zh[3*(n+h)+u]=s[3*(i+h)+u];else for(h=0;h<r;h++)for(u=0;u<3;u++)this.Zh[3*(n+h)+u]=s[3*(i+h)+u];var o=Object.keys(t.Yu);for(u=0;u<o.length;u++){var c=parseInt(o[u],10);c>=i&&(this.Yu[c-i+n]=t.Yu[c])}},t.prototype.translateToString=function(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=this.length),t&&(n=Math.min(n,this.getTrimmedLength()));for(var s="";i<n;){var h=this.Zh[3*i+0],u=2097151&h;s+=2097152&h?this.Yu[i]:u?r.stringFromCodePoint(u):e.WHITESPACE_CELL_CHAR,i+=h>>22||1}return s},t}();i.BufferLine=u},4634:(t,i)=>{function n(t,i,n){if(i===t.length-1)return t[i].getTrimmedLength();var r=!t[i].hasContent(n-1)&&1===t[i].getWidth(n-1),e=2===t[i+1].getWidth(0);return r&&e?n-1:n}Object.defineProperty(i,"N",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(t,i,r,e,s){for(var h=[],u=0;u<t.length-1;u++){var o=u,c=t.get(++o);if(c.isWrapped){for(var f=[t.get(u)];o<t.length&&c.isWrapped;)f.push(c),c=t.get(++o);if(e>=u&&e<o)u+=f.length-1;else{for(var a=0,l=n(f,a,i),v=1,d=0;v<f.length;){var b=n(f,v,i),w=b-d,m=r-l,g=Math.min(w,m);f[a].copyCellsFrom(f[v],d,l,g,!1),(l+=g)===r&&(a++,l=0),(d+=g)===b&&(v++,d=0),0===l&&0!==a&&2===f[a-1].getWidth(r-1)&&(f[a].copyCellsFrom(f[a-1],r-1,l++,1,!1),f[a-1].setCell(r-1,s))}f[a].replaceCells(l,r,s);for(var p=0,y=f.length-1;y>0&&(y>a||0===f[y].getTrimmedLength());y--)p++;p>0&&(h.push(u+f.length-p),h.push(p)),u+=f.length-1}}}return h},i.reflowLargerCreateNewLayout=function(t,i){for(var n=[],r=0,e=i[r],s=0,h=0;h<t.length;h++)if(e===h){var u=i[++r];t.onDeleteEmitter.fire({index:h-s,amount:u}),h+=u-1,s+=u,e=i[++r]}else n.push(h);return{layout:n,countRemoved:s}},i.reflowLargerApplyNewLayout=function(t,i){for(var n=[],r=0;r<i.length;r++)n.push(t.get(i[r]));for(r=0;r<n.length;r++)t.set(r,n[r]);t.length=i.length},i.reflowSmallerGetNewLineLengths=function(t,i,r){for(var e=[],s=t.map((function(r,e){return n(t,e,i)})).reduce((function(t,i){return t+i})),h=0,u=0,o=0;o<s;){if(s-o<r){e.push(s-o);break}h+=r;var c=n(t,u,i);h>c&&(h-=c,u++);var f=2===t[u].getWidth(h-1);f&&h--;var a=f?r-1:r;e.push(a),o+=a}return e},i.getWrappedLineTrimmedLength=n},5295:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.BufferSet=void 0;var s=n(9092),h=n(8460),u=function(t){function i(i,n){var r=t.call(this)||this;return r.bi=i,r.qt=n,r.uh=r.register(new h.EventEmitter),r.reset(),r}return e(i,t),Object.defineProperty(i.prototype,"onBufferActivate",{get:function(){return this.uh.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.mr=new s.Buffer(!0,this.bi,this.qt),this.mr.fillViewportRows(),this.Vu=new s.Buffer(!1,this.bi,this.qt),this.Qu=this.mr,this.setupTabStops()},Object.defineProperty(i.prototype,"alt",{get:function(){return this.Vu},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this.Qu},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this.mr},enumerable:!1,configurable:!0}),i.prototype.activateNormalBuffer=function(){this.Qu!==this.mr&&(this.mr.x=this.Vu.x,this.mr.y=this.Vu.y,this.Vu.clear(),this.Qu=this.mr,this.uh.fire({activeBuffer:this.mr,inactiveBuffer:this.Vu}))},i.prototype.activateAltBuffer=function(t){this.Qu!==this.Vu&&(this.Vu.fillViewportRows(t),this.Vu.x=this.mr.x,this.Vu.y=this.mr.y,this.Qu=this.Vu,this.uh.fire({activeBuffer:this.Vu,inactiveBuffer:this.mr}))},i.prototype.resize=function(t,i){this.mr.resize(t,i),this.Vu.resize(t,i)},i.prototype.setupTabStops=function(t){this.mr.setupTabStops(t),this.Vu.setupTabStops(t)},i}(n(844).Disposable);i.BufferSet=u},511:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.CellData=void 0;var s=n(482),h=n(643),u=n(3734),o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.content=0,i.fg=0,i.bg=0,i.extended=new u.ExtendedAttrs,i.combinedData="",i}return e(i,t),i.fromCharData=function(t){var n=new i;return n.setFromCharData(t),n},i.prototype.isCombined=function(){return 2097152&this.content},i.prototype.getWidth=function(){return this.content>>22},i.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?s.stringFromCodePoint(2097151&this.content):""},i.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},i.prototype.setFromCharData=function(t){this.fg=t[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var i=!1;if(t[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(2===t[h.CHAR_DATA_CHAR_INDEX].length){var n=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){var r=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(n-55296)+r-56320+65536|t[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=t[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[h.CHAR_DATA_WIDTH_INDEX]<<22)},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(u.AttributeData);i.CellData=o},643:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=256,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.Marker=void 0;var s=n(8460),h=function(t){function i(n){var r=t.call(this)||this;return r.line=n,r.ye=i.Xu++,r.isDisposed=!1,r.Zu=new s.EventEmitter,r}return e(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this.ye},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onDispose",{get:function(){return this.Zu.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this.Zu.fire(),t.prototype.dispose.call(this))},i.Xu=1,i}(n(844).Disposable);i.Marker=h},7116:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",io:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(t,i)=>{var n,r;Object.defineProperty(i,"N",{value:!0}),i.C1=i.C0=void 0,(r=i.C0||(i.C0={})).NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="",r.BS="\b",r.HT="\t",r.LF="\n",r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="",(n=i.C1||(i.C1={})).PAD="",n.HOP="",n.BPH="",n.NBH="",n.IND="",n.NEL="",n.SSA="",n.ESA="",n.HTS="",n.HTJ="",n.VTS="",n.PLD="",n.PLU="",n.RI="",n.SS2="",n.SS3="",n.DCS="",n.PU1="",n.PU2="",n.STS="",n.CCH="",n.MW="",n.SPA="",n.EPA="",n.SOS="",n.SGCI="",n.SCI="",n.CSI="",n.ST="",n.OSC="",n.PM="",n.APC=""},7399:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.evaluateKeyboardEvent=void 0;var r=n(2584),e={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(t,i,n,s){var h={type:0,cancel:!1,key:void 0},u=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:"UIKeyInputUpArrow"===t.key?h.key=i?r.C0.ESC+"OA":r.C0.ESC+"[A":"UIKeyInputLeftArrow"===t.key?h.key=i?r.C0.ESC+"OD":r.C0.ESC+"[D":"UIKeyInputRightArrow"===t.key?h.key=i?r.C0.ESC+"OC":r.C0.ESC+"[C":"UIKeyInputDownArrow"===t.key&&(h.key=i?r.C0.ESC+"OB":r.C0.ESC+"[B");break;case 8:if(t.shiftKey){h.key=r.C0.BS;break}if(t.altKey){h.key=r.C0.ESC+r.C0.DEL;break}h.key=r.C0.DEL;break;case 9:if(t.shiftKey){h.key=r.C0.ESC+"[Z";break}h.key=r.C0.HT,h.cancel=!0;break;case 13:h.key=t.altKey?r.C0.ESC+r.C0.CR:r.C0.CR,h.cancel=!0;break;case 27:h.key=r.C0.ESC,t.altKey&&(h.key=r.C0.ESC+r.C0.ESC),h.cancel=!0;break;case 37:if(t.metaKey)break;u?(h.key=r.C0.ESC+"[1;"+(u+1)+"D",h.key===r.C0.ESC+"[1;3D"&&(h.key=r.C0.ESC+(n?"b":"[1;5D"))):h.key=i?r.C0.ESC+"OD":r.C0.ESC+"[D";break;case 39:if(t.metaKey)break;u?(h.key=r.C0.ESC+"[1;"+(u+1)+"C",h.key===r.C0.ESC+"[1;3C"&&(h.key=r.C0.ESC+(n?"f":"[1;5C"))):h.key=i?r.C0.ESC+"OC":r.C0.ESC+"[C";break;case 38:if(t.metaKey)break;u?(h.key=r.C0.ESC+"[1;"+(u+1)+"A",n||h.key!==r.C0.ESC+"[1;3A"||(h.key=r.C0.ESC+"[1;5A")):h.key=i?r.C0.ESC+"OA":r.C0.ESC+"[A";break;case 40:if(t.metaKey)break;u?(h.key=r.C0.ESC+"[1;"+(u+1)+"B",n||h.key!==r.C0.ESC+"[1;3B"||(h.key=r.C0.ESC+"[1;5B")):h.key=i?r.C0.ESC+"OB":r.C0.ESC+"[B";break;case 45:t.shiftKey||t.ctrlKey||(h.key=r.C0.ESC+"[2~");break;case 46:h.key=u?r.C0.ESC+"[3;"+(u+1)+"~":r.C0.ESC+"[3~";break;case 36:h.key=u?r.C0.ESC+"[1;"+(u+1)+"H":i?r.C0.ESC+"OH":r.C0.ESC+"[H";break;case 35:h.key=u?r.C0.ESC+"[1;"+(u+1)+"F":i?r.C0.ESC+"OF":r.C0.ESC+"[F";break;case 33:t.shiftKey?h.type=2:h.key=r.C0.ESC+"[5~";break;case 34:t.shiftKey?h.type=3:h.key=r.C0.ESC+"[6~";break;case 112:h.key=u?r.C0.ESC+"[1;"+(u+1)+"P":r.C0.ESC+"OP";break;case 113:h.key=u?r.C0.ESC+"[1;"+(u+1)+"Q":r.C0.ESC+"OQ";break;case 114:h.key=u?r.C0.ESC+"[1;"+(u+1)+"R":r.C0.ESC+"OR";break;case 115:h.key=u?r.C0.ESC+"[1;"+(u+1)+"S":r.C0.ESC+"OS";break;case 116:h.key=u?r.C0.ESC+"[15;"+(u+1)+"~":r.C0.ESC+"[15~";break;case 117:h.key=u?r.C0.ESC+"[17;"+(u+1)+"~":r.C0.ESC+"[17~";break;case 118:h.key=u?r.C0.ESC+"[18;"+(u+1)+"~":r.C0.ESC+"[18~";break;case 119:h.key=u?r.C0.ESC+"[19;"+(u+1)+"~":r.C0.ESC+"[19~";break;case 120:h.key=u?r.C0.ESC+"[20;"+(u+1)+"~":r.C0.ESC+"[20~";break;case 121:h.key=u?r.C0.ESC+"[21;"+(u+1)+"~":r.C0.ESC+"[21~";break;case 122:h.key=u?r.C0.ESC+"[23;"+(u+1)+"~":r.C0.ESC+"[23~";break;case 123:h.key=u?r.C0.ESC+"[24;"+(u+1)+"~":r.C0.ESC+"[24~";break;default:if(!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)if(n&&!s||!t.altKey||t.metaKey)!n||t.altKey||t.ctrlKey||t.shiftKey||!t.metaKey?t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&1===t.key.length?h.key=t.key:t.key&&t.ctrlKey&&"_"===t.key&&(h.key=r.C0.US):65===t.keyCode&&(h.type=1);else{var o=e[t.keyCode],c=o&&o[t.shiftKey?1:0];if(c)h.key=r.C0.ESC+c;else if(t.keyCode>=65&&t.keyCode<=90){var f=t.ctrlKey?t.keyCode-64:t.keyCode+32;h.key=r.C0.ESC+String.fromCharCode(f)}}else t.keyCode>=65&&t.keyCode<=90?h.key=String.fromCharCode(t.keyCode-64):32===t.keyCode?h.key=r.C0.NUL:t.keyCode>=51&&t.keyCode<=55?h.key=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?h.key=r.C0.DEL:219===t.keyCode?h.key=r.C0.ESC:220===t.keyCode?h.key=r.C0.FS:221===t.keyCode&&(h.key=r.C0.GS)}return h}},482:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},i.utf32ToString=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);for(var r="",e=i;e<n;++e){var s=t[e];s>65535?(s-=65536,r+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):r+=String.fromCharCode(s)}return r};var n=function(){function t(){this.no=0}return t.prototype.clear=function(){this.no=0},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var r=0,e=0;this.no&&(56320<=(u=t.charCodeAt(e++))&&u<=57343?i[r++]=1024*(this.no-55296)+u-56320+65536:(i[r++]=this.no,i[r++]=u),this.no=0);for(var s=e;s<n;++s){var h=t.charCodeAt(s);if(55296<=h&&h<=56319){if(++s>=n)return this.no=h,r;var u;56320<=(u=t.charCodeAt(s))&&u<=57343?i[r++]=1024*(h-55296)+u-56320+65536:(i[r++]=h,i[r++]=u)}else 65279!==h&&(i[r++]=h)}return r},t}();i.StringToUtf32=n;var r=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var r,e,s,h,u=0,o=0,c=0;if(this.interim[0]){var f=!1,a=this.interim[0];a&=192==(224&a)?31:224==(240&a)?15:7;for(var l=0,v=void 0;(v=63&this.interim[++l])&&l<4;)a<<=6,a|=v;for(var d=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,b=d-l;c<b;){if(c>=n)return 0;if(128!=(192&(v=t[c++]))){c--,f=!0;break}this.interim[l++]=v,a<<=6,a|=63&v}f||(2===d?a<128?c--:i[u++]=a:3===d?a<2048||a>=55296&&a<=57343||65279===a||(i[u++]=a):a<65536||a>1114111||(i[u++]=a)),this.interim.fill(0)}for(var w=n-4,m=c;m<n;){for(;!(!(m<w)||128&(r=t[m])||128&(e=t[m+1])||128&(s=t[m+2])||128&(h=t[m+3]));)i[u++]=r,i[u++]=e,i[u++]=s,i[u++]=h,m+=4;if((r=t[m++])<128)i[u++]=r;else if(192==(224&r)){if(m>=n)return this.interim[0]=r,u;if(128!=(192&(e=t[m++]))){m--;continue}if((o=(31&r)<<6|63&e)<128){m--;continue}i[u++]=o}else if(224==(240&r)){if(m>=n)return this.interim[0]=r,u;if(128!=(192&(e=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=e,u;if(128!=(192&(s=t[m++]))){m--;continue}if((o=(15&r)<<12|(63&e)<<6|63&s)<2048||o>=55296&&o<=57343||65279===o)continue;i[u++]=o}else if(240==(248&r)){if(m>=n)return this.interim[0]=r,u;if(128!=(192&(e=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=e,u;if(128!=(192&(s=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=e,this.interim[2]=s,u;if(128!=(192&(h=t[m++]))){m--;continue}if((o=(7&r)<<18|(63&e)<<12|(63&s)<<6|63&h)<65536||o>1114111)continue;i[u++]=o}}return u},t}();i.Utf8ToUtf32=r},225:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.UnicodeV6=void 0;var r,e=n(8273),s=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u=function(){function t(){if(this.version="6",!r){r=new Uint8Array(65536),e.fill(r,1),r[0]=0,e.fill(r,0,1,32),e.fill(r,0,127,160),e.fill(r,2,4352,4448),r[9001]=2,r[9002]=2,e.fill(r,2,11904,42192),r[12351]=1,e.fill(r,2,44032,55204),e.fill(r,2,63744,64256),e.fill(r,2,65040,65050),e.fill(r,2,65072,65136),e.fill(r,2,65280,65377),e.fill(r,2,65504,65511);for(var t=0;t<s.length;++t)e.fill(r,0,s[t][0],s[t][1]+1)}}return t.prototype.wcwidth=function(t){return t<32?0:t<127?1:t<65536?r[t]:function(t,i){var n,r=0,e=i.length-1;if(t<i[0][0]||t>i[e][1])return!1;for(;e>=r;)if(t>i[n=r+e>>1][1])r=n+1;else{if(!(t<i[n][0]))return!0;e=n-1}return!1}(t,h)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1},t}();i.UnicodeV6=u},5981:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.WriteBuffer=void 0;var n=function(){function t(t){this.ro=t,this.Gh=[],this.eo=[],this.so=0,this.ho=0}return t.prototype.writeSync=function(t){if(this.Gh.length){for(var i=this.ho;i<this.Gh.length;++i){var n=this.Gh[i],r=this.eo[i];this.ro(n),r&&r()}this.Gh=[],this.eo=[],this.so=0,this.ho=2147483647}this.ro(t)},t.prototype.write=function(t,i){var n=this;if(this.so>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this.Gh.length||(this.ho=0,setTimeout((function(){return n.uo()}))),this.so+=t.length,this.Gh.push(t),this.eo.push(i)},t.prototype.uo=function(){for(var t=this,i=Date.now();this.Gh.length>this.ho;){var n=this.Gh[this.ho],r=this.eo[this.ho];if(this.ho++,this.ro(n),this.so-=n.length,r&&r(),Date.now()-i>=12)break}this.Gh.length>this.ho?(this.ho>50&&(this.Gh=this.Gh.slice(this.ho),this.eo=this.eo.slice(this.ho),this.ho=0),setTimeout((function(){return t.uo()}),0)):(this.Gh=[],this.eo=[],this.so=0,this.ho=0)},t}();i.WriteBuffer=n},5770:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.DcsHandler=i.DcsParser=void 0;var r=n(482),e=n(8742),s=n(5770),h=[],u=function(){function t(){this.oo=Object.create(null),this.co=h,this.fo=0,this.ao=function(){}}return t.prototype.dispose=function(){this.oo=Object.create(null),this.ao=function(){},this.co=h},t.prototype.registerHandler=function(t,i){void 0===this.oo[t]&&(this.oo[t]=[]);var n=this.oo[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this.oo[t]&&delete this.oo[t]},t.prototype.setHandlerFallback=function(t){this.ao=t},t.prototype.reset=function(){this.co.length&&this.unhook(!1),this.co=h,this.fo=0},t.prototype.hook=function(t,i){if(this.reset(),this.fo=t,this.co=this.oo[t]||h,this.co.length)for(var n=this.co.length-1;n>=0;n--)this.co[n].hook(i);else this.ao(this.fo,"HOOK",i)},t.prototype.put=function(t,i,n){if(this.co.length)for(var e=this.co.length-1;e>=0;e--)this.co[e].put(t,i,n);else this.ao(this.fo,"PUT",r.utf32ToString(t,i,n))},t.prototype.unhook=function(t){if(this.co.length){for(var i=this.co.length-1;i>=0&&!this.co[i].unhook(t);i--);for(i--;i>=0;i--)this.co[i].unhook(!1)}else this.ao(this.fo,"UNHOOK",t);this.co=h,this.fo=0},t}();i.DcsParser=u;var o=new e.Params;o.addParam(0);var c=function(){function t(t){this.lo=t,this.Zh="",this.vo=o,this.do=!1}return t.prototype.hook=function(t){this.vo=t.length>1||t.params[0]?t.clone():o,this.Zh="",this.do=!1},t.prototype.put=function(t,i,n){this.do||(this.Zh+=r.utf32ToString(t,i,n),this.Zh.length>s.PAYLOAD_LIMIT&&(this.Zh="",this.do=!0))},t.prototype.unhook=function(t){var i=!1;return this.do?i=!1:t&&(i=this.lo(this.Zh,this.vo)),this.vo=o,this.Zh="",this.do=!1,i},t}();i.DcsHandler=c},2015:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"N",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;var s=n(844),h=n(8273),u=n(8742),o=n(6242),c=n(6351),f=function(){function t(t){this.table=new Uint8Array(t)}return t.prototype.setDefault=function(t,i){h.fill(this.table,t<<4|i)},t.prototype.add=function(t,i,n,r){this.table[i<<8|t]=n<<4|r},t.prototype.addMany=function(t,i,n,r){for(var e=0;e<t.length;e++)this.table[i<<8|t[e]]=n<<4|r},t}();i.TransitionTable=f;var a=160;i.VT500_TRANSITION_TABLE=function(){var t=new f(4095),i=Array.apply(null,Array(256)).map((function(t,i){return i})),n=function(t,n){return i.slice(t,n)},r=n(32,127),e=n(0,24);e.push(25),e.push.apply(e,n(28,32));var s,h=n(0,14);for(s in t.setDefault(1,0),t.addMany(r,0,2,0),h)t.addMany([24,26,153,154],s,3,0),t.addMany(n(128,144),s,3,0),t.addMany(n(144,152),s,3,0),t.add(156,s,0,0),t.add(27,s,11,1),t.add(157,s,4,8),t.addMany([152,158,159],s,0,7),t.add(155,s,11,3),t.add(144,s,11,9);return t.addMany(e,0,3,0),t.addMany(e,1,3,1),t.add(127,1,0,1),t.addMany(e,8,0,8),t.addMany(e,3,3,3),t.add(127,3,0,3),t.addMany(e,4,3,4),t.add(127,4,0,4),t.addMany(e,6,3,6),t.addMany(e,5,3,5),t.add(127,5,0,5),t.addMany(e,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(e,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(e,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(e,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(e,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(e,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(e,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(a,0,2,0),t.add(a,8,5,8),t.add(a,6,0,6),t.add(a,11,0,11),t.add(a,13,13,13),t}();var l=function(t){function n(n){void 0===n&&(n=i.VT500_TRANSITION_TABLE);var r=t.call(this)||this;return r.bo=n,r.initialState=0,r.currentState=r.initialState,r.vo=new u.Params,r.vo.addParam(0),r.wo=0,r.precedingCodepoint=0,r.mo=function(t,i,n){},r.po=function(t){},r.yo=function(t,i){},r.Oo=function(t){},r.jo=function(t){return t},r._o=r.mo,r.ko=Object.create(null),r.Mo=Object.create(null),r.qo=Object.create(null),r.xo=new o.OscParser,r.Ao=new c.DcsParser,r.So=r.jo,r.registerEscHandler({final:"\\"},(function(){return!0})),r}return e(n,t),n.prototype.Ro=function(t,i){void 0===i&&(i=[64,126]);var n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=t.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var r=0;r<t.intermediates.length;++r){var e=t.intermediates.charCodeAt(r);if(32>e||e>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=e}}if(1!==t.final.length)throw new Error("final must be a single byte");var s=t.final.charCodeAt(0);if(i[0]>s||s>i[1])throw new Error("final must be in range "+i[0]+" .. "+i[1]);return(n<<=8)|s},n.prototype.identToString=function(t){for(var i=[];t;)i.push(String.fromCharCode(255&t)),t>>=8;return i.reverse().join("")},n.prototype.dispose=function(){this.Mo=Object.create(null),this.ko=Object.create(null),this.qo=Object.create(null),this.xo.dispose(),this.Ao.dispose()},n.prototype.setPrintHandler=function(t){this._o=t},n.prototype.clearPrintHandler=function(){this._o=this.mo},n.prototype.registerEscHandler=function(t,i){var n=this.Ro(t,[48,126]);void 0===this.qo[n]&&(this.qo[n]=[]);var r=this.qo[n];return r.push(i),{dispose:function(){var t=r.indexOf(i);-1!==t&&r.splice(t,1)}}},n.prototype.clearEscHandler=function(t){this.qo[this.Ro(t,[48,126])]&&delete this.qo[this.Ro(t,[48,126])]},n.prototype.setEscHandlerFallback=function(t){this.Oo=t},n.prototype.setExecuteHandler=function(t,i){this.ko[t.charCodeAt(0)]=i},n.prototype.clearExecuteHandler=function(t){this.ko[t.charCodeAt(0)]&&delete this.ko[t.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(t){this.po=t},n.prototype.registerCsiHandler=function(t,i){var n=this.Ro(t);void 0===this.Mo[n]&&(this.Mo[n]=[]);var r=this.Mo[n];return r.push(i),{dispose:function(){var t=r.indexOf(i);-1!==t&&r.splice(t,1)}}},n.prototype.clearCsiHandler=function(t){this.Mo[this.Ro(t)]&&delete this.Mo[this.Ro(t)]},n.prototype.setCsiHandlerFallback=function(t){this.yo=t},n.prototype.registerDcsHandler=function(t,i){return this.Ao.registerHandler(this.Ro(t),i)},n.prototype.clearDcsHandler=function(t){this.Ao.clearHandler(this.Ro(t))},n.prototype.setDcsHandlerFallback=function(t){this.Ao.setHandlerFallback(t)},n.prototype.registerOscHandler=function(t,i){return this.xo.registerHandler(t,i)},n.prototype.clearOscHandler=function(t){this.xo.clearHandler(t)},n.prototype.setOscHandlerFallback=function(t){this.xo.setHandlerFallback(t)},n.prototype.setErrorHandler=function(t){this.So=t},n.prototype.clearErrorHandler=function(){this.So=this.jo},n.prototype.reset=function(){this.currentState=this.initialState,this.xo.reset(),this.Ao.reset(),this.vo.reset(),this.vo.addParam(0),this.wo=0,this.precedingCodepoint=0},n.prototype.parse=function(t,i){for(var n=0,r=0,e=this.currentState,s=this.xo,h=this.Ao,u=this.wo,o=this.vo,c=this.bo.table,f=0;f<i;++f){switch((r=c[e<<8|((n=t[f])<160?n:a)])>>4){case 2:for(var l=f+1;;++l){if(l>=i||(n=t[l])<32||n>126&&n<a){this._o(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this._o(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this._o(t,f,l),f=l-1;break}if(++l>=i||(n=t[l])<32||n>126&&n<a){this._o(t,f,l),f=l-1;break}}break;case 3:this.ko[n]?this.ko[n]():this.po(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this.So({position:f,code:n,currentState:e,collect:u,params:o,abort:!1}).abort)return;break;case 7:for(var v=this.Mo[u<<8|n],d=v?v.length-1:-1;d>=0&&!v[d](o);d--);d<0&&this.yo(u<<8|n,o),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:o.addParam(0);break;case 58:o.addSubParam(-1);break;default:o.addDigit(n-48)}}while(++f<i&&(n=t[f])>47&&n<60);f--;break;case 9:u<<=8,u|=n;break;case 10:for(var b=this.qo[u<<8|n],w=b?b.length-1:-1;w>=0&&!b[w]();w--);w<0&&this.Oo(u<<8|n),this.precedingCodepoint=0;break;case 11:o.reset(),o.addParam(0),u=0;break;case 12:h.hook(u<<8|n,o);break;case 13:for(var m=f+1;;++m)if(m>=i||24===(n=t[m])||26===n||27===n||n>127&&n<a){h.put(t,f,m),f=m-1;break}break;case 14:h.unhook(24!==n&&26!==n),27===n&&(r|=1),o.reset(),o.addParam(0),u=0,this.precedingCodepoint=0;break;case 4:s.start();break;case 5:for(var g=f+1;;g++)if(g>=i||(n=t[g])<32||n>127&&n<a){s.put(t,f,g),f=g-1;break}break;case 6:s.end(24!==n&&26!==n),27===n&&(r|=1),o.reset(),o.addParam(0),u=0,this.precedingCodepoint=0}e=15&r}this.wo=u,this.currentState=e},n}(s.Disposable);i.EscapeSequenceParser=l},6242:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.OscHandler=i.OscParser=void 0;var r=n(5770),e=n(482),s=[],h=function(){function t(){this.ue=0,this.co=s,this.ye=-1,this.oo=Object.create(null),this.ao=function(){}}return t.prototype.registerHandler=function(t,i){void 0===this.oo[t]&&(this.oo[t]=[]);var n=this.oo[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this.oo[t]&&delete this.oo[t]},t.prototype.setHandlerFallback=function(t){this.ao=t},t.prototype.dispose=function(){this.oo=Object.create(null),this.ao=function(){},this.co=s},t.prototype.reset=function(){2===this.ue&&this.end(!1),this.co=s,this.ye=-1,this.ue=0},t.prototype.Eo=function(){if(this.co=this.oo[this.ye]||s,this.co.length)for(var t=this.co.length-1;t>=0;t--)this.co[t].start();else this.ao(this.ye,"START")},t.prototype.Co=function(t,i,n){if(this.co.length)for(var r=this.co.length-1;r>=0;r--)this.co[r].put(t,i,n);else this.ao(this.ye,"PUT",e.utf32ToString(t,i,n))},t.prototype.To=function(t){if(this.co.length){for(var i=this.co.length-1;i>=0&&!this.co[i].end(t);i--);for(i--;i>=0;i--)this.co[i].end(!1)}else this.ao(this.ye,"END",t)},t.prototype.start=function(){this.reset(),this.ue=1},t.prototype.put=function(t,i,n){if(3!==this.ue){if(1===this.ue)for(;i<n;){var r=t[i++];if(59===r){this.ue=2,this.Eo();break}if(r<48||57<r)return void(this.ue=3);-1===this.ye&&(this.ye=0),this.ye=10*this.ye+r-48}2===this.ue&&n-i>0&&this.Co(t,i,n)}},t.prototype.end=function(t){0!==this.ue&&(3!==this.ue&&(1===this.ue&&this.Eo(),this.To(t)),this.co=s,this.ye=-1,this.ue=0)},t}();i.OscParser=h;var u=function(){function t(t){this.lo=t,this.Zh="",this.do=!1}return t.prototype.start=function(){this.Zh="",this.do=!1},t.prototype.put=function(t,i,n){this.do||(this.Zh+=e.utf32ToString(t,i,n),this.Zh.length>r.PAYLOAD_LIMIT&&(this.Zh="",this.do=!0))},t.prototype.end=function(t){var i=!1;return this.do?i=!1:t&&(i=this.lo(this.Zh)),this.Zh="",this.do=!1,i},t}();i.OscHandler=u},8742:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.Params=void 0;var n=2147483647,r=function(){function t(t,i){if(void 0===t&&(t=32),void 0===i&&(i=32),this.maxLength=t,this.maxSubParamsLength=i,i>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this.Io=new Int32Array(i),this.Uo=0,this.Bo=new Uint16Array(t),this.Po=!1,this.No=!1,this.Lo=!1}return t.fromArray=function(i){var n=new t;if(!i.length)return n;for(var r=i[0]instanceof Array?1:0;r<i.length;++r){var e=i[r];if(e instanceof Array)for(var s=0;s<e.length;++s)n.addSubParam(e[s]);else n.addParam(e)}return n},t.prototype.clone=function(){var i=new t(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i.Io.set(this.Io),i.Uo=this.Uo,i.Bo.set(this.Bo),i.Po=this.Po,i.No=this.No,i.Lo=this.Lo,i},t.prototype.toArray=function(){for(var t=[],i=0;i<this.length;++i){t.push(this.params[i]);var n=this.Bo[i]>>8,r=255&this.Bo[i];r-n>0&&t.push(Array.prototype.slice.call(this.Io,n,r))}return t},t.prototype.reset=function(){this.length=0,this.Uo=0,this.Po=!1,this.No=!1,this.Lo=!1},t.prototype.addParam=function(t){if(this.Lo=!1,this.length>=this.maxLength)this.Po=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this.Bo[this.length]=this.Uo<<8|this.Uo,this.params[this.length++]=t>n?n:t}},t.prototype.addSubParam=function(t){if(this.Lo=!0,this.length)if(this.Po||this.Uo>=this.maxSubParamsLength)this.No=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this.Io[this.Uo++]=t>n?n:t,this.Bo[this.length-1]++}},t.prototype.hasSubParams=function(t){return(255&this.Bo[t])-(this.Bo[t]>>8)>0},t.prototype.getSubParams=function(t){var i=this.Bo[t]>>8,n=255&this.Bo[t];return n-i>0?this.Io.subarray(i,n):null},t.prototype.getSubParamsAll=function(){for(var t={},i=0;i<this.length;++i){var n=this.Bo[i]>>8,r=255&this.Bo[i];r-n>0&&(t[i]=this.Io.slice(n,r))}return t},t.prototype.addDigit=function(t){var i;if(!(this.Po||!(i=this.Lo?this.Uo:this.length)||this.Lo&&this.No)){var r=this.Lo?this.Io:this.params,e=r[i-1];r[i-1]=~e?Math.min(10*e+t,n):t}},t}();i.Params=r},744:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;var u=n(2585),o=n(5295),c=n(8460),f=n(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;var a=function(t){function n(n){var r=t.call(this)||this;return r.bi=n,r.isUserScrolling=!1,r.ot=new c.EventEmitter,r.cols=Math.max(n.options.cols,i.MINIMUM_COLS),r.rows=Math.max(n.options.rows,i.MINIMUM_ROWS),r.buffers=new o.BufferSet(n,r),r}return e(n,t),Object.defineProperty(n.prototype,"onResize",{get:function(){return this.ot.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){t.prototype.dispose.call(this),this.buffers.dispose()},n.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this.ot.fire({cols:t,rows:i})},n.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},s([h(0,u.IOptionsService)],n)}(f.Disposable);i.BufferService=a},7994:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.CharsetService=void 0;var n=function(){function t(){this.glevel=0,this.Do=[]}return t.prototype.reset=function(){this.charset=void 0,this.Do=[],this.glevel=0},t.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.Do[t]},t.prototype.setgCharset=function(t,i){this.Do[t]=i,this.glevel===t&&(this.charset=i)},t}();i.CharsetService=n},1753:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.CoreMouseService=void 0;var s=n(2585),h=n(8460),u={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(t){return 4!==t.button&&1===t.action&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)}},VT200:{events:19,restrict:function(t){return 32!==t.action}},DRAG:{events:23,restrict:function(t){return 32!==t.action||3!==t.button}},ANY:{events:31,restrict:function(t){return!0}}};function o(t,i){var n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return 4===t.button?(n|=64,n|=t.action):(n|=3&t.button,4&t.button&&(n|=64),8&t.button&&(n|=128),32===t.action?n|=32:0!==t.action||i||(n|=3)),n}var c=String.fromCharCode,f={DEFAULT:function(t){var i=[o(t,!1)+32,t.col+32,t.row+32];return i[0]>255||i[1]>255||i[2]>255?"":"[M"+c(i[0])+c(i[1])+c(i[2])},SGR:function(t){var i=0===t.action&&4!==t.button?"m":"M";return"[<"+o(t,!0)+";"+t.col+";"+t.row+i}},a=function(){function t(t,i){this.qt=t,this.bn=i,this.Wo={},this.Fo={},this.Ko="",this.Ho="",this.zo=new h.EventEmitter,this.Go=null;for(var n=0,r=Object.keys(u);n<r.length;n++){var e=r[n];this.addProtocol(e,u[e])}for(var s=0,o=Object.keys(f);s<o.length;s++){var c=o[s];this.addEncoding(c,f[c])}this.reset()}return t.prototype.addProtocol=function(t,i){this.Wo[t]=i},t.prototype.addEncoding=function(t,i){this.Fo[t]=i},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this.Ko},set:function(t){if(!this.Wo[t])throw new Error('unknown protocol "'+t+'"');this.Ko=t,this.zo.fire(this.Wo[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return 0!==this.Wo[this.Ko].events},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this.Ho},set:function(t){if(!this.Fo[t])throw new Error('unknown encoding "'+t+'"');this.Ho=t},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this.Go=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this.zo.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this.qt.cols||t.row<0||t.row>=this.qt.rows)return!1;if(4===t.button&&32===t.action)return!1;if(3===t.button&&32!==t.action)return!1;if(4!==t.button&&(2===t.action||3===t.action))return!1;if(t.col++,t.row++,32===t.action&&this.Go&&this.$o(this.Go,t))return!1;if(!this.Wo[this.Ko].restrict(t))return!1;var i=this.Fo[this.Ho](t);return i&&("DEFAULT"===this.Ho?this.bn.triggerBinaryEvent(i):this.bn.triggerDataEvent(i,!0)),this.Go=t,!0},t.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},t.prototype.$o=function(t,i){return t.col===i.col&&t.row===i.row&&t.button===i.button&&t.action===i.action&&t.ctrl===i.ctrl&&t.alt===i.alt&&t.shift===i.shift},r([e(0,s.IBufferService),e(1,s.ICoreService)],t)}();i.CoreMouseService=a},6975:function(t,i,n){var r,e=this&&this.P||(r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.CoreService=void 0;var u=n(2585),o=n(8460),c=n(1439),f=n(844),a=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),v=function(t){function i(i,n,r,e){var s=t.call(this)||this;return s.qt=n,s.xt=r,s.bi=e,s.isCursorInitialized=!1,s.isCursorHidden=!1,s.Fh=s.register(new o.EventEmitter),s.Yo=s.register(new o.EventEmitter),s.Wh=s.register(new o.EventEmitter),s.Jo=i,s.register({dispose:function(){return s.Jo=void 0}}),s.modes=c.clone(a),s.decPrivateModes=c.clone(l),s}return e(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this.Fh.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this.Yo.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this.Wh.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=c.clone(a),this.decPrivateModes=c.clone(l)},i.prototype.triggerDataEvent=function(t,i){if(void 0===i&&(i=!1),!this.bi.options.disableStdin){var n=this.qt.buffer;n.ybase!==n.ydisp&&this.Jo(),i&&this.Yo.fire(),this.xt.debug('sending data "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this.Fh.fire(t)}},i.prototype.triggerBinaryEvent=function(t){this.bi.options.disableStdin||(this.xt.debug('sending binary "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this.Wh.fire(t))},s([h(1,u.IBufferService),h(2,u.ILogService),h(3,u.IOptionsService)],i)}(f.Disposable);i.CoreService=v},3730:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}};Object.defineProperty(i,"N",{value:!0}),i.DirtyRowService=void 0;var s=n(2585),h=function(){function t(t){this.qt=t,this.clearRange()}return Object.defineProperty(t.prototype,"start",{get:function(){return this.Eo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.To},enumerable:!1,configurable:!0}),t.prototype.clearRange=function(){this.Eo=this.qt.buffer.y,this.To=this.qt.buffer.y},t.prototype.markDirty=function(t){t<this.Eo?this.Eo=t:t>this.To&&(this.To=t)},t.prototype.markRangeDirty=function(t,i){if(t>i){var n=t;t=i,i=n}t<this.Eo&&(this.Eo=t),i>this.To&&(this.To=i)},t.prototype.markAllDirty=function(){this.markRangeDirty(0,this.qt.rows-1)},r([e(0,s.IBufferService)],t)}();i.DirtyRowService=h},4348:function(t,i,n){var r=this&&this.Vo||function(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var r=Array(t),e=0;for(i=0;i<n;i++)for(var s=arguments[i],h=0,u=s.length;h<u;h++,e++)r[e]=s[h];return r};Object.defineProperty(i,"N",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;var e=n(2585),s=n(8343),h=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.Qo=new Map;for(var n=0,r=t;n<r.length;n++){var e=r[n],s=e[0],h=e[1];this.set(s,h)}}return t.prototype.set=function(t,i){var n=this.Qo.get(t);return this.Qo.set(t,i),n},t.prototype.forEach=function(t){this.Qo.forEach((function(i,n){return t(n,i)}))},t.prototype.has=function(t){return this.Qo.has(t)},t.prototype.get=function(t){return this.Qo.get(t)},t}();i.ServiceCollection=h;var u=function(){function t(){this.Xo=new h,this.Xo.set(e.IInstantiationService,this)}return t.prototype.setService=function(t,i){this.Xo.set(t,i)},t.prototype.getService=function(t){return this.Xo.get(t)},t.prototype.createInstance=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=s.getServiceDependencies(t).sort((function(t,i){return t.index-i.index})),h=[],u=0,o=e;u<o.length;u++){var c=o[u],f=this.Xo.get(c.id);if(!f)throw new Error("[createInstance] "+t.name+" depends on UNKNOWN service "+c.id+".");h.push(f)}var a=e.length>0?e[0].index:i.length;if(i.length!==a)throw new Error("[createInstance] First service dependency of "+t.name+" at position "+(a+1)+" conflicts with "+i.length+" static arguments");return new(t.bind.apply(t,r([void 0],r(i,h))))},t}();i.InstantiationService=u},7866:function(t,i,n){var r=this&&this.kt||function(t,i,n,r){var e,s=arguments.length,h=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(h=(s<3?e(h):s>3?e(i,n,h):e(i,n))||h);return s>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.Mt||function(t,i){return function(n,r){i(n,r,t)}},s=this&&this.Vo||function(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var r=Array(t),e=0;for(i=0;i<n;i++)for(var s=arguments[i],h=0,u=s.length;h<u;h++,e++)r[e]=s[h];return r};Object.defineProperty(i,"N",{value:!0}),i.LogService=i.LogLevel=void 0;var h,u=n(2585);!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.OFF=4]="OFF"}(h=i.LogLevel||(i.LogLevel={}));var o={debug:h.DEBUG,info:h.INFO,warn:h.WARN,error:h.ERROR,off:h.OFF},c=function(){function t(t){var i=this;this.bi=t,this.Zo(),this.bi.onOptionChange((function(t){"logLevel"===t&&i.Zo()}))}return t.prototype.Zo=function(){this.tc=o[this.bi.options.logLevel]},t.prototype.ic=function(t){for(var i=0;i<t.length;i++)"function"==typeof t[i]&&(t[i]=t[i]())},t.prototype.nc=function(t,i,n){this.ic(n),t.call.apply(t,s([console,"xterm.js: "+i],n))},t.prototype.debug=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.tc<=h.DEBUG&&this.nc(console.log,t,i)},t.prototype.info=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.tc<=h.INFO&&this.nc(console.info,t,i)},t.prototype.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.tc<=h.WARN&&this.nc(console.warn,t,i)},t.prototype.error=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.tc<=h.ERROR&&this.nc(console.error,t,i)},r([e(0,u.IOptionsService)],t)}();i.LogService=c},7302:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=i.DEFAULT_BELL_SOUND=void 0;var r=n(8460),e=n(6114),s=n(1439);i.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",i.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:i.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:e.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var h=["normal","bold","100","200","300","400","500","600","700","800","900"],u=["cols","rows"],o=function(){function t(t){this.rc=new r.EventEmitter,this.options=s.clone(i.DEFAULT_OPTIONS);for(var n=0,e=Object.keys(t);n<e.length;n++){var h=e[n];if(h in this.options)try{var u=t[h];this.options[h]=this.ec(h,u)}catch(t){}}}return Object.defineProperty(t.prototype,"onOptionChange",{get:function(){return this.rc.event},enumerable:!1,configurable:!0}),t.prototype.setOption=function(t,n){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');if(u.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==n&&(n=this.ec(t,n),this.options[t]!==n&&(this.options[t]=n,this.rc.fire(t)))},t.prototype.ec=function(t,n){switch(t){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[t]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof n&&1<=n&&n<=1e3)break;n=h.includes(n)?n:i.DEFAULT_OPTIONS[t];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(t+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(t+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(t+" cannot be less than or equal to 0, value: "+n)}return n},t.prototype.getOption=function(t){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return this.options[t]},t}();i.OptionsService=o},8343:(t,i)=>{function n(t,i,n){i.di$target===i?i.di$dependencies.push({id:t,index:n}):(i.di$dependencies=[{id:t,index:n}],i.di$target=i)}Object.defineProperty(i,"N",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(t){return t.di$dependencies||[]},i.createDecorator=function(t){if(i.serviceRegistry.has(t))return i.serviceRegistry.get(t);var r=function(t,i,e){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(r,t,e)};return r.toString=function(){return t},i.serviceRegistry.set(t,r),r}},2585:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.IUnicodeService=i.IOptionsService=i.ILogService=i.IInstantiationService=i.IDirtyRowService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;var r=n(8343);i.IBufferService=r.createDecorator("BufferService"),i.ICoreMouseService=r.createDecorator("CoreMouseService"),i.ICoreService=r.createDecorator("CoreService"),i.ICharsetService=r.createDecorator("CharsetService"),i.IDirtyRowService=r.createDecorator("DirtyRowService"),i.IInstantiationService=r.createDecorator("InstantiationService"),i.ILogService=r.createDecorator("LogService"),i.IOptionsService=r.createDecorator("OptionsService"),i.IUnicodeService=r.createDecorator("UnicodeService")},1480:(t,i,n)=>{Object.defineProperty(i,"N",{value:!0}),i.UnicodeService=void 0;var r=n(8460),e=n(225),s=function(){function t(){this.sc=Object.create(null),this.co="",this.hc=new r.EventEmitter;var t=new e.UnicodeV6;this.register(t),this.co=t.version,this.uc=t}return Object.defineProperty(t.prototype,"onChange",{get:function(){return this.hc.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"versions",{get:function(){return Object.keys(this.sc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this.co},set:function(t){if(!this.sc[t])throw new Error('unknown Unicode version "'+t+'"');this.co=t,this.uc=this.sc[t],this.hc.fire(t)},enumerable:!1,configurable:!0}),t.prototype.register=function(t){this.sc[t.version]=t},t.prototype.wcwidth=function(t){return this.uc.wcwidth(t)},t.prototype.getStringCellWidth=function(t){for(var i=0,n=t.length,r=0;r<n;++r){var e=t.charCodeAt(r);if(55296<=e&&e<=56319){if(++r>=n)return i+this.wcwidth(e);var s=t.charCodeAt(r);56320<=s&&s<=57343?e=1024*(e-55296)+s-56320+65536:i+=this.wcwidth(s)}i+=this.wcwidth(e)}return i},t}();i.UnicodeService=s}},n={},function t(r){if(n[r])return n[r].exports;var e=n[r]={exports:{}};return i[r].call(e.exports,e,e.exports,t),e.exports}(4389))},t=>{var i,n;self,t.exports=(i={775:(t,i)=>{Object.defineProperty(i,"N",{value:!0}),i.FitAddon=void 0;var n=function(){function t(){}return t.prototype.activate=function(t){this.L=t},t.prototype.dispose=function(){},t.prototype.fit=function(){var t=this.proposeDimensions();if(t&&this.L){var i=this.L.cr;this.L.rows===t.rows&&this.L.cols===t.cols||(i.D.clear(),this.L.resize(t.cols,t.rows))}},t.prototype.proposeDimensions=function(){if(this.L&&this.L.element&&this.L.element.parentElement){var t=this.L.cr;if(0!==t.D.dimensions.actualCellWidth&&0!==t.D.dimensions.actualCellHeight){var i=window.getComputedStyle(this.L.element.parentElement),n=parseInt(i.getPropertyValue("height")),r=Math.max(0,parseInt(i.getPropertyValue("width"))),e=window.getComputedStyle(this.L.element),s=n-(parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom"))),h=r-(parseInt(e.getPropertyValue("padding-right"))+parseInt(e.getPropertyValue("padding-left")))-t.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(h/t.D.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(s/t.D.dimensions.actualCellHeight))}}}},t}();i.FitAddon=n}},n={},function t(r){if(n[r])return n[r].exports;var e=n[r]={exports:{}};return i[r](e,e.exports,t),e.exports}(775))},,(t,i,n)=>{n.r(i),n.d(i,{default:()=>r});const r=n.p+"index.html"},(t,i,n)=>{n.r(i),n.d(i,{default:()=>r});const r=n.p+"xterm.css"},(t,i,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(i,{a:()=>r})},(t,i,n)=>{function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}n.d(i,{a:()=>r})},(t,i,n)=>{function r(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,i,n){return i&&r(t.prototype,i),n&&r(t,n),t}n.d(i,{a:()=>e})},(t,i,n)=>{n.d(i,{a:()=>s});var r=n(13);var e=n(14);function s(t){return function(t){if(Array.isArray(t))return(0,r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||(0,e.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},(t,i,n)=>{function r(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}n.d(i,{a:()=>r})},(t,i,n)=>{n.d(i,{a:()=>e});var r=n(13);function e(t,i){if(t){if("string"==typeof t)return(0,r.a)(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.a)(t,i):void 0}}}],i={};function n(r){var e=i[r];if(void 0!==e)return e.exports;var s=i[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var i=t&&t.N?()=>t.default:()=>t;return n.d(i,{a:i}),i},n.d=(t,i)=>{for(var r in i)n.o(i,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"N",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var i=n.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var r=i.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{function t(t,i,n,r,e,s,h){try{var u=t[s](h),o=u.value}catch(t){return void n(t)}u.done?i(o):Promise.resolve(o).then(r,e)}function i(i){return function(){var n=this,r=arguments;return new Promise((function(e,s){var h=i.apply(n,r);function u(i){t(h,e,s,u,o,"next",i)}function o(i){t(h,e,s,u,o,"throw",i)}u(void 0)}))}}var r=n(14);function e(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,e=!1,s=void 0;try{for(var h,u=t[Symbol.iterator]();!(r=(h=u.next()).done)&&(n.push(h.value),!i||n.length!==i);r=!0);}catch(t){e=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(e)throw s}}return n}}(t,i)||(0,r.a)(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=n(10),h=n(1),u=n.n(h),o=n(4),c=n(5),f=n(12);function a(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var l=n(11);function v(t,i){return(v=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function d(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&v(t,i)}var b=n(9);function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,i){return!i||"object"!==(0,b.a)(i)&&"function"!=typeof i?w(t):i}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var i;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(i=t[Symbol.asyncIterator]))return i.call(t);if(Symbol.iterator&&null!=(i=t[Symbol.iterator]))return i.call(t)}throw new TypeError("Object is not async iterable")}var y=n(2),O=n.n(y);var j=n(0).default;function _(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return k(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,h=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return h=t.done,t},e:function(t){u=!0,s=t},f:function(){try{h||null==n.return||n.return()}finally{if(u)throw s}}}}function k(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function M(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(i){var e=g(this).constructor;n=Reflect.construct(r,arguments,e)}else n=r.apply(this,arguments);return m(this,n)}}var q=function(t){return function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n?function(){t.emit(i,n.apply(void 0,arguments))}:function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];t.emit.apply(t,[i].concat(r))}}},x=function(t){d(n,t);var i=M(n);function n(t){var r;(0,s.a)(this,n),(r=i.call(this)).oc=t;var e=q(w(r));return r.oc.onmessage=e("data",(function(t){return t.data instanceof ArrayBuffer?j.from(t.data):t.data})),r.oc.onclose=e("close"),r.oc.onerror=e("error"),r}return(0,l.a)(n,[{key:"send",value:function(t){if(!this.oc||"open"!=this.oc.readyState)throw"Channel is not open, cannot send data";this.oc.send(t)}},{key:"label",get:function(){return this.oc.label}}]),n}(O());const A=function(t){d(r,t);var n=M(r);function r(t){var e;(0,s.a)(this,r),e=n.call(this);try{e.wrtc=t.wrtc||{RTCPeerConnection,RTCIceCandidate}}catch(t){throw t instanceof ReferenceError?ReferenceError("wrtc implementation must be set when running in nodejs."):t}if(!e.wrtc.RTCPeerConnection)throw ReferenceError("wrtc implementation have incorrect interface.");e.cc=!!t.initiator,e.fc=!!t.trickle,e.ac=!!t.candidate_timeout||0,e.oc=void 0,e.lc=[],e.vc=new e.wrtc.RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]});var h,o=q(w(e)),c=o("signal"),f=o("channel"),a=function(){var t=i(u().mark((function t(){var i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.vc.createOffer();case 2:return i=t.sent,t.next=5,e.vc.setLocalDescription(i);case 5:e.fc&&c(i);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){e.oc.onopen=o("connect"),e.oc.onmessage=o("data",(function(t){return t.data instanceof ArrayBuffer?j.from(t.data):t.data})),e.oc.onclose=o("close"),e.oc.onerror=o("error")},v=!1;return e.signal=function(){var t=i(u().mark((function t(i){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&i.type){t.next=4;break}return t.abrupt("return");case 4:if("offer"!=i.type){t.next=15;break}return t.next=7,e.vc.setRemoteDescription(i);case 7:return t.next=9,e.vc.createAnswer();case 9:return n=t.sent,t.next=12,e.vc.setLocalDescription(n);case 12:e.fc&&c(n),t.next=23;break;case 15:if("answer"!=i.type){t.next=22;break}if("closed"==e.vc.connectionState||v){t.next=20;break}return v=!0,t.next=20,e.vc.setRemoteDescription(i);case 20:t.next=23;break;case 22:if("candidate"==i.type&&"closed"!=e.vc.connectionState)try{r=new e.wrtc.RTCIceCandidate(i.candidate),e.vc.addIceCandidate(r)}catch(t){}case 23:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}(),e.channel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=e.vc.createDataChannel(t);i.onopen=function(){var t=new x(i);e.lc.push(t),f(t)}},h=!1,e.vc.ondatachannel=function(t){e.oc?t.channel.onopen=function(){var i=new x(t.channel);e.lc.push(i),f(i)}:(e.oc=t.channel,l())},e.vc.onicecandidate=function(t){t.candidate&&(e.fc||h?c({type:"candidate",candidate:t.candidate.candidate}):setTimeout((function(){h||(h=!0,c(e.vc.localDescription))}),e.ac))},e.cc&&(e.oc=e.vc.createDataChannel("someName"),l(),a()),e}return(0,l.a)(r,[{key:"send",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.vc&&"disconnected"!=this.vc.connectionState&&(this.oc&&"open"==this.oc.readyState?this.oc.send(t):setTimeout((function(){return i.send(t,n+500)}),n))}},{key:"destroy",value:function(){if(this.oc)try{this.oc.close()}catch(t){}var t,i=_(this.lc);try{for(i.s();!(t=i.n()).done;){var n=t.value;try{n.close()}catch(t){}}}catch(t){i.e(t)}finally{i.f()}if(this.vc&&"closed"!=this.vc.connectionState)try{this.vc.close(),this.emit("close")}catch(t){}}},{key:"fingerprint",value:function(t){var i=(t?this.vc.localDescription.sdp:this.vc.remoteDescription.sdp).split("\r\n").filter((function(t){return t.includes("a=fingerprint:")})).map((function(t){var i=e(t.replace("a=fingerprint:","").split(" "),2);i[0];return i[1]}));return 1==i.length?i[0]:null}},{key:"type",value:function(t){return t?this.vc.localDescription.type:this.vc.remoteDescription.type}}]),r}(O());function S(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(i){var e=g(this).constructor;n=Reflect.construct(r,arguments,e)}else n=r.apply(this,arguments);return m(this,n)}}const R=function(t){d(n,t);var i=S(n);function n(t){var r;(0,s.a)(this,n);var e=function(t){return function(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(i=r).emit.apply(i,[t].concat(e))}};return(r=i.call(this)).dc=new WebSocket(t),r.dc.onopen=e("open"),r.dc.onmessage=function(t){return r.emit("message",t.data)},r.dc.onclose=e("close"),r.dc.onerror=e("error"),r}return(0,l.a)(n,[{key:"send",value:function(){var t;this.dc.readyState==this.dc.OPEN&&(t=this.dc).send.apply(t,arguments)}},{key:"close",value:function(){var t;(t=this.dc).close.apply(t,arguments)}},{key:"terminate",value:function(){this.dc.close(1e3,"Terminate")}}]),n}(O());var E=n(0).default,C=null;C=function(t){var i=new Uint8Array(t);return window.crypto.getRandomValues(i),T(i)};var T=function(t){for(var i=E.alloc(t.byteLength),n=new Uint8Array(t),r=0;r<i.length;++r)i[r]=n[r];return i},I=function(t){return E.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")};const U={bc:C,wc:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"==t?i:3&i|8).toString(16)}))},mc:function(t,i,n){if(null!=(t={IPv4:"ip4",IPv6:"ip6",mdns:"mdns"}[t]))return"/".concat(t,"/").concat(i,"/udp/").concat(n)},gc:function(t){return E.from(t,"base64")},yc:function(t){return E.from(t,"hex")},Oc:I,jc:function(t){return E.from(t).toString("binary")},_c:T,kc:function(t){for(var i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;++r)n[r]=t[r];return i},Mc:function(){return"-WP0000-"+I(C(9))}};var B=null;const P=void 0===(B=crypto).subtle?void 0:B.subtle;var N=n(0).default,L=null;L=function(){var t=i(u().mark((function t(i,n,r){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U,t.next=3,P.digest(i,U.kc(n));case 3:return t.t1=t.sent,e=t.t0._c.call(t.t0,t.t1),t.abrupt("return",r?e.toString(r):e);case 6:case"end":return t.stop()}}),t)})));return function(i,n,r){return t.apply(this,arguments)}}();const D=function(){var t=i(u().mark((function t(i){var n,r,e,s,h,o=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:null,n||(n="SHA-256"),e=null,i instanceof String||"string"==typeof i?e=U.gc(i):i instanceof Array?e=N.from(i):i instanceof Uint8Array&&(e=i),null!=e){t.next=7;break}return t.abrupt("return",null);case 7:return t.next=9,L(n,e,r);case 9:return s=t.sent,"base64"==r&&(s=s.replace(/\+/g,"-").replace(/\//g,"_")),h=e.length==s.length,t.abrupt("return",h?e:s);case 13:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}();function W(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return F(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,h=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return h=t.done,t},e:function(t){u=!0,s=t},f:function(){try{h||null==n.return||n.return()}finally{if(u)throw s}}}}function F(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function K(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?K(Object(n),!0).forEach((function(i){a(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}function z(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(i){var e=g(this).constructor;n=Reflect.construct(r,arguments,e)}else n=r.apply(this,arguments);return m(this,n)}}const G={Client:function(t){d(r,t);var n=z(r);function r(t){var e;(0,s.a)(this,r),e=n.call(this);var h=H({offer_timeout:120,nr_offers:10,generate_offers:!0,peer_id:U.Mc(),endpoints:[],always_have_offers:!1},t);e.qc=h.wrtc,e.xc=h.offer_timeout,e.Ac=h.nr_offers,e.Sc=h.generate_offers,e.Rc=h.peer_id,e.Ec=new Set,e.Cc=h.endpoints,e.Tc=h.always_have_offers,e.Ic=[],e.Uc={},e.Bc={},e.Pc={};var o=function(t){var i=e.Bc[t];return null!=i&&i.is_connected},c=function(t,i){t.on("connect",(function(){t.is_connected||(t.is_connected=!0,delete e.Uc[i],e.Ic=e.Ic.filter((function(t){return t.offer_id!=i})),null==e.Bc[t.peer_id]?(e.Bc[t.peer_id]=t,function(t){var i={local:U.mc(t.localFamily,t.localAddress,t.localPort),remote:U.mc(t.remoteFamily,t.remoteAddress,t.remotePort)};i.local=i.local||(0,f.a)(t.candidates.local).sort()[0],i.remote=i.remote||(0,f.a)(t.candidates.remote).sort()[0],t.address=i}(t),e.emit("peer",t)):t.destroy())})),t.on("close",(function(){if(t.is_connected&&(t.is_connected=!1,e.Bc[t.peer_id]==t&&delete e.Bc[t.peer_id]),t.destroy(),0==e.peers.filter((function(t){return t.is_connected})).length&&Object.values(e.Uc).filter((function(t){return"offer"==t.type(!0)})).length<e.Ac*e.Ec.size){var i,n=W(e.Ec);try{for(n.s();!(i=n.n()).done;){var r=i.value;y(r)}}catch(t){n.e(t)}finally{n.f()}}})),t.on("error",(function(n){a(i),t.destroy()}))},a=function t(i){if(e.Tc&&e.Ic.length<=1)return w(8e3),void setTimeout((function(){return t(i)}),1e4);var n=e.Uc[i];null!=n&&(n.destroy(),delete e.Uc[i]),e.Ic=e.Ic.filter((function(t){return t.offer_id!=i}))},l=function(t){var i,n=null,r=W(t);try{for(r.s();!(i=r.n()).done;){var e=i.value;"offer"!=e.type&&"answer"!=e.type||(n=e)}}catch(t){r.e(t)}finally{r.f()}var s,h=W(t);try{for(h.s();!(s=h.n()).done;){var u=s.value;"candidate"==u.type&&(n.sdp+="a="+u.candidate+"\r\n")}}catch(t){h.e(t)}finally{h.f()}return n},v=function(t){return"offer"==t.type||"answer"==t.type?t.sdp.split("\n").filter((function(t){return t.includes("a=candidate:")})):"candidate"==t.type?["a="+t.candidate]:void 0},d=function(t,i,n){var r="remote";n&&(i.forEach((function(t){return e.emit("candidate",t)})),r="local");var s,h=t.candidates||{remote:[],local:[]},u=h[r],o=W(i);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(~c.indexOf("a=candidate")){var f=c.split(" "),a=f[4],l=f[5],v=(f[7],/^.*\.local$/.test(a)),d=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/.test(a)?"IPv4":v?"mdns":"IPv6";u.push(U.mc(d,a,l))}}}catch(t){o.e(t)}finally{o.f()}t.candidates=h},b=function(){var t=i(u().mark((function t(i,n){var r,s,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],s=0;s<i&&e.Ic.length>0;s++)r.push(e.Ic.shift());if(!((h=i-r.length)>0)){t.next=9;break}return t.t0=r,t.next=7,Promise.all(Array.from(Array(h)).map((function(){return w(n)})).flat());case 7:t.t1=t.sent,r=t.t0.concat.call(t.t0,t.t1);case 9:return t.abrupt("return",r.slice(0,i));case 11:case"end":return t.stop()}}),t)})));return function(i,n){return t.apply(this,arguments)}}(),w=function(){var t=i(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=U.jc(U.bc(20)),setTimeout((function(){return a(r)}),1e3*e.xc),t.next=4,new Promise((function(t,s){var h=new A({initiator:!0,wrtc:e.qc,trickle:!0});h.is_connected=!1;var o=[];c(h,r),h.on("signal",function(){var s=i(u().mark((function i(s){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:d(h,v(s),!0),o.push(s),"offer"==s.type&&(e.Uc[r]=h,setTimeout((function(){var i={offer:l(o),offer_id:r};t(i)}),n));case 3:case"end":return i.stop()}}),i)})));return function(t){return s.apply(this,arguments)}}())}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}(),m=function(){var t=i(u().mark((function t(n,r,s){var h,f,b,w;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=n.offer_id,f=n.peer_id,!o(f)){t.next=5;break}return t.abrupt("return");case 5:if(null==e.Uc[h]){t.next=8;break}return t.abrupt("return");case 8:setTimeout((function(){return a(h)}),1e4),(b=new A({initiator:!1,wrtc:e.qc,trickle:!0})).is_connected=!1,b.peer_id=f,w=[],c(b,h),b.on("signal",function(){var t=i(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(b,v(i),!0),!o(f)){t.next=3;break}return t.abrupt("return");case 3:"answer"==i.type&&(e.Uc[h]=b,setTimeout((function(){var t={answer:l(w),offer_id:h};w=null,r(t)}),s)),null==w?r({answer:i,offer_id:h}):w.push(i);case 5:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}()),d(b,v(n.offer),!1),b.signal(n.offer);case 17:case"end":return t.stop()}}),t)})));return function(i,n,r){return t.apply(this,arguments)}}(),g=function(){var t=i(u().mark((function t(i){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o(i.peer_id)){t.next=4;break}return a(i.offer_id),t.abrupt("return");case 4:null!=(n=e.Uc[i.offer_id])&&(n.peer_id=i.peer_id,d(n,v(i.answer),!1),n.signal(i.answer));case 6:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}(),y=function(){var t=i(u().mark((function t(i){var n,r,s,h,o,c,f,a,l,v,d,w,m,g,y,O=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=O.length>1&&void 0!==O[1]?O[1]:null,r=e.Pc[i],s=H({nr_offers:e.Ac,trickle_timeout:5e3},n),null==r){t.next=50;break}h=e.Cc.map((function(t){return D(t,"SHA-1","binary")})),o=!0,c=!1,t.prev=7,a=p(h);case 9:return t.next=11,a.next();case 11:return l=t.sent,o=l.done,t.next=15,l.value;case 15:if(v=t.sent,o){t.next=34;break}if(d=v,!e.Sc){t.next=24;break}return t.next=21,b(s.nr_offers,s.trickle_timeout);case 21:t.t0=t.sent,t.next=25;break;case 24:t.t0=[];case 25:w=t.t0,m={action:"announce",numwant:s.nr_offers,uploaded:0,downloaded:0,left:129302391,info_hash:d,peer_id:e.Rc,offers:w},g=null!=s.event?H(H({},m),{},{event:s.event}):m,y=JSON.stringify(g),r.send(y);case 31:o=!0,t.next=9;break;case 34:t.next=40;break;case 36:t.prev=36,t.t1=t.catch(7),c=!0,f=t.t1;case 40:if(t.prev=40,t.prev=41,o||null==a.return){t.next=45;break}return t.next=45,a.return();case 45:if(t.prev=45,!c){t.next=48;break}throw f;case 48:return t.finish(45);case 49:return t.finish(40);case 50:case"end":return t.stop()}}),t,null,[[7,36,40,50],[41,,45,49]])})));return function(i){return t.apply(this,arguments)}}(),O=function(){var t=i(u().mark((function t(i,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=n.offer&&null!=n.offer_id?m(n,(function(t){var r=JSON.stringify(H({action:"announce",info_hash:n.info_hash,peer_id:e.Rc,to_peer_id:n.peer_id},t));i.send(r)}),150):null!=n.answer&&null!=n.offer_id&&g(n);case 2:case"end":return t.stop()}}),t)})));return function(i,n){return t.apply(this,arguments)}}();return e.connectTrackers=function(t){var i=e.Ec;e.Ec=new Set([].concat((0,f.a)(e.Ec),(0,f.a)(t)));var n,r=W(e.Ec);try{var s=function(){var t=n.value;if(i.has(t))return"continue";var r=!1,s=!0;!function i(){var n=!e.Ec.has(t);if(!r&&!n){var h=new R(t);h.peer_id=e.Rc,h.tracker_url=t,h.announce_interval=null,e.Pc[t]=h;var u=function(){return y(t)};h.on("open",(function(){r=!0,s&&(y(t,{trickle_timeout:400,nr_offers:1}),s=!1),y(t),e.emit("tracker",h)})),h.on("close",(function(n){r?(r=!1,h.terminate(),setTimeout(i,5e3),clearInterval(h.announce_interval)):setTimeout(i,12e4),null!=e.Pc[t]&&delete e.Pc[t]})),h.on("error",(function(t){})),h.on("message",(function(t){var i,n=JSON.parse(t);"announce"==n.action&&(null!=n.interval?(i=n.interval,clearInterval(h.announce_interval),h.announce_interval=setInterval(u,1e3*i-5e3)):O(h,n))}))}}()};for(r.s();!(n=r.n()).done;)s()}catch(t){r.e(t)}finally{r.f()}},e}return(0,l.a)(r,[{key:"disconnectTrackers",value:function(){this.Ec=new Set([]);for(var t=0,i=Object.values(this.Pc);t<i.length;t++){i[t].close()}}},{key:"peers",get:function(){return Object.values(this.Bc)}},{key:"endpoints",get:function(){return this.Cc}},{key:"tracker_urls",get:function(){return this.Ec}}]),r}(O())};const $=function(t){return function(i){var n=null;try{n=JSON.parse(i)}catch(t){return}null!=n.protocol&&null!=n.version&&t(n)}},Y=function(t,i){if("string"!=typeof t)throw"role must be string";return JSON.stringify({protocol:"wps",version:"1.0",session:i,role:t})};var J,V;const Q={readFile:(V=i(u().mark((function t(i,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw"NotImplemented";case 1:case"end":return t.stop()}}),t)}))),function(t,i){return V.apply(this,arguments)}),writeFile:(J=i(u().mark((function t(i,n,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t,i,n){return J.apply(this,arguments)})};function X(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,r)}return n}var Z=function(t,i){var n=U.Oc(t);return i?"-----BEGIN PUBLIC KEY-----\n".concat(n,"\n-----END PUBLIC KEY-----"):"-----BEGIN PRIVATE KEY-----\n".concat(n,"\n-----END PRIVATE KEY-----")},tt=function(t,i){var n=i?"-----BEGIN PUBLIC KEY-----".length:"-----BEGIN PRIVATE KEY-----".length,r=i?"-----END PUBLIC KEY-----".length:"-----END PRIVATE KEY-----".length,e=t.substring(n,t.length-r);return U.gc(e)},it=null,nt={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},rt={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},et=function(){var t=i(u().mark((function t(){var i,n,r,e,s,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.generateKey(nt,!0,["sign","verify"]);case 2:return i=t.sent,t.next=5,P.exportKey("spki",i.publicKey);case 5:return n=t.sent,t.next=8,P.exportKey("pkcs8",i.privateKey);case 8:return r=t.sent,e=U._c(n),s=U._c(r),h=new st,t.next=14,h.import(e,s);case 14:return t.abrupt("return",h);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),st=function(){function t(){(0,s.a)(this,t),this.Nc=null,this.Lc=null}var n,r,e,h;return(0,l.a)(t,[{key:"import",value:(h=i(u().mark((function t(i,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=4;break}return t.next=3,P.importKey("spki",U.kc(i),rt,!0,["verify"]);case 3:this.Nc=t.sent;case 4:if(!n){t.next=8;break}return t.next=7,P.importKey("pkcs8",U.kc(n),nt,!0,["sign"]);case 7:this.Lc=t.sent;case 8:case"end":return t.stop()}}),t,this)}))),function(t,i){return h.apply(this,arguments)})},{key:"export",value:(e=i(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U,t.next=3,P.exportKey("spki",this.Nc);case 3:return t.t1=t.sent,t.t2=t.t0._c.call(t.t0,t.t1),t.t3=U,t.next=8,P.exportKey("pkcs8",this.Lc);case 8:return t.t4=t.sent,t.t5=t.t3._c.call(t.t3,t.t4),t.abrupt("return",{publicKey:t.t2,privateKey:t.t5});case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sign",value:(r=i(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.Lc){t.next=2;break}throw"Cannot sign without a private key!";case 2:return t.t0=U,t.next=5,P.sign(nt,this.Lc,U.kc(i));case 5:return t.t1=t.sent,t.abrupt("return",t.t0._c.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"verify",value:(n=i(u().mark((function t(i,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.Nc){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,P.verify(nt,this.Nc,U.kc(n),U.kc(i));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,i){return n.apply(this,arguments)})}]),t}();it={KeyPair:st,generate:et};const ht=function(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?X(Object(n),!0).forEach((function(i){a(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}({setupKey:function(){var t=i(u().mark((function t(i){var n,r,e,s,h,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.readFile(i+".pub","utf8");case 3:return n=t.sent,t.next=6,Q.readFile(i,"utf8");case 6:return r=t.sent,e=new it.KeyPair,t.next=11,e.import(tt(n,!0),tt(r,!1));case 11:return t.abrupt("return",e);case 14:return t.prev=14,t.t0=t.catch(0),t.next=19,it.generate();case 19:return s=t.sent,t.next=22,s.export();case 22:return h=t.sent,o=h.publicKey,c=h.privateKey,t.next=27,Q.writeFile(i,Z(c,!1),"utf8");case 27:return t.next=29,Q.writeFile(i+".pub",Z(o,!0),"utf8");case 29:return t.abrupt("return",s);case 30:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(i){return t.apply(this,arguments)}}()},it);const ut={sign:function(){var t=i(u().mark((function t(i,n){var r,e,s,h,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&(r=i.fingerprint(!0))&&(e=i.fingerprint(!1))){t.next=2;break}return t.abrupt("return",{});case 2:return s=U.yc([r.replace(/\:/g,""),e.replace(/\:/g,"")].sort().join("")),t.next=5,n.sign(s);case 5:return h=t.sent,t.next=8,n.export();case 8:return o=t.sent,c=o.publicKey,t.abrupt("return",{peer_id:U.Oc(c),fingerprint:U.Oc(s),signature:U.Oc(h)});case 11:case"end":return t.stop()}}),t)})));return function(i,n){return t.apply(this,arguments)}}(),verify:function(){var t=i(u().mark((function t(i,n){var r,e,s,h,o,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!!(i&&n&&i.peer_id&&n.peer_id)){t.next=3;break}return t.abrupt("return",!1);case 3:return e=new ht.KeyPair,t.next=6,e.import(U.gc(i.peer_id));case 6:return s=new ht.KeyPair,t.next=9,s.import(U.gc(n.peer_id));case 9:if(h=U.gc(i.fingerprint),o=U.gc(n.fingerprint),c=U.gc(i.signature),f=U.gc(n.signature),r&&(r=h.equals(o)),t.t0=r,!t.t0){t.next=19;break}return t.next=18,e.verify(h,c);case 18:r=t.sent;case 19:if(t.t1=r,!t.t1){t.next=24;break}return t.next=23,s.verify(o,f);case 23:r=t.sent;case 24:return t.abrupt("return",r);case 25:case"end":return t.stop()}}),t)})));return function(i,n){return t.apply(this,arguments)}}()};function ot(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,r)}return n}function ct(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(i){var e=g(this).constructor;n=Reflect.construct(r,arguments,e)}else n=r.apply(this,arguments);return m(this,n)}}const ft={Client:function(t){d(r,t);var n=ct(r);function r(t){var e;if((0,s.a)(this,r),e=n.call(this),!(t=function(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?ot(Object(n),!0).forEach((function(i){a(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}({user:"root",client:null,terminal:null,id_key:null},t)).client)throw ReferenceError("Must provide a tracker client.");if(!t.terminal)throw ReferenceError("Must provide a terminal.");if(!t.id_key)throw ReferenceError("id_key must be provided.");var h=t.terminal,o=t.client,c=null;c=h.onData((function(t){""==t&&(c.dispose(),e.emit("close",0))}));var f=function(i){return JSON.stringify({type:"clientAuthorizeReq",payload:{mode:"password",user:t.user,password:i}})},l=function(){return JSON.stringify({type:"ttyResize",payload:{width:h.cols,height:h.rows}})},v=function(t){return h.write("".concat(t,"'s password:🔑 ")),new Promise((function(t,i){var n="",r=null;r=h.onData((function(i){switch(i+=""){case"\n":case"\r":case"":h.write("\r\n"),r.dispose(),t(n);break;case"\b":case"":return void(n.length>0&&(n=n.slice(0,n.length-1)));case"":return void r.dispose();default:n+=i}}))}))},d=function(){var n=i(u().mark((function n(r){var s,a,b,w,m,g,p,y,O,j;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,a=null,b=null,w=null,m=!1,h.write("\r[:] 2/2 Connecting to Peer..."),n.next=8,ut.sign(r,t.id_key);case 8:g=n.sent,p=function(){w?(w=null,c.dispose(),h.write("Connection closed.\r\n"),e.emit("close",0)):o.tracker_urls.size>0&&0==o.peers.filter((function(t){return t.is_connected})).length&&h.write("\r[x] 2/2 Connecting to Peer..."),b&&(c.dispose(),a.dispose(),b=null)},y=$(function(){var t=i(u().mark((function t(i){var n,e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w){t.next=24;break}if(n="server"==i.role){t.next=6;break}return r.destroy(),t.abrupt("return");case 6:if(t.t0=n,!t.t0){t.next=11;break}return t.next=10,ut.verify(g,i.session);case 10:n=t.sent;case 11:if(n){t.next=15;break}return r.destroy(),t.abrupt("return");case 15:return t.next=17,D(i.session.peer_id,"SHA-256");case 17:if(e=t.sent,n&&(n=o.endpoints.map((function(t){return U.gc(t)})).find((function(t){return t.equals(e)}))),n){t.next=23;break}return r.destroy(),t.abrupt("return");case 23:n&&(m=!0,r.channel("wps"));case 24:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}()),O=function(){var n=i(u().mark((function i(n){var r;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("clientAuthorizeRes"!=(r=JSON.parse(n)).type){i.next=18;break}if(!r.payload.authorized||s){i.next=8;break}s=!0,w.send(l()),i.next=16;break;case 8:return h.write("Permission denied, please try again.\r\n"),i.t0=w,i.t1=f,i.next=13,v(t.user);case 13:i.t2=i.sent,i.t3=(0,i.t1)(i.t2),i.t0.send.call(i.t0,i.t3);case 16:i.next=19;break;case 18:case 19:case"end":return i.stop()}}),i)})));return function(t){return n.apply(this,arguments)}}(),j=function(){var n=i(u().mark((function i(n){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(m){i.next=2;break}return i.abrupt("return");case 2:if("wps"!=n.label||w){i.next=17;break}return o.off("peer",d),o.disconnectTrackers(),(w=n).on("data",O),w.on("close",(function(){return r.destroy()})),h.write("\r[✔] 2/2 Connecting to Peer...\n\r"),i.t0=w,i.t1=f,i.next=13,v(t.user);case 13:return i.t2=i.sent,i.t3=(0,i.t1)(i.t2),i.t0.send.call(i.t0,i.t3),i.abrupt("return");case 17:if("tty"!=n.label||b){i.next=25;break}return b=n,c.dispose(),c=h.onData((function(t){return b.send(t)})),a=h.onResize((function(){return w.send(l())})),b.on("data",(function(t){return h.write(t)})),b.on("close",(function(){return r.destroy()})),i.abrupt("return");case 25:case"end":return i.stop()}}),i)})));return function(t){return n.apply(this,arguments)}}(),r.on("channel",j),r.on("data",y),r.on("close",p),r.send(Y("client",g));case 17:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();o.on("peer",d),h.write("\r[ ] 1/2 Connecting to Tracker..."),o.once("tracker",(function(){h.write("\r[✔] 1/2 Connecting to Tracker...\n\r"),h.write("\r[ ] 2/2 Connecting to Peer...")}));var b=!1;return o.on("tracker",(function(t){t.on("message",(function i(n){var r=JSON.parse(n);b?t.off("message",i):r.peer_id&&(b=!0,h.write("\r[.] 2/2 Connecting to Peer..."))}))})),e}return r}(O())};n(0).default;n(7),n(8);var at=function t(n,r){(0,s.a)(this,t);var h=e(r.peer.includes("@")?r.peer.split("@"):["root",r.peer],2),f=h[0],a=h[1],l=["wss://tracker.webpeer.repl.co","wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz","wss://tracker.sloppyta.co/announce","wss://tracker.files.fm:7073/announce","wss://hub.bugout.link/announce"],v={background:document.body.style["background-color"]||"#000"};(function(){var t=i(u().mark((function t(){var i,r,e,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht.setupKey("id_rsa");case 2:i=t.sent,r=new c.FitAddon,e=new o.Terminal({cursorStyle:"bar",theme:v}),s=new G.Client({nr_offers:2,endpoints:[a]}),new ft.Client({user:f,terminal:e,client:s,id_key:i}).on("close",(function(){s.disconnectTrackers(),e.reset(),e.write("Refresh to reconnect.\r\n")})),e.open(n),e.focus(),e.loadAddon(r),r.fit(),document.body.onresize=function(){return r.fit()},s.connectTrackers(l);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()};!function(){var t=unescape(window.location.search.slice(1));if(""!=t&&(document.title="wps - "+t,history.pushState)){var i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+t;window.history.pushState({path:i},"",i)}var n={peer:t},r=document.getElementById("terminal");new at(r,n)}()})()})();